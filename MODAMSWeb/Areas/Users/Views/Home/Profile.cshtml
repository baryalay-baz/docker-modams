@using Microsoft.AspNetCore.Mvc.Localization
@using System.Globalization
@inject IViewLocalizer Localizer

@model MODAMS.Models.ViewModels.Dto.ProfileDataDTO

<!-- PAGE-HEADER -->
<div class="page-header">
    <div>
        <h1 class="page-title">@Localizer["Profile"]</h1>
    </div>
    <div class="ms-auto pageheader-btn">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a asp-area="Users" asp-controller="Home" asp-action="Index">@Localizer["Dashboard"]</a></li>
            <li class="breadcrumb-item active" aria-current="page">@Localizer["Profile"]</li>
        </ol>
    </div>
</div>
<!-- PAGE-HEADER END -->
<!-- ROW-1 OPEN -->
<div class="row" id="user-profile">
    <div class="col-lg-12">
        <div class="card">
            <div class="card-body">
                <div class="row align-items-center">
                    <div class="col-lg-12 col-md-12 col-xl-6">
                        <div class="d-flex flex-wrap align-items-center">
                            <div class="profile-img-main rounded" id="profile-image">
                                <img src="@Model.ImageUrl" alt="img" class="m-0 p-1 rounded hrem-6">
                            </div>
                            <div class="ms-4" id="dvInfo">
                                <h4 id="lblFullName">@Model.FullName</h4>
                                <p class="text-muted mb-2" id="lblJobTitle">@Model.JobTitle</p>

                                <div class="main-dropdown-form-demo">
                                    <button class="btn btn-primary btn-sm" data-bs-toggle="dropdown" area-expandexd="false">
                                        <i class="fa fa-pencil"></i> @Localizer["EditPicture"]
                                    </button>
                                    <div class="dropdown-menu" style="">
                                        <div class="p-1">
                                            <h4 class="dropdown-title">@Localizer["UploadProfilePicture"]</h4><br />
                                            <p class="text-muted" style="font-size:10px;">@Localizer["PictureSize"]: <b>128px * 128px (@Localizer["Height"] * @Localizer["Width"])</b></p>
                                            <form method="post" asp-action="UploadPicture" enctype="multipart/form-data">
                                                <div class="form-group">
                                                    <input class="form-control file-input form-control-sm" type="file" name="file">
                                                    <span asp-validation-for="ImageUrl" class="text-danger"></span>
                                                </div>
                                                <div class="form-group">
                                                    <button class="btn btn-primary btn-sm"><i class="fa fa-solid fa-upload"></i> @Localizer["Upload"]</button>
                                                </div>                                                
                                            </form>   
                                        </div>
                                    </div>
                                    <button class="btn btn-secondary btn-sm" data-bs-toggle="dropdown" aria-expanded="false">
                                        <i class="fa fa-key"></i> @Localizer["ResetPassword"] <i class="icon ion-ios-arrow-down text-12"></i>
                                    </button>
                                    <div class="dropdown-menu" style="">
                                        <div class="p-1">
                                            <h4 class="dropdown-title">@Localizer["ResetPassword"]</h4><br />
                                            <p>@Localizer["ResetConfirmationMessage"]<br /><br />@Localizer["AreYouSure"]?</p>
                                            <a asp-area="Users" asp-action="ResetPassword" asp-controller="Home" class="btn btn-primary btn-sm"><i class="mdi mdi-checkbox-marked-circle-outline"></i> @Localizer["ResetPassword"]</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-12 col-md-12 col-xl-6">
                        <div class="d-md-flex flex-wrap justify-content-lg-end">
                        </div>
                    </div>
                </div>
            </div>
            <div class="border-top">
                <div class="wideget-user-tab">
                    <div class="tab-menu-heading">
                        <div class="tabs-menu1">
                            <ul class="nav">
                                <li><a href="#profileMain" class="active show" data-bs-toggle="tab">@Localizer["Profile"]</a></li>
                                <li><a href="#editProfile" data-bs-toggle="tab">@Localizer["EditProfile"]</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="tab-content">
            <div class="tab-pane active show" id="profileMain">
                <div class="card">
                    <div class="card-body p-0">

                        <div class="border-top"></div>
                        <div class="table-responsive p-5">
                            <h3 class="card-title">@Localizer["PersonalInfo"]</h3>
                            <table class="table row table-borderless">
                                <tbody class="col-lg-12 col-xl-6 p-0">
                                    <tr>
                                        <td><strong>@Localizer["FullName"] :</strong> @Model.FullName</td>
                                    </tr>
                                    <tr>
                                        <td><strong>@Localizer["JobTitle"] :</strong> @Model.JobTitle</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Email :</strong> @Model.Email</td>
                                    </tr>
                                    <tr>
                                        <td><strong>@Localizer["IDCardNumber"] :</strong> @Model.CardNumber</td>
                                    </tr>
                                </tbody>
                                <tbody class="col-lg-12 col-xl-6 p-0 border-top-0">
                                    <tr>
                                        <td><strong>@Localizer["Department"] :</strong> @Model.Department</td>
                                    </tr>
                                    <tr>
                                        <td><strong>@Localizer["Role"] :</strong> @Model.RoleName</td>
                                    </tr>
                                    <tr>
                                        <td><strong>@Localizer["Supervisor"] :</strong> @Model.SupervisorName </td>
                                    </tr>
                                    <tr>
                                        <td></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="border-top"></div>
                        <div class="p-4">
                            <h3 class="card-title">@Localizer["Contact"]</h3>
                            <div class="d-sm-flex">
                                <div>
                                    <div class="main-profile-contact-list">
                                        <div class="media mx-2">
                                            <div class="media-icon bg-primary-transparent text-primary"> <i class="fe fe-phone fs-21"></i> </div>
                                            <div class="media-body ms-2">
                                                <span class="text-muted">@Localizer["Mobile"]</span>
                                                <p class="mb-0">@Model.Phone</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div>
                                    <div class="main-profile-contact-list">
                                        <div class="media mx-2">
                                            <div class="media-icon bg-success-transparent text-success"> <i class="fa fa-solid fa-envelope"></i> </div>
                                            <div class="media-body ms-2">
                                                <span class="text-muted">Email</span>
                                                <p class="mb-0">@Model.Email</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="tab-pane" id="editProfile">
                <div class="card">
                    <div class="card-body border-0">
                        <form class="form-horizontal" method="post" asp-action="SaveProfile">
                            <input asp-for="Id" hidden />
                            <input asp-for="Email" hidden />
                            <div class="row mb-4">
                                <p class="mb-4 text-17">@Localizer["PersonalInfo"]</p>
                                <div class="col-md-12 col-lg-12 col-xl-6">
                                    <div class="form-group">
                                        <label asp-for="FullName" class="form-label"></label>
                                        <input asp-for="FullName" class="form-control">
                                        <span asp-validation-for="FullName" class="text-danger"></span>
                                    </div>
                                </div>
                                <div class="col-md-12 col-lg-12 col-xl-6">
                                    <div class="form-group">
                                        <label asp-for="JobTitle" class="form-label"></label>
                                        <input asp-for="JobTitle" class="form-control">
                                        <span asp-validation-for="JobTitle" class="text-danger"></span>
                                    </div>
                                </div>
                                <div class="col-md-12 col-lg-12 col-xl-6">
                                    <div class="form-group">
                                        <label asp-for="CardNumber" class="form-label"></label>
                                        <input asp-for="CardNumber" class="form-control">
                                        <span asp-validation-for="CardNumber" class="text-danger"></span>
                                    </div>
                                </div>
                                <div class="col-md-12 col-lg-12 col-xl-6">
                                    <div class="form-group">
                                        <label asp-for="Phone" class="form-label" placeholder="(+000) 000 000000"></label>
                                        <input asp-for="Phone" class="form-control">
                                        <span asp-validation-for="Phone" class="text-danger"></span>
                                    </div>
                                </div>

                                <div class="col-md-12 col-lg-12 col-xl-6">
                                    <div class="form-group">
                                        <button id="btnSaveChanges" type="submit" class="btn btn-primary">
                                            <i class="mdi mdi-checkbox-marked-circle-outline"></i> @Localizer["SaveChanges"]
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div><!-- COL-END -->
</div>

<!--End Modals-->
@section Scripts{
    <script>
        $(document).ready(() => {
            $("#btnCancel").on("click", () => {
                $("#dvInfo").show(300);
                $("#dvProfilePictureForm").hide(300);
            });
        });

        const loadForm = () => {
            $("#dvInfo").hide(300);
            $("#dvProfilePictureForm").show(300);
        }
    </script>
}
