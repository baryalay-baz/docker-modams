@using System.Globalization
@using Microsoft.AspNetCore.Mvc.Localization
@inject IViewLocalizer Localizer

@model MODAMS.Models.ViewModels.Dto.AssetEditDTO
@{
    ViewData["TourPageKey"] = "Assets/EditAsset";
}

<style>
    input[type="date"]::-webkit-calendar-picker-indicator {
        display: none;
    }

    .vblock-disabled {
        opacity: 0.5; /* greyed out */
        pointer-events: none; /* no clicks inside (prevents editing) */
    }
</style>

<!-- PAGE-HEADER -->
<div class="page-header">
    <div>
        <h1 class="page-title">@Localizer["EditAssetDetails"]</h1>
    </div>
    <div class="ms-auto pageheader-btn">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a asp-area="Users" asp-controller="Home" asp-action="Index">@Localizer["Dashboard"]</a></li>
            <li class="breadcrumb-item"><a asp-area="Users" asp-controller="Stores" asp-action="Index">@Localizer["Stores"]</a></li>
            <li class="breadcrumb-item"><a asp-area="Users" asp-controller="Stores" asp-action="StoreDetails" asp-route-id="@Model.StoreId">@Model.StoreName</a></li>
            <li class="breadcrumb-item"><a asp-area="Users" asp-controller="Assets" asp-action="Index" asp-route-id="@Model.StoreId">@Localizer["Assets"]</a></li>
            <li class="breadcrumb-item active" aria-current="page">@Localizer["EditAsset"]</li>
        </ol>
    </div>
</div>
<!-- PAGE-HEADER END -->
<!--ROW OPENED-->
<div class="row">
    <div class="col-lg-12 col-md-12">
        <div class="card">
            <div class="card-header border-bottom bg-info-gradient divShadow d-flex justify-content-between align-items-center">
                <h4 class="mb-0 text-white">@Localizer["AssetDetails"]</h4>
                <div class="btn-group">
                    <a asp-action="EditAsset" asp-controller="Assets" asp-route-id="@Model.Id" class="btn btn-info" data-bs-toggle="tooltip" data-bs-original-title="@Localizer["EditAsset"]">
                        <i class="fa fa-edit"></i>
                    </a>
                    <a asp-action="AssetDocuments" asp-controller="Assets" asp-route-id="@Model.Id" class="btn btn-outline-warning" data-bs-toggle="tooltip" data-bs-original-title="@Localizer["AssetDocuments"]">
                        <i class="fa fa-folder"></i>
                    </a>
                    <a asp-action="AssetPictures" asp-controller="Assets" asp-route-id="@Model.Id" class="btn btn-outline-primary" data-bs-toggle="tooltip" data-bs-original-title="@Localizer["AssetPictures"]">
                        <i class="fa fa-image"></i>
                    </a>
                </div>
            </div>
            <div class="card-body p-0">
                <div class="row p-5 border-bottom">
                    <div class="col-lg-12 col-md-12">
                        <form method="post" asp-action="EditAsset" id="frmAsset">
                            <div class="card-body">
                                <div asp-validation-summary="ModelOnly" class="text-danger" role="alert"></div>
                                <input asp-for="Id" hidden />
                                <input asp-for="StoreId" hidden />
                                <input asp-for="AssetStatusId" hidden />

                                <div class="row">
                                    <div class="col-sm-4">
                                        <div class="mb-3 form-group" data-tour="ea.category">
                                            <label asp-for="CategoryId"></label>
                                            <select asp-for="CategoryId" asp-items="@Model.Categories"
                                                    class="form-control select2 form-select">
                                            </select>
                                            <span asp-validation-for="CategoryId" class="text-danger"></span>
                                        </div>
                                    </div>
                                    <div class="col-sm-4">
                                        <div class="mb-3 form-group" data-tour="ea.subcategory">
                                            <label asp-for="SubCategoryId"></label>
                                            <select asp-for="SubCategoryId" asp-items="@Model.SubCategories"
                                                    class="form-control select2 form-select">
                                            </select>
                                            <span asp-validation-for="SubCategoryId" class="text-danger"></span>
                                        </div>
                                    </div>
                                    <div class="col-sm-4">
                                        <div class="mb-3 form-group" data-tour="ea.name">
                                            <label asp-for="Name"></label>
                                            <input asp-for="Name" class="form-control" aria-required="true" />
                                            <span asp-validation-for="Name" class="text-danger"></span>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-sm-4">
                                        <div class="mb-3 form-group" data-tour="ea.make">
                                            <label asp-for="Make"></label>
                                            <input asp-for="Make" class="form-control" aria-required="true" />
                                            <span asp-validation-for="Make" class="text-danger"></span>
                                        </div>
                                    </div>
                                    <div class="col-sm-4">
                                        <div class="mb-3 form-group" data-tour="ea.model">
                                            <label asp-for="Model"></label>
                                            <input asp-for="Model" class="form-control" aria-required="true" />
                                            <span asp-validation-for="Model" class="text-danger"></span>
                                        </div>
                                    </div>
                                    <div class="col-sm-4">
                                        <div class="mb-3 form-group" data-tour="ea.year">
                                            <label asp-for="Year"></label>
                                            <input asp-for="Year" class="form-control" aria-required="true" />
                                            <span asp-validation-for="Year" class="text-danger"></span>
                                        </div>
                                    </div>
                                </div>

                                <!-- Vehicle Identification (wrap gets the tour tag) -->
                                <div class="row" id="dvVehicleIdentification" style="display:none;" data-tour="ea.vehicleinfo">
                                    <div class="col-sm-4">
                                        <div class="mb-3 form-group">
                                            <label asp-for="Engine"></label>
                                            <input asp-for="Engine" class="form-control" aria-required="true" />
                                            <span asp-validation-for="Engine" class="text-danger"></span>
                                        </div>
                                    </div>
                                    <div class="col-sm-4">
                                        <div class="mb-3 form-group">
                                            <label asp-for="Chasis"></label>
                                            <input asp-for="Chasis" class="form-control" aria-required="true" />
                                            <span asp-validation-for="Chasis" class="text-danger"></span>
                                        </div>
                                    </div>
                                    <div class="col-sm-4">
                                        <div class="mb-3 form-group">
                                            <label asp-for="Plate"></label>
                                            <input asp-for="Plate" class="form-control" aria-required="true" />
                                            <span asp-validation-for="Plate" class="text-danger"></span>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-sm-4">
                                        <div class="mb-3 form-group" data-tour="ea.country">
                                            <label asp-for="ManufacturingCountry"></label>
                                            <input asp-for="ManufacturingCountry" class="form-control" aria-required="true" />
                                            <span asp-validation-for="ManufacturingCountry" class="text-danger"></span>
                                        </div>
                                    </div>
                                    <div class="col-sm-4">
                                        <div class="mb-3 form-group" data-tour="ea.serial">
                                            <label asp-for="SerialNo"></label>
                                            <input asp-for="SerialNo" class="form-control" aria-required="true" />
                                            <span asp-validation-for="SerialNo" class="text-danger"></span>
                                        </div>
                                    </div>
                                    <div class="col-sm-4">
                                        <div class="mb-3 form-group" data-tour="ea.barcode">
                                            <label asp-for="Barcode"></label>
                                            <input asp-for="Barcode" class="form-control" aria-required="true" />
                                            <span asp-validation-for="Barcode" class="text-danger"></span>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-sm-12">
                                        <div class="mb-3 form-group" data-tour="ea.specifications">
                                            <label asp-for="Specifications"></label>
                                            <textarea asp-for="Specifications" class="form-control mb-4" rows="3"></textarea>
                                            <span asp-validation-for="Specifications" class="text-danger"></span>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-sm-4">
                                        <div class="mb-3 form-group" data-tour="ea.cost">
                                            <label asp-for="Cost"></label>
                                            <input asp-for="Cost" class="form-control" aria-required="true" />
                                            <span asp-validation-for="Cost" class="text-danger"></span>
                                        </div>
                                    </div>
                                    <div class="col-sm-4">
                                        <div class="mb-3 form-group" data-tour="ea.purchasedate">
                                            <label asp-for="PurchaseDate"></label>
                                            <input asp-for="PurchaseDate" asp-format="{0:dd-MMM-yyyy}" class="form-control picker" aria-required="true" type="text" />
                                            <span asp-validation-for="PurchaseDate" class="text-danger"></span>
                                        </div>
                                    </div>
                                    <div class="col-sm-4">
                                        <div class="mb-3 form-group" data-tour="ea.receiptdate">
                                            <label asp-for="RecieptDate"></label>
                                            <input asp-for="RecieptDate" asp-format="{0:dd-MMM-yyyy}" class="form-control picker" aria-required="true" type="text" />
                                            <span asp-validation-for="RecieptDate" class="text-danger"></span>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-sm-4">
                                        <div class="mb-3 form-group" data-tour="ea.po">
                                            <label asp-for="PONumber"></label>
                                            <input asp-for="PONumber" class="form-control" aria-required="true" />
                                            <span asp-validation-for="PONumber" class="text-danger"></span>
                                        </div>
                                    </div>
                                    <div class="col-sm-4">
                                        <div class="mb-3 form-group" data-tour="ea.procuredby">
                                            <label asp-for="ProcuredBy"></label>
                                            <select asp-for="ProcuredBy" class="form-control select2 form-select" aria-required="true">
                                                <option selected disabled>-@Localizer["SelectProcurementEntity"]-</option>
                                                <option value="UNOPS">UNOPS</option>
                                                <option value="EU">European Union</option>
                                                <option value="Somalia">Somalia</option>
                                                <option value="Other">Other</option>
                                            </select>
                                            <span asp-validation-for="ProcuredBy" class="text-danger"></span>
                                        </div>
                                    </div>
                                    <div class="col-sm-4">
                                        <div class="mb-3 form-group" data-tour="ea.donor">
                                            <label asp-for="DonorId"></label>
                                            <select asp-for="DonorId" asp-items="Model.Donors" class="form-control select2 form-select">
                                                <option disabled selected>-@Localizer["SelectDonor"]-</option>
                                            </select>
                                            <span asp-validation-for="DonorId" class="text-danger"></span>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-sm-4">
                                        <div class="mb-3 form-group" data-tour="ea.condition">
                                            <label asp-for="ConditionId"></label>
                                            <select asp-for="ConditionId" asp-items="Model.Conditions" class="form-control select2 form-select">
                                                <option disabled selected>-@Localizer["SelectCondition"]-</option>
                                            </select>
                                            <span asp-validation-for="ConditionId" class="text-danger"></span>
                                        </div>
                                    </div>
                                    <div class="col-sm-8">
                                        <div class="mb-3 form-group" data-tour="ea.remarks">
                                            <label asp-for="Remarks"></label>
                                            <input asp-for="Remarks" class="form-control" aria-required="true" />
                                            <span asp-validation-for="Remarks" class="text-danger"></span>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </form>

                    </div>
                </div>
                <div class="row p-5">
                    <div class="btn-list">
                        <button id="btnSubmit" class="btn btn-info" data-tour="ea.submit"><i class="fa fa-save"></i>&nbsp;@Localizer["SaveChanges"]</button>
                        <a data-tour="ea.cancel" asp-action="Index" asp-controller="Assets" asp-route-id="@Model.StoreId" id="btnCancel" class="btn btn-gray"><i class="fa fa-close"></i>&nbsp;@Localizer["Cancel"]</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<section id="dvCategoryData" style="display:none;">No Records Found</section>
<section id="dvSubCategoryData" style="display:none;">No Records Found</section>

<!--ROW CLOSED-->
@section scripts {
    <script src="~/assets/plugins/bootstrap-datepicker/js/datepicker.js"></script>
    <script src="~/js/tutor/tips/assets-editasset.js"></script>

    <script>
        window.AMS = window.AMS || {};
        window.AMS.pageData = {
            categories: @Html.Raw(System.Text.Json.JsonSerializer.Serialize(Model.CategoryList)),
            subCategories: @Html.Raw(System.Text.Json.JsonSerializer.Serialize(Model.SubCategoryList))
        };

        window.AMS_EDIT_ASSET = {
            engine: "@Model.Engine",
            chasis: "@Model.Chasis",
            plate: "@Model.Plate",
            categoryId: "@Model.CategoryId",
            subCategoryId: "@Model.SubCategoryId"
        };
    </script>

    <script src="~/js/pages/users/assets/assets-editasset.js"></script>
}