var telerikReportViewer=function(e){"use strict";"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var t={exports:{}};!function(e,t){!function(e){function t(e,t,i,r){return new(i||(i=Promise))((function(a,n){function o(e){try{l(r.next(e))}catch(e){n(e)}}function s(e){try{l(r.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))}class i{constructor(){this.BasePath="",this.ImmediatePrint=!1,this.ContentOnly=!1,this.UseSVG=!1,this.enableSearch=!1,this.enableAccessibility=!1,this.contentTabIndex=0}}class r{constructor(){this.from="",this.to="",this.cc="",this.subject="",this.format="",this.body=""}}class a{constructor(e,t){this.cancel=!1,this.element=e,this.action=t}}class n{constructor(e,t){this.id="",this.type="",this.id=e,this.type=t}}class o{constructor(e,t){this.isCancelled=!1,this.format="",this.deviceInfo=e,this.format=t}}class s{constructor(e,t,i){this.handled=!1,this.url=e,this.format=t,this.windowOpenTarget=i}}class l{constructor(e,t){this._responseText=e,this._error=t;try{this._responseJSON=JSON.parse(e)}catch(e){this._responseJSON=null}}get responseText(){return this._responseText}get responseJSON(){return this._responseJSON}get error(){return this._error}}function c(e,t=!1,i=!1){let r={Accept:"application/json, text/javascript, */*; q=0.01"};return t&&(r["Content-Type"]=i?"application/x-www-form-urlencoded; charset=UTF-8":"application/json; charset=UTF-8"),e&&(r.authorization="Bearer "+e),r}function h(e){return t(this,void 0,void 0,(function*(){if(!e.ok){let t=yield e.text(),i=new l(t,e.statusText);return Promise.reject(i)}return 204==e.status?Promise.resolve():(e.headers.get("content-type")||"").includes("application/json")?e.json():e.text()}))}function d(e,t={},i="",r=!1){return fetch(e,{method:"POST",headers:c(i,!0,r),body:r?t:JSON.stringify(t)}).then(h)}function u(){}function p(){p.init.call(this)}function m(e){return void 0===e._maxListeners?p.defaultMaxListeners:e._maxListeners}function g(e,t,i,r){var a,n,o,s;if("function"!=typeof i)throw new TypeError('"listener" argument must be a function');if((n=e._events)?(n.newListener&&(e.emit("newListener",t,i.listener?i.listener:i),n=e._events),o=n[t]):(n=e._events=new u,e._eventsCount=0),o){if("function"==typeof o?o=n[t]=r?[i,o]:[o,i]:r?o.unshift(i):o.push(i),!o.warned&&(a=m(e))&&a>0&&o.length>a){o.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=o.length,s=l,"function"==typeof console.warn?console.warn(s):console.log(s)}}else o=n[t]=i,++e._eventsCount;return e}function v(e,t,i){var r=!1;function a(){e.removeListener(t,a),r||(r=!0,i.apply(e,arguments))}return a.listener=i,a}function f(e){var t=this._events;if(t){var i=t[e];if("function"==typeof i)return 1;if(i)return i.length}return 0}function b(e,t){for(var i=new Array(t);t--;)i[t]=e[t];return i}u.prototype=Object.create(null),p.EventEmitter=p,p.usingDomains=!1,p.prototype.domain=void 0,p.prototype._events=void 0,p.prototype._maxListeners=void 0,p.defaultMaxListeners=10,p.init=function(){this.domain=null,p.usingDomains&&(void 0).active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new u,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},p.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},p.prototype.getMaxListeners=function(){return m(this)},p.prototype.emit=function(e){var t,i,r,a,n,o,s,l="error"===e;if(o=this._events)l=l&&null==o.error;else if(!l)return!1;if(s=this.domain,l){if(t=arguments[1],!s){if(t instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}return t||(t=new Error('Uncaught, unspecified "error" event')),t.domainEmitter=this,t.domain=s,t.domainThrown=!1,s.emit("error",t),!1}if(!(i=o[e]))return!1;var h="function"==typeof i;switch(r=arguments.length){case 1:!function(e,t,i){if(t)e.call(i);else for(var r=e.length,a=b(e,r),n=0;n<r;++n)a[n].call(i)}(i,h,this);break;case 2:!function(e,t,i,r){if(t)e.call(i,r);else for(var a=e.length,n=b(e,a),o=0;o<a;++o)n[o].call(i,r)}(i,h,this,arguments[1]);break;case 3:!function(e,t,i,r,a){if(t)e.call(i,r,a);else for(var n=e.length,o=b(e,n),s=0;s<n;++s)o[s].call(i,r,a)}(i,h,this,arguments[1],arguments[2]);break;case 4:!function(e,t,i,r,a,n){if(t)e.call(i,r,a,n);else for(var o=e.length,s=b(e,o),l=0;l<o;++l)s[l].call(i,r,a,n)}(i,h,this,arguments[1],arguments[2],arguments[3]);break;default:for(a=new Array(r-1),n=1;n<r;n++)a[n-1]=arguments[n];!function(e,t,i,r){if(t)e.apply(i,r);else for(var a=e.length,n=b(e,a),o=0;o<a;++o)n[o].apply(i,r)}(i,h,this,a)}return!0},p.prototype.addListener=function(e,t){return g(this,e,t,!1)},p.prototype.on=p.prototype.addListener,p.prototype.prependListener=function(e,t){return g(this,e,t,!0)},p.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,v(this,e,t)),this},p.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,v(this,e,t)),this},p.prototype.removeListener=function(e,t){var i,r,a,n,o;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(i=r[e]))return this;if(i===t||i.listener&&i.listener===t)0==--this._eventsCount?this._events=new u:(delete r[e],r.removeListener&&this.emit("removeListener",e,i.listener||t));else if("function"!=typeof i){for(a=-1,n=i.length;n-- >0;)if(i[n]===t||i[n].listener&&i[n].listener===t){o=i[n].listener,a=n;break}if(a<0)return this;if(1===i.length){if(i[0]=void 0,0==--this._eventsCount)return this._events=new u,this;delete r[e]}else!function(e,t){for(var i=t,r=i+1,a=e.length;r<a;i+=1,r+=1)e[i]=e[r];e.pop()}(i,a);r.removeListener&&this.emit("removeListener",e,o||t)}return this},p.prototype.off=function(e,t){return this.removeListener(e,t)},p.prototype.removeAllListeners=function(e){var t,i;if(!(i=this._events))return this;if(!i.removeListener)return 0===arguments.length?(this._events=new u,this._eventsCount=0):i[e]&&(0==--this._eventsCount?this._events=new u:delete i[e]),this;if(0===arguments.length){for(var r,a=Object.keys(i),n=0;n<a.length;++n)"removeListener"!==(r=a[n])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=new u,this._eventsCount=0,this}if("function"==typeof(t=i[e]))this.removeListener(e,t);else if(t)do{this.removeListener(e,t[t.length-1])}while(t[0]);return this},p.prototype.listeners=function(e){var t,i=this._events;return i&&(t=i[e])?"function"==typeof t?[t.listener||t]:function(e){for(var t=new Array(e.length),i=0;i<t.length;++i)t[i]=e[i].listener||e[i];return t}(t):[]},p.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):f.call(e,t)},p.prototype.listenerCount=f,p.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};const P="function"==typeof Symbol?Symbol.for("--[[await-event-emitter]]--"):"--[[await-event-emitter]]--";function E(e){if("string"!=typeof e&&"symbol"!=typeof e)throw new TypeError("type is not type of string or symbol!")}function S(e){if("function"!=typeof e)throw new TypeError("fn is not type of Function!")}function w(e){return{[P]:"always",fn:e}}function C(e){return{[P]:"once",fn:e}}class y{constructor(){this._events={}}addListener(e,t){return this.on(e,t)}on(e,t){return E(e),S(t),this._events[e]=this._events[e]||[],this._events[e].push(w(t)),this}prependListener(e,t){return this.prepend(e,t)}prepend(e,t){return E(e),S(t),this._events[e]=this._events[e]||[],this._events[e].unshift(w(t)),this}prependOnceListener(e,t){return this.prependOnce(e,t)}prependOnce(e,t){return E(e),S(t),this._events[e]=this._events[e]||[],this._events[e].unshift(C(t)),this}listeners(e){return(this._events[e]||[]).map((e=>e.fn))}once(e,t){return E(e),S(t),this._events[e]=this._events[e]||[],this._events[e].push(C(t)),this}removeAllListeners(){this._events={}}off(e,t){return this.removeListener(e,t)}removeListener(e,t){E(e);const i=this.listeners(e);if("function"==typeof t){let r=-1,a=!1;for(;(r=i.indexOf(t))>=0;)i.splice(r,1),this._events[e].splice(r,1),a=!0;return a}return delete this._events[e]}emit(e,...i){return t(this,void 0,void 0,(function*(){E(e);const t=this.listeners(e),r=[];if(t&&t.length){for(let a=0;a<t.length;a++){const n=t[a],o=n.apply(this,i);o instanceof Promise&&(yield o),this._events[e]&&this._events[e][a]&&"once"===this._events[e][a][P]&&r.push(n)}return r.forEach((t=>this.removeListener(e,t))),!0}return!1}))}emitSync(e,...t){E(e);const i=this.listeners(e),r=[];if(i&&i.length){for(let a=0;a<i.length;a++){const n=i[a];n.apply(this,t),this._events[e]&&this._events[e][a]&&"once"===this._events[e][a][P]&&r.push(n)}return r.forEach((t=>this.removeListener(e,t))),!0}return!1}}class A{constructor(){this.eventEmitter=new p,this.awaitEventEmitter=new y}on(e,t){return this.eventEmitter.on(e,t),this}emit(e,...t){this.eventEmitter.emit(e,...t)}onAsync(e,t){return this.awaitEventEmitter.on(e,t),this}emitAsync(e,...i){return t(this,void 0,void 0,(function*(){yield this.awaitEventEmitter.emit(e,...i)}))}}class I{hasPdfPlugin(){let e=["AcroPDF.PDF.1","PDF.PdfCtrl.6","PDF.PdfCtrl.5"];for(let t of e)try{let e=new ActiveXObject(t);if(e)return null!==e}catch(e){}return!1}}class T{hasPdfPlugin(){let e=/Firefox[/\s](\d+\.\d+)/.exec(navigator.userAgent);if(null!==e&&e.length>1&&parseFloat(e[1])>=19)return!1;let t=navigator.mimeTypes["application/pdf"],i=null!==t?t.enabledPlugin:null;if(i){let e=i.description;return-1!==e.indexOf("Adobe")&&(-1===e.indexOf("Version")||parseFloat(e.split("Version")[1])>=6)}return!1}}class R{constructor(e){this.defaultPlugin=e}hasPdfPlugin(){for(let e of navigator.plugins)if(e.name===this.defaultPlugin||"Adobe Acrobat"===e.name)return!0;return!1}}class M{hasPdfPlugin(){return!1}}function _(){return window.navigator&&window.navigator.msSaveOrOpenBlob}class D{constructor(){this.hasPdfPlugin=!1,this.iframe=null,this.hasPdfPlugin=function(){if(window.navigator){let e=window.navigator.userAgent.toLowerCase();return e.indexOf("msie")>-1||e.indexOf("mozilla")>-1&&e.indexOf("trident")>-1?new I:e.indexOf("firefox")>-1?new T:e.indexOf("edg/")>-1?new R("Microsoft Edge PDF Plugin"):e.indexOf("chrome")>-1?new R("Chrome PDF Viewer"):e.indexOf("safari")>-1?new R("WebKit built-in PDF"):new M}return new M}().hasPdfPlugin(),this.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}destroy(){this.iframe=null}printDesktop(e){let t=null;if(this.iframe||(this.iframe=document.createElement("iframe"),this.iframe.style.display="none",this.iframe.onload=()=>{var e,i;try{null===(i=null===(e=this.iframe)||void 0===e?void 0:e.contentDocument)||void 0===i||i.execCommand("print",!0)}finally{t&&(window.URL||window.webkitURL).revokeObjectURL(t)}}),function(e){let t=window.location,i=document.createElement("a");return i.setAttribute("href",e),""==i.host&&(i.href=i.href),t.hostname===i.hostname&&t.protocol===i.protocol&&t.port===i.port}(e)&&_())return this.iframe.src=e,void document.body.appendChild(this.iframe);let i=new XMLHttpRequest,r=this;i.open("GET",e,!0),i.responseType="arraybuffer",i.onload=function(){if(200===this.status){let e=new Blob([this.response],{type:"application/pdf"});_()?window.navigator.msSaveOrOpenBlob(e):(t=(window.URL||window.webkitURL).createObjectURL(e),null!=r.iframe&&(r.iframe.src=t,document.body.appendChild(r.iframe)))}else console.log("Could not retrieve remote PDF document.")},i.send()}printMobile(e){window.open(e,"_self")}print(e){this.isMobile?this.printMobile(e):this.printDesktop(e)}getDirectPrintState(){return this.hasPdfPlugin}}function L(e){return 1e3*e}class k{constructor(e,t,i){if(this.pingMilliseconds=0,!e)throw"Error";this.serviceClient=e,this.clientID=t,this.initSessionTimeout(i)}initSessionTimeout(e){if(!isFinite(e))throw"sessionTimeoutSeconds must be finite";this.pingMilliseconds=e<=120?L(e)/2:L(e-60)}start(){this.pingMilliseconds<=0||(this.interval=setInterval((()=>{this.serviceClient.keepClientAlive(this.clientID)}),this.pingMilliseconds))}stop(){this.interval&&(clearInterval(this.interval),this.interval=null)}}var V,N,x,O,$;function F(e,t="",i=""){let r=document.createElement(e);return t&&(r.id=t),B(r,i),r}function B(e,t){if(""===t||!e)return;let i=t.trim().split(" ");i=i.filter((e=>""!==e.trim())),e.classList.add(...i)}function U(e,t){if(""===t||!e)return;let i=t.trim().split(" ");i=i.filter((e=>""!==e.trim())),e.classList.remove(...i)}function z(e,t){return e.classList.contains(t)}function G(e){return e.offsetParent}function H(e){return parseInt(e,10)||0}function W(e,t,i,r=0,a=0){let n=`${r=r||0} ${a=a||0}`;var o,s;s=`scale(${t=t||1}, ${i=i||1})`,(o=e).style.setProperty("transform",s),o.style.setProperty("-moz-transform",s),o.style.setProperty("-ms-transform",s),o.style.setProperty("-webkit-transform",s),o.style.setProperty("-o-transform",s),function(e,t){e.style.setProperty("transform-origin",t),e.style.setProperty("-moz-transform-origin",t),e.style.setProperty("-ms-transform-origin",t),e.style.setProperty("-webkit-transform-origin",t),e.style.setProperty("-o-transform-origin",t)}(e,n)}function q(e){let t=F("div");return t.textContent=e,t.innerHTML}function j(e){if(e&&e.length<6){let t=1,i=e.split("");for("#"!==i[0]&&(t=0);t<i.length;t++)i[t]=i[t]+i[t];e=i.join("")}let t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?parseInt(t[1],16)+", "+parseInt(t[2],16)+", "+parseInt(t[3],16):null}function K(e){return!!e&&e.indexOf(",")>-1}function J(e){if("transparent"===e.toLowerCase())return 0;if(!K(e))return 1;if(-1!==e.indexOf("#")){let t=j(e);if(null===t)return 1;e=t}let t=e.split(",").map((function(e){return e.trim()}));return 4===t.length?parseFloat((parseFloat(t[3].replace(/[()]/g,""))/255).toFixed(2)):1}function X(e,t){let i=F("div");for(i.innerHTML=t;i.childNodes.length;)e.appendChild(i.childNodes[0])}function Y(e,t){let i=F("div");for(i.innerHTML=t;i.childNodes.length;)e.prepend(i.childNodes[i.childNodes.length-1])}function Z(e,t){return null===e?null:e.querySelector(t)}function Q(e,t){var i;return e&&e.attributes&&(null===(i=e.attributes[t])||void 0===i?void 0:i.value)||""}function ee(e){let t=e.parentElement;return t?t.clientHeight!=t.scrollHeight?t:ee(t):null}function te(e,t=300){let i;return function(...r){clearTimeout(i),i=setTimeout((()=>e.apply(this,r)),t)}}function ie(e,t){let i=null;return function(r,...a){i||(i=setTimeout((function(){e.apply(r,a),i=null}),t))}}function re(e,t){return!!e.responseJSON&&e.responseJSON.exceptionType===t}function ae(e){return re(e,"Telerik.Reporting.Services.Engine.InvalidClientException")}function ne(e){return re(e,"Telerik.Reporting.Services.Engine.InvalidParameterException")}function oe(e){return!!e&&"internalservererror"===e.split(" ").join("").toLowerCase()}function se(e,...t){return e.replace(/{(\d+)}/g,((e,i)=>t[i]||""))}function le(e,t){let i,r;if(ce(e))for(i=e.length,r=0;r<i&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e}function ce(e){return!!Array.isArray(e)||"number"==typeof(!!e&&"length"in e&&e.length)}function he(e){return/^(\-|\+)?([0-9]+)$/.test(e)?Number(e):NaN}function de(e){return/^(\-|\+)?([0-9]+(\.[0-9]+)?)$/.test(e)?Number(e):NaN}function ue(e){return e instanceof Date?e:(/Z|[\+\-]\d\d:?\d\d/i.test(e)||(e+="Z"),new Date(e))}e.PageMode=void 0,(V=e.PageMode||(e.PageMode={}))[V.ContinuousScroll=0]="ContinuousScroll",V[V.SinglePage=1]="SinglePage",e.PrintMode=void 0,(N=e.PrintMode||(e.PrintMode={}))[N.AutoSelect=0]="AutoSelect",N[N.ForcePDFPlugin=1]="ForcePDFPlugin",N[N.ForcePDFFile=2]="ForcePDFFile",e.ScaleMode=void 0,(x=e.ScaleMode||(e.ScaleMode={}))[x.FitPageWidth=0]="FitPageWidth",x[x.FitPage=1]="FitPage",x[x.Specific=2]="Specific",e.ServiceType=void 0,(O=e.ServiceType||(e.ServiceType={}))[O.REST=0]="REST",O[O.ReportServer=1]="ReportServer",e.ViewMode=void 0,($=e.ViewMode||(e.ViewMode={}))[$.Interactive=0]="Interactive",$[$.PrintPreview=1]="PrintPreview";class pe{constructor(e){this.handled=!1,this.deviceInfo=e}}class me{constructor(e){this.handled=!1,this.url=e}}class ge{constructor(e,t){this.handled=!1,this.deviceInfo=e,this.format=t}}class ve{constructor(e,t){this.handled=!1,this.deviceInfo=e,this.format=t}}class fe extends r{constructor(e,t,i){super(),this.handled=!1,this.body=e.body,this.cc=e.cc,this.format=e.format,this.from=e.from,this.subject=e.subject,this.to=e.to,this.deviceInfo=t,this.url=i}}const be="System.Int64",Pe="System.Double",Ee="System.String",Se="System.DateTime",we="System.Boolean";var Ce=function(){var e={};function t(e,t,i,r){var a=[].concat(t).map((function(t){return function(e,t,i){if(e.availableValues){var r=!1;if(le(e.availableValues,(function(e,a){return!(r=i(t,a.value))})),!r){if(e.allowNull&&!t)return t;throw"Please input a valid value."}}return t}(e,i(t),r)}));if(e.multivalue){if(null==t||0==t.length){if(e.allowNull)return t;throw"Please input a valid value."}return a}return a[0]}function i(e,t){return e.allowNull&&-1!=[null,"",void 0].indexOf(t)}return e[Ee]={validate:function(e,i){return t(e,i,(function(t){if(!t){if(e.allowNull)return null;if(e.allowBlank)return"";throw"Parameter value cannot be empty."}return t}),(function(e,t){return e==t}))}},e[Pe]={validate:function(e,r){return t(e,r,(function(t){var r=de(t);if(isNaN(r)){if(i(e,t))return null;throw"Parameter value cannot be empty."}return r}),(function(e,t){return de(e)==de(t)}))}},e[be]={validate:function(e,r){return t(e,r,(function(t){var r=he(t);if(isNaN(r)){if(i(e,t))return null;throw"Parameter value cannot be empty."}return r}),(function(e,t){return he(e)==de(t)}))}},e[Se]={validate:function(e,i){return t(e,i,(function(t){if(e.allowNull&&(null===t||""===t||void 0===t))return null;if(!isNaN(Date.parse(t)))return e.availableValues?t:ue(t);throw"Please input a valid date."}),(function(e,t){return e=ue(e),t=ue(t),e.getTime()==t.getTime()}))}},e[we]={validate:function(e,r){return t(e,r,(function(t){if(-1!=["true","false"].indexOf(String(t).toLowerCase()))return Boolean(t);if(i(e,t))return null;throw"Parameter value cannot be empty."}),(function(e,t){return Boolean(e)==Boolean(t)}))}},{validate:function(t,i){var r=e[t.type];if(!r)throw se("Cannot validate parameter of type {type}.",t);return r.validate(t,i)}}}();function ye(e,t,i){try{const r=e.availableValues.find((e=>e.value===t));if(!r)throw new Error(`The available values of parameter ${i} do not contain Value property that equals ${t}`);return{valueMember:t,displayMember:r.name}}catch(e){return}}function Ae(e,t,i){const r=[];for(let a in t)r.push(ye(e,t[a],i));return r}class Ie{constructor(e="",t={}){this.report=e,this.parameters=t}}class Te{constructor(e,t,i,r=null){this.element=e,this.text=t,this.title=i,this.eventArgs=r}}class Re extends A{constructor(e){super(),this.resizeObserver=null,this.element=e,this.initResizeObserver()}destroy(){this.destroyResizeObserver()}initResizeObserver(){this.debounceResize=te(this.onResize.bind(this),50),this.resizeObserver=new ResizeObserver(this.debounceResize),this.resizeObserver.observe(this.element)}destroyResizeObserver(){this.resizeObserver&&this.resizeObserver.unobserve(this.element),this.resizeObserver=this.debounceResize=null}onResize(e){e[0].target===this.element&&this.emit("resize")}}const Me='<div class="trv-report-page trv-skeleton-page trv-skeleton-{0}" style="{1}" data-page="{0}"><div class="trv-skeleton-wrapper" style="{2}"></div></div>';class _e{constructor(t,i,r){this.enabled=!1,this.viewMode=e.ViewMode.Interactive,this.scrollInProgress=!1,this.additionalTopOffset=130,this.onClickHandler=null,this.debounceScroll=null,this.throttleScroll=null,this.oldScrollTopPosition=0,this.lastLoadedPage=null,this.placeholder=t,this.pageContainer=t.querySelector(".trv-page-container"),this.pageWrapper=t.querySelector(".trv-page-wrapper"),this.contentArea=i,this.controller=r,this.controller.getPageMode()===e.PageMode.ContinuousScroll&&this.enable(),this.controller.on("loadedReportChange",this.disable.bind(this)).on("viewModeChanged",this.disable.bind(this)).on("scaleChanged",this.onScaleChanged.bind(this)).on("interactiveActionExecuting",this.onInteractiveActionExecuting.bind(this))}onScaleChanged(){this.enabled&&setTimeout((()=>{this.loadMorePages(),this.keepCurrentPageInToView()}),100)}onInteractiveActionExecuting(e){const t=e.action.Type;!this.enabled||"sorting"!==t&&"toggleVisibility"!==t||this.disable()}getEnabled(){return this.enabled}enable(){this.enabled=!0,B(this.placeholder,"scrollable"),this.initEvents()}disable(){this.enabled&&(this.lastLoadedPage=null,this.pageWrapper.innerHTML="",this.enabled=!1,U(this.placeholder,"scrollable"),this.unbind())}renderPage(e){let t=this.controller.getViewMode(),i=this.findPageElement(e.pageNumber);this.enabled?(t===this.viewMode&&i?this.navigateToPage(e,i):this.updatePageArea(e),this.viewMode=this.controller.getViewMode()):(this.enable(),t===this.viewMode&&i?(this.render(e,!0),this.pageContainer.scrollTop=3,this.setCurrentPage(e.pageNumber)):this.updatePageArea(e),this.viewMode=this.controller.getViewMode(),this.loadMorePages())}navigateToElement(e,t){this.scrollInProgress=!0,this.isSkeletonScreen(null,t)?this.getAndRenderPage(t).then((()=>{this.scrollToPage(e,t)})):this.scrollToPage(e,t)}updatePageDimensionsReady(){this.enabled&&this.currentPageNumber()>0&&this.keepCurrentPageInToView()}setCurrentPage(e){e!==this.currentPageNumber()&&this.controller.setCurrentPageNumber(e),this.controller.getPageCount()>1&&(U(this.findElement(".k-state-default"),"k-state-default"),B(this.findPageElement(e),"k-state-default")),this.loadNextPreviousPage(e)}updatePageArea(e){let t=0,i=e.pageNumber;this.scrollInProgress=!0,i>1&&this.generateSkeletonScreens(i),this.render(e,!1),this.setCurrentPage(e.pageNumber),setTimeout((()=>{var e;t=i>1&&(null===(e=this.findPageElement(i))||void 0===e?void 0:e.offsetTop)||0,this.animateScroll(t,0,(()=>{this.scrollInProgress=!1}))}),100)}navigateToPage(e,t){this.scrollInProgress=!0;let i=t.offsetTop,r=e.pageNumber;this.isSkeletonScreen(t,r)?this.getAndRenderPage(r).then((()=>{this.scrollToPage(i,r)})):(this.updatePageContent(e,t),this.scrollToPage(i,r))}updatePageContent(e,t){this.contentArea.updatePageStyle(e);let i=this.contentArea.renderPageElement(e);t.after(i),t.remove(),this.contentArea.setScrollablePage(i,e),this.controller.scrollPageReady()}currentPageNumber(){return this.controller.getCurrentPageNumber()}isSkeletonScreen(e,t){return!(!e&&!(e=this.findPageElement(t)))&&z(e,"trv-skeleton-"+t)}addSkeletonScreen(e,t){let i=e+(t?1:-1),r=this.findPageElement(i),a=Q(r,"style"),n=Q(null==r?void 0:r.querySelector("sheet"),"style"),o=se(Me,e,a,n);t?Y(this.pageWrapper,o):X(this.pageWrapper,o)}generateSkeletonScreens(e){var t;let i="",r=this.findPageElement(1),a=Q(r,"style"),n=Q(null==r?void 0:r.querySelector("sheet"),"style"),o=null===(t=this.findLastElement(".trv-report-page"))||void 0===t?void 0:t.dataset.page,s=o?parseInt(o)+1:1;for(;s<e;s++)i+=se(Me,s,a,n);X(this.pageWrapper,i)}loadMorePages(){var e;let t=this.controller.getPageCount(),i=this.pageContainer.offsetHeight>this.pageWrapper.offsetHeight;if(t>1)if(i){this.scrollInProgress=!0;let i=null===(e=this.findLastElement(".trv-report-page"))||void 0===e?void 0:e.dataset.page,r=i?parseInt(i)+1:1;r<=t&&this.getAndRenderPage(r).then((()=>{this.loadMorePages(),this.scrollInProgress=!1}))}else this.loadVisiblePages(),this.scrollInProgress=!1}loadVisiblePages(){this.placeholder.querySelectorAll(".trv-report-page").forEach((e=>{let t=e,i=parseInt(t.dataset.page||"");this.scrolledInToView(t)&&this.isSkeletonScreen(t,i)&&this.getAndRenderPage(i)}))}scrolledInToView(e){if(!e)return!1;let t=e.getBoundingClientRect(),i=e.closest(".trv-pages-pane");if(!i)return!1;let r=i.getBoundingClientRect(),a=r.top,n=r.bottom,o=t.top,s=t.bottom,l=this.additionalTopOffset+a;return o>0&&o<n||s<n&&s>l}render(e,t){let i=e.pageNumber,r=this.findPageElement(i);if(!t&&r&&!this.isSkeletonScreen(r,i))return;(null==this.lastLoadedPage||this.lastLoadedPage.pageNumber<e.pageNumber)&&(this.lastLoadedPage=e),this.contentArea.updatePageStyle(this.lastLoadedPage);let a=this.contentArea.renderPageElement(e);t&&(this.pageWrapper.innerHTML=""),this.pageWrapper.dataset.pageNumber=i.toString();let n=this.findElement(".trv-skeleton-"+i);n?(n.after(a),n.remove()):this.pageWrapper.append(a),this.contentArea.setScrollablePage(a,e),this.controller.scrollPageReady()}loadNextPreviousPage(e){if(e<this.controller.getPageCount()){let t=e+1,i=this.findPageElement(t);i&&this.isSkeletonScreen(i,t)&&this.getAndRenderPage(t)}if(e>1){let t=e-1,i=this.findPageElement(t);i&&this.isSkeletonScreen(i,t)}}initEvents(){this.onClickHandler=this.clickPage.bind(this),this.debounceScroll=te((()=>{let e=this.placeholder.querySelectorAll(".trv-report-page"),t=Math.round(this.pageContainer.scrollTop+this.pageContainer.offsetHeight);!this.scrollInProgress&&e.length&&this.oldScrollTopPosition!==t&&this.advanceCurrentPage(Array.from(e))}),250),this.throttleScroll=ie((()=>{let e=this.placeholder.querySelectorAll(".trv-report-page"),t=Math.round(this.pageContainer.scrollTop+this.pageContainer.offsetHeight);this.scrollInProgress||this.oldScrollTopPosition===t||(this.oldScrollTopPosition>t?this.scrollUp(Array.from(e)):this.scrollDown(Array.from(e),t)),this.oldScrollTopPosition=t}),250),this.pageContainer.addEventListener("click",this.onClickHandler),this.pageContainer.addEventListener("scroll",this.debounceScroll),this.pageContainer.addEventListener("scroll",this.throttleScroll)}unbind(){this.pageContainer.removeEventListener("click",this.onClickHandler),this.pageContainer.removeEventListener("scroll",this.debounceScroll),this.pageContainer.removeEventListener("scroll",this.throttleScroll)}clickPage(e){var t;let i=null===(t=e.target)||void 0===t?void 0:t.closest(".trv-report-page");if(!i)return;let r=this.currentPageNumber(),a=parseInt(i.dataset.page||"");r!==a&&(this.isSkeletonScreen(i,a)?this.getAndRenderPage(a).then((e=>{this.setCurrentPage(e.pageNumber)})):this.setCurrentPage(a))}advanceCurrentPage(e){let t=this.findNewCurrentPage(e);if(t){let e=parseInt(t.dataset.page||"-1"),i=this.currentPageNumber(),r=this.scrolledInToView(this.findPageElement(i));i===e||r||(this.isSkeletonScreen(t,e)?this.getAndRenderPage(e).then((e=>{this.setCurrentPage(e.pageNumber)})):this.setCurrentPage(e))}else console.log("Page not found - ",t)}findNewCurrentPage(e){let t=Math.floor(e.length/2),i=this.findPageInViewPort(t,e);return 1===e.length?e[0]:0===i?e[t]:i<0&&e.length>1?this.findNewCurrentPage(e.splice(t,Number.MAX_VALUE)):i>0&&e.length>1?this.findNewCurrentPage(e.splice(0,t)):null}findPageInViewPort(e,t){let i=t[e],r=i.getBoundingClientRect(),a=i.closest(".trv-pages-pane");if(!a)return-1;let n=a.getBoundingClientRect().top,o=r.top,s=r.bottom,l=this.additionalTopOffset+n;return o<=l&&l<s?0:s<l?-1:1}scrollDown(e,t){if(t>=this.pageContainer.scrollHeight){let t=parseInt(e[e.length-1].dataset.page||"")+1;this.currentPageNumber()<t&&t<=this.controller.getPageCount()&&(this.addSkeletonScreen(t,!1),this.getAndRenderPage(t))}else this.advanceCurrentPage(e),this.loadVisiblePages()}scrollUp(e){if(0===this.pageContainer.scrollTop){let t=parseInt(e[0].dataset.page||"")-1;this.currentPageNumber()>t&&t>=1&&(this.addSkeletonScreen(t,!0),this.getAndRenderPage(t).then((()=>{this.pageContainer.scrollTop=3})))}else this.advanceCurrentPage(e),this.loadVisiblePages()}keepCurrentPageInToView(){let e=this.findPageElement(this.currentPageNumber());if(!e)return;let t=e.offsetTop,i=e.offsetHeight,r=this.pageContainer.offsetHeight;this.scrollInProgress=!0,i<r&&(t-=(r-i)/2),this.animateScroll(t,0,(()=>{setTimeout((()=>{this.scrollInProgress=!1}),100)}))}getAndRenderPage(e){return this.controller.getPageData(e).then((e=>(this.render(e,!1),e)))}scrollToPage(e,t){this.animateScroll(e,500,(()=>{this.setCurrentPage(t),setTimeout((()=>{this.scrollInProgress=!1}))}))}animateScroll(e,t,i){this.pageContainer.scrollTop=e,i.call(this)}findPageElement(e){return this.findElement('[data-page="'+e+'"]')}findElement(e){var t;return null===(t=this.placeholder)||void 0===t?void 0:t.querySelector(e)}findLastElement(e){var t;let i=null===(t=this.placeholder)||void 0===t?void 0:t.querySelectorAll(e);return i&&i.length?i[i.length-1]:null}}class De{constructor(){this.scaleFactor=0,this.placeholder=null,this.scrollableContainer=null,this.itemsInitialState={},this.xFrozenAreasBounds={},this.yFrozenAreasBounds={},this.freezeMaxZIndex={},this.freezeBGColor={},this.currentlyFrozenContainer={vertical:{},horizontal:{}},this.zIndex=1}init(e){this.reset(e),this.attachToScrollEvent()}reset(e){this.placeholder=e,this.scrollableContainer=Z(e,".trv-page-container"),this.itemsInitialState={},this.xFrozenAreasBounds={},this.yFrozenAreasBounds={},this.currentlyFrozenContainer={vertical:{},horizontal:{}}}setScaleFactor(e){this.scaleFactor=e}attachToScrollEvent(){var e;null===(e=this.scrollableContainer)||void 0===e||e.addEventListener("scroll",(()=>{if(this.scrollableContainer){let e=this.scrollableContainer.querySelectorAll("div[data-sticky-id]");if(e.length){const t=new Set(Array.from(e).map((e=>e.dataset.stickyId||"")));let i=this.scrollableContainer.scrollTop,r=this.scrollableContainer.scrollLeft;t.forEach((e=>{this.itemsInitialState[e]||this.saveFreezeItemsInitialState(e),this.updateFreezeItemsOnScroll(e,i,r)}))}}}))}saveFreezeItemsInitialState(e){var t,i,r;let a=null===(t=this.placeholder)||void 0===t?void 0:t.querySelectorAll("[data-sticky-direction][data-sticky-id='"+e+"']"),n=null===(i=this.placeholder)||void 0===i?void 0:i.querySelectorAll("[data-reporting-action][data-sticky-id='"+e+"']"),o=null,s=null,l=null,c=null;this.itemsInitialState[e]={},this.freezeBGColor[e]=(null===(r=Z(this.placeholder,"[data-id='"+e+"']"))||void 0===r?void 0:r.dataset.stickyBgColor)||"",a.forEach((t=>{var i;let r=t.dataset.stickyDirection,a=(null===(i=t.dataset.id)||void 0===i?void 0:i.toString())||"",n=t.offsetLeft/this.scaleFactor,h=t.offsetLeft+t.offsetWidth*this.scaleFactor,d=t.offsetTop/this.scaleFactor,u=t.offsetTop+t.offsetHeight*this.scaleFactor,p=(e,t)=>null===e||t<e?t:e,m=(e,t)=>null===e||t>e?t:e;switch(r){case"Vertical":s=p(s,d),c=m(c,u);break;case"Horizontal":o=p(o,n),l=m(l,h)}this._saveFreezeItemInitialState(e,t,a)})),this.freezeMaxZIndex[e]=(null==n?void 0:n.length)?parseInt(getComputedStyle(n[0]).zIndex):this.zIndex,this.yFrozenAreasBounds[e]=(c||0)-(s||0),this.xFrozenAreasBounds[e]=(l||0)-(o||0)}_saveFreezeItemInitialState(e,t,i){const r=getComputedStyle(t);let a=this.hasSetBgColor(r.backgroundColor),n=r.zIndex;"auto"!==n&&(n=parseFloat(n));let o={top:t.offsetTop,left:t.offsetLeft,zIndex:n,hasBgColor:a};this.itemsInitialState[e][i]=o}updateFreezeItemsOnScroll(e,t,i){var r,a;let n=Z(this.placeholder,"div[data-id='"+e+"']");if(!n)return;let o=null===(r=this.placeholder)||void 0===r?void 0:r.querySelectorAll("[data-sticky-direction*='Horizontal'][data-sticky-id='"+e+"']"),s=null===(a=this.placeholder)||void 0===a?void 0:a.querySelectorAll("[data-sticky-direction*='Vertical'][data-sticky-id='"+e+"']");if(this.isInScrollVisibleArea(n)){let r=n.closest(".trv-report-page"),a=getComputedStyle(r),l=parseFloat(a.marginLeft),c=parseFloat(a.paddingTop),h=parseFloat(a.paddingLeft),d=parseFloat(a.borderTopWidth),u=parseFloat(a.borderLeftWidth),p=o.length>0,m=s.length>0,g=n.offsetTop+((null==r?void 0:r.offsetTop)||0)+l+c+d,v=n.offsetLeft+((null==r?void 0:r.offsetLeft)||0)+h+u,f=t-g,b=i-v;m&&f>0?t<=n.offsetHeight*this.scaleFactor+g-this.yFrozenAreasBounds[e]&&(this.currentlyFrozenContainer.vertical[e]=!0,this.updateUIElementsPosition(s,"top",f/this.scaleFactor,e)):this.currentlyFrozenContainer.vertical[e]&&(delete this.currentlyFrozenContainer.vertical[e],this.updateUIElementsPosition(s,"top",-1,e)),p&&b>0?i<=n.offsetWidth*this.scaleFactor+v-this.xFrozenAreasBounds[e]&&(this.currentlyFrozenContainer.horizontal[e]=!0,this.updateUIElementsPosition(o,"left",b/this.scaleFactor,e)):this.currentlyFrozenContainer.horizontal[e]&&(delete this.currentlyFrozenContainer.horizontal[e],this.updateUIElementsPosition(o,"left",-1,e))}else(this.currentlyFrozenContainer.horizontal[e]||this.currentlyFrozenContainer.vertical[e])&&this.resetToDefaultPosition(e,o,s)}resetToDefaultPosition(e,t,i){this.updateUIElementsPosition(i,"top",-1,e),this.updateUIElementsPosition(t,"left",-1,e),delete this.currentlyFrozenContainer.horizontal[e],delete this.currentlyFrozenContainer.vertical[e]}updateUIElementsPosition(e,t,i,r){e.forEach((e=>{let a=(e.dataset.stickyDirection||"").indexOf(",")>0,n=e.dataset.id||"",o=this.itemsInitialState[r][n],s="top"==t?o.top:o.left,l=o.zIndex,c=o.hasBgColor,h=1,d=this.freezeMaxZIndex[r]?this.freezeMaxZIndex[r]:h;h=a?"auto"!==l?l:d+2:"auto"!==l?l+1:d;let u={zIndex:h};i>=0?s+=i:u.zIndex=l,c||this.applyBgColorOnScroll(e,a,c,i>=0,r),u[t]=s+"px",Object.assign(e.style,u)}))}applyBgColorOnScroll(e,t,i,r,a){"IMG"!==e.tagName&&(t&&this.isFrozen(a)&&!i?e.style.backgroundColor=this.freezeBGColor[a]:e.style.backgroundColor=r?this.freezeBGColor[a]:"initial")}hasSetBgColor(e){return J(e)>0}isFrozen(e){return this.currentlyFrozenContainer.horizontal[e]||this.currentlyFrozenContainer.vertical[e]}isInScrollVisibleArea(e){if(!this.scrollableContainer)return!1;const t=e.getBoundingClientRect(),i=this.scrollableContainer.getBoundingClientRect();return this.isVisibleVertically(t,this.scrollableContainer,i)&&this.isVisibleHorizontally(t,this.scrollableContainer,i)}isVisibleVertically(e,t,i){let r=e.width;return e.left>t.scrollLeft-r&&e.left<t.scrollLeft+r+i.width}isVisibleHorizontally(e,t,i){let r=e.height;return e.top>t.scrollTop-r&&e.top<t.scrollTop+r+i.height}}const Le=/{(\w+?)}/g,ke="trv-initial-image-styles";function Ve(e,t){let i=Array.isArray(t);return e?e.replace(Le,(function(e,r){return t[i?parseInt(r):r]})):""}const Ne="trv-search-dialog-shaded-result",xe="trv-search-dialog-highlighted-result";e.BookmarkNode=class{constructor(){this.id="",this.text="",this.page=0,this.items=null}},e.ContentArea=class{constructor(e,t,i,r={}){this.actions=[],this.pendingElement=null,this.documentReady=!0,this.reportPageIsLoaded=!1,this.navigateToPageOnDocReady=0,this.navigateToElementOnDocReady=null,this.onClickHandler=null,this.onMouseEnterHandler=null,this.onMouseLeaveHandler=null,this.isNewReportSource=!1,this.uiFreezeCoordinator=null,this.initialPageAreaImageUrl="",this.showPageAreaImage=!1,this.placeholder=e.querySelector(".trv-pages-pane, .trv-pages-area"),this.pageContainer=e.querySelector(".trv-page-container"),this.pageWrapper=e.querySelector(".trv-page-wrapper"),this.parametersContainer=e.querySelector(".trv-parameters-area"),this.notification=e.querySelector(".trv-notification, .trv-error-pane"),this.scrollManager=new _e(this.placeholder,this,t),this.resizeService=new Re(this.pageContainer),this.resizeService.on("resize",this.onResize.bind(this)),this.controller=t,this.controller.on("pageReady",this.onPageReady.bind(this)).on("navigateToPage",this.navigateToPage.bind(this)).on("serverActionStarted",this.onServerActionStarted.bind(this)).on("reportSourceChanged",this.onReportSourceChanged.bind(this)).on("scaleChanged",this.updatePageDimensions.bind(this)).on("scaleModeChanged",this.updatePageDimensions.bind(this)).on("printStarted",this.onPrintStarted.bind(this)).on("printDocumentReady",this.onPrintDocumentReady.bind(this)).on("exportStarted",this.onExportStarted.bind(this)).on("exportDocumentReady",this.onExportDocumentReady.bind(this)).onAsync("beforeLoadReport",this.onBeforeLoadReport.bind(this)).on("beginLoadReport",this.onBeginLoadReport.bind(this)).on("reportLoadProgress",this.onReportLoadProgress.bind(this)).onAsync("reportLoadComplete",this.onReportLoadComplete.bind(this)).onAsync("reportAutoRunOff",this.onReportAutoRunOff.bind(this)).on("renderingStopped",this.onRenderingStopped.bind(this)).on("missingOrInvalidParameters",this.onMissingOrInvalidParameters.bind(this)).on("noReport",this.onNoReport.bind(this)).on("error",this.onError.bind(this)),this.messages=i,this.enableAccessibility=r.enableAccessibility||!1,this.initialPageAreaImageUrl=r.initialPageAreaImageUrl||""}destroy(){this.resizeService&&this.resizeService.destroy()}onResize(){this.shouldAutosizePage()&&this.updatePageDimensions()}onPageReady(t){this.controller.getPageMode()===e.PageMode.SinglePage?(this.scrollManager.getEnabled()&&this.scrollManager.disable(),this.setPageContent(t)):this.scrollManager.renderPage(t),this.reportPageIsLoaded||(this.reportPageIsLoaded=!0),this.showPageAreaImage&&this.clearPageAreaImage(),this.controller.getViewMode()===e.ViewMode.Interactive&&null!==this.uiFreezeCoordinator&&this.uiFreezeCoordinator.init(this.placeholder),this.disablePagesArea(!1)}onServerActionStarted(){this.disablePagesArea(!0),this.disableParametersArea(!0),this.showNotification(this.messages.ReportViewer_LoadingReport)}onReportSourceChanged(){this.isNewReportSource=!0,this.navigateToPageOnDocReady=0,this.navigateToElementOnDocReady=null,this.documentReady=!1}onNoReport(){this.disablePagesArea(!1),this.disableParametersArea(!1),this.clearPage(),this.showNotification(this.messages.ReportViewer_NoReport)}onBeforeLoadReport(){this.documentReady=!1,this.navigateToPageOnDocReady||(this.navigateToPageOnDocReady=1),this.clearPendingTimeoutIds(),this.clear(),this.disablePagesArea(!0),this.disableParametersArea(!0),this.showNotification(this.messages.ReportViewer_LoadingReport)}onBeginLoadReport(){this.documentReady=!0,this.invalidateCurrentlyLoadedPage()}onReportLoadProgress(t){var i,r;t.pageCount>1&&t.pageCount<10&&this.controller.getPageMode()===e.PageMode.ContinuousScroll&&!(null===(i=this.pageWrapper.classList)||void 0===i?void 0:i.contains("temp-height"))&&(null===(r=this.pageWrapper.classList)||void 0===r||r.add("temp-height")),this.navigateWhenPageAvailable(this.navigateToPageOnDocReady,t.pageCount),this.showNotification(Ve(this.messages.ReportViewer_LoadingReportPagesInProgress,[t.pageCount]))}onReportLoadComplete(t){var i,r;0===t.pageCount?(this.clearPage(),this.showNotification(this.messages.ReportViewer_NoPageToDisplay),null===(i=this.pageWrapper.classList)||void 0===i||i.remove("temp-height")):(1===t.pageCount&&(null===(r=this.pageWrapper.classList)||void 0===r||r.remove("temp-height")),this.navigateOnLoadComplete(this.navigateToPageOnDocReady,t.pageCount),this.showNotification(Ve(this.messages.ReportViewer_LoadedReportPagesComplete,[t.pageCount])),this.showNotificationTimeoutId=window.setTimeout(this.hideNotification.bind(this),2e3),this.disableParametersArea(!1),this.enableInteractivity()),t.containsFrozenContent&&null===this.uiFreezeCoordinator&&(this.uiFreezeCoordinator=new De,this.controller.getViewMode()===e.ViewMode.Interactive&&this.uiFreezeCoordinator.init(this.placeholder))}onReportAutoRunOff(){this.disableParametersArea(!1),this.showNotification(this.messages.ReportViewer_AutoRunDisabled||"Please validate the report parameter values and press Preview to generate the report.")}onRenderingStopped(){this.clear(!0),this.disableParametersArea(!1),this.showError(this.messages.ReportViewer_RenderingCancelled)}onMissingOrInvalidParameters(){this.initialPageAreaImageUrl&&!this.reportPageIsLoaded&&(this.clearPage(),this.setPageAreaImage())}onError(e,t=!0){t&&(this.disablePagesArea(!1),this.disableParametersArea(!1),this.clearPage()),this.showError(e)}clearPendingTimeoutIds(){this.showNotificationTimeoutId&&window.clearTimeout(this.showNotificationTimeoutId)}invalidateCurrentlyLoadedPage(){let e=this.findPage(this.navigateToPageOnDocReady);e&&this.setPageNo(e,-1)}navigateWhenPageAvailable(e,t){e&&e<=t&&this.navigateToPage(e,this.navigateToElementOnDocReady)}navigateOnLoadComplete(e,t){e&&(e=Math.min(e,t),this.navigateToPage(e,this.navigateToElementOnDocReady))}clearPage(){this.clear(this.isNewReportSource),this.isNewReportSource=!1}shouldAutosizePage(){let t=this.controller.getScaleMode();return t===e.ScaleMode.FitPage||t===e.ScaleMode.FitPageWidth}onPrintStarted(){this.showNotification(this.messages.ReportViewer_PreparingPrint)}onPrintDocumentReady(){this.hideNotification()}onExportStarted(){this.showNotification(this.messages.ReportViewer_PreparingDownload)}onExportDocumentReady(){this.hideNotification()}updatePageDimensions(){let e=this.pageContainer.querySelectorAll(".trv-report-page");for(let t of Array.from(e)){let e=t,i=parseInt(e.dataset.page||"");this.setPageDimensions(e,i)}this.scrollManager.updatePageDimensionsReady()}clear(e=!1){this.disableInteractivity(),this.pendingElement=null,e&&(this.pageWrapper.innerHTML=""),this.hideNotification()}findPage(t){let i=this.pageContainer.querySelectorAll(".trv-report-page");if(this.controller.getPageMode()===e.PageMode.SinglePage)for(let e of Array.from(i)){let i=e;if(this.pageNo(i)===t)return i}else for(let e of Array.from(i)){let i=e;if(parseInt((null==i?void 0:i.dataset.page)||"-1")===t)return i}return null}navigateToPage(e,t){this.documentReady?this.navigateToPageCore(e,t):this.navigateToPageOnDocumentReady(e,t)}navigateToPageOnDocumentReady(e,t){this.navigateToPageOnDocReady=e,this.navigateToElementOnDocReady=t}navigateToPageCore(e,t){let i=this.findPage(e);i?(t&&this.navigateToElement(t,e),this.scrollManager.getEnabled()&&!t&&this.scrollManager.navigateToElement(i.offsetTop,e)):(this.pendingElement=t,this.beginLoadPage(e))}navigateToElement(e,t=0){var i;if(e){let r=this.pageContainer.querySelector(`[data-${e.type}-id='${e.id}']`);if(r){if(this.enableAccessibility){let e=this.findNextFocusableElement(r);e&&e.focus()}let e=0,i=0;for(;r&&r!==this.pageContainer;){if(z(r,"trv-page-wrapper")){let t=r.dataset.pageScale;if("string"==typeof t){let r=parseFloat(t);e*=r,i*=r}}e+=r.offsetTop,i+=r.offsetLeft,r=G(r)}this.scrollManager.getEnabled()&&t?this.scrollManager.navigateToElement(e,t):(this.pageContainer.scrollTop=e,this.pageContainer.scrollLeft=i)}else this.scrollManager.getEnabled()&&t&&this.scrollManager.navigateToElement((null===(i=this.placeholder)||void 0===i?void 0:i.querySelector('[data-page="'+t+'"]')).offsetTop,t)}}findNextFocusableElement(e){if(!e)return null;let t=e.tabIndex;return!isNaN(t)&&t>-1?e:this.findNextFocusableElement(e.nextElementSibling)}disablePagesArea(e){e?B(this.placeholder,"trv-loading"):U(this.placeholder,"trv-loading")}disableParametersArea(e){var t,i;e?null===(t=this.parametersContainer)||void 0===t||t.setAttribute("disabled",""):null===(i=this.parametersContainer)||void 0===i||i.removeAttribute("disabled")}showError(e=""){this.showNotification(e,"error")}showNotification(e="",t="info"){this.notification.dataset.type=t||"info";let i=this.notification.querySelector(".k-notification-content, .trv-error-message"),r=null==e?void 0:e.split(/\r?\n/);i.innerHTML=r&&r.length?`${r.join("<br>")}`:"Notification message not found.",B(this.notification,`k-notification-${t}`),U(this.notification,"k-hidden")}hideNotification(){let e=String(this.notification.dataset.type);delete this.notification.dataset.type,U(this.notification,`k-notification-${e}`),B(this.notification,"k-hidden")}pageNo(e){var t;return parseInt((null===(t=e.parentElement)||void 0===t?void 0:t.dataset.pageNumber)||"0")}setPageNo(e,t){e.parentElement&&(e.parentElement.dataset.pageNumber=t.toString())}beginLoadPage(e){this.disablePagesArea(!0),window.setTimeout(this.controller.getReportPage.bind(this.controller,e),1),this.navigateToPageOnDocReady=0}setPageDimensions(t,i=0){let r=this.controller.getScaleMode(),a=this.controller.getScale(),n=i?t:t.querySelector("div.trv-report-page");if(!n)return;let o=n.querySelector("div.sheet"),s=n.querySelector("div.trv-skeleton-wrapper");if(o=o||s,!o)return;let l=0,c=0,h=getComputedStyle(n),d=getComputedStyle(t),u=H(d.marginLeft)+H(h.borderLeftWidth)+H(h.paddingLeft),p=H(d.marginRight)+H(h.borderRightWidth)+H(h.paddingRight),m=H(d.marginTop)+H(h.borderTopWidth)+H(h.paddingTop),g=H(d.marginBottom)+H(h.borderBottomWidth)+H(h.paddingBottom);l=o.offsetWidth,c=o.offsetHeight;let v=c>l&&r===e.ScaleMode.FitPageWidth?20:0,f=(this.pageContainer.clientWidth-v-u-p)/l,b=(this.pageContainer.clientHeight-1-m-g)/c;r===e.ScaleMode.FitPageWidth?a=f:a&&r!==e.ScaleMode.FitPage||(a=Math.min(f,b)),null!==this.uiFreezeCoordinator&&this.uiFreezeCoordinator.setScaleFactor(a),t.dataset.pageScale=a.toString(),n.dataset.pageScale=a.toString(),s||W(o,a,a),n.style.height=a*c+"px",n.style.width=a*l+"px"}enableInteractivity(){this.onClickHandler=this.onClick.bind(this),this.onMouseEnterHandler=this.onMouseEnter.bind(this),this.onMouseLeaveHandler=this.onMouseLeave.bind(this),this.pageContainer.addEventListener("click",this.onClickHandler),this.pageContainer.addEventListener("mouseenter",this.onMouseEnterHandler,!0),this.pageContainer.addEventListener("mouseleave",this.onMouseLeaveHandler,!0)}disableInteractivity(){this.pageContainer.removeEventListener("click",this.onClickHandler),this.pageContainer.removeEventListener("mouseenter",this.onMouseEnterHandler),this.pageContainer.removeEventListener("mouseleave",this.onMouseLeaveHandler)}onClick(e){let t=e.target.closest("[data-reporting-action]");t&&this.onInteractiveItemClick(t,e)}onMouseEnter(e){let t=e.target,i=t.dataset;i.reportingAction&&this.onInteractiveItemEnter(t),(i.tooltipTitle||i.tooltipText)&&this.onToolTipItemEnter(t,e)}onMouseLeave(e){let t=e.target,i=t.dataset;i.reportingAction&&this.onInteractiveItemLeave(t),(i.tooltipTitle||i.tooltipText)&&this.onToolTipItemLeave(t)}onInteractiveItemClick(e,t){var i;let r=(null===(i=e.dataset.reportingAction)||void 0===i?void 0:i.toString())||"",n=this.getAction(r);n&&(this.navigateToPageOnDocReady=this.getNavigateToPageOnDocReady(t,n.Type),this.controller.executeReportAction(new a(e,n))),t.stopPropagation()}onInteractiveItemEnter(e){var t;let i=(null===(t=e.dataset.reportingAction)||void 0===t?void 0:t.toString())||"",r=this.getAction(i);r&&this.controller.reportActionEnter(new a(e,r))}onInteractiveItemLeave(e){var t;let i=(null===(t=e.dataset.reportingAction)||void 0===t?void 0:t.toString())||"",r=this.getAction(i);r&&this.controller.reportActionLeave(new a(e,r))}onToolTipItemEnter(e,t){let i=e.dataset.tooltipTitle,r=e.dataset.tooltipText;(i||r)&&this.controller.reportTooltipOpening(new Te(e,r||"",i||"",t))}onToolTipItemLeave(e){this.controller.reportTooltipClosing(new Te(e,"","",null))}getNavigateToPageOnDocReady(e,t){var i;return!this.scrollManager.getEnabled()||"sorting"!==t&&"toggleVisibility"!==t?this.controller.getCurrentPageNumber():(null===(i=e.target.closest(".trv-report-page"))||void 0===i?void 0:i.dataset.page)||this.controller.getCurrentPageNumber()}getAction(e){if(this.actions){let t=this.actions.find((t=>t.Id===e));if(t)return t}return null}updatePageStyle(e){var t;let i="trv-"+this.controller.getClientId()+"-styles";null===(t=document.getElementById(i))||void 0===t||t.remove();let r=F("style",i);r.innerHTML=e.pageStyles,document.head.appendChild(r)}setPageContent(e){this.actions=e.pageActions,this.updatePageStyle(e);let t=this.renderPageElement(e);this.pageWrapper.dataset.pageNumber=e.pageNumber.toString(),this.pageWrapper.innerHTML="",this.pageWrapper.append(t),this.controller.setCurrentPageNumber(e.pageNumber),this.applyPlaceholderViewModeClass(),this.setPageDimensions(this.pageWrapper),this.pageContainer.scrollTop=0,this.pageContainer.scrollLeft=0,this.navigateToElement(this.pendingElement)}setScrollablePage(e,t){this.actions&&this.actions.length?this.actions=this.actions.concat(t.pageActions):this.actions=t.pageActions,this.applyPlaceholderViewModeClass(),this.setPageDimensions(e,t.pageNumber)}renderPageElement(e){let t=F("div");t.innerHTML=e.pageContent;let i=t.querySelector("div.sheet");i.style.margin="0";let r=F("div","","trv-report-page");return r.dataset.page=e.pageNumber.toString(),r.append(i),r.append(F("div","","k-overlay trv-overlay trv-page-overlay")),r}applyPlaceholderViewModeClass(){this.controller.getViewMode()===e.ViewMode.Interactive?(U(this.placeholder,"printpreview"),B(this.placeholder,"interactive")):(U(this.placeholder,"interactive"),B(this.placeholder,"printpreview"))}setPageAreaImage(){this.clearPageAreaImage();let e=F("style",ke);e.innerHTML=Ve('.trv-page-container {background: #ffffff url("{0}") no-repeat center 50px}',[this.initialPageAreaImageUrl]),document.head.appendChild(e),this.showPageAreaImage=!0}clearPageAreaImage(){var e;null===(e=document.getElementById(ke))||void 0===e||e.remove()}},e.DeviceInfo=i,e.DocumentInfo=class{constructor(){this.documentReady=!1,this.documentMapAvailable=!1,this.containsFrozenContent=!1,this.pageCount=0,this.documentMapNodes=[],this.bookmarkNodes=[],this.renderingExtensions=[],this.autoRunEnabled=!0}},e.DocumentMapNode=class{constructor(){this.id="",this.isExpanded=!1,this.label="",this.text="",this.page=0,this.items=[]}},e.EmailInfo=r,e.ExportDocumentReadyEventArgs=s,e.ExportStartEventArgs=o,e.KeepClientAliveSentinel=k,e.PageAction=class{constructor(){this.Id="",this.ReportItemName="",this.Type="",this.Value={}}},e.PageActionEventArgs=a,e.PageInfo=class{constructor(){this.pageNumber=0,this.pageReady=!1,this.pageStyles="",this.pageContent="",this.pageActions=[]}},e.PageTargetElement=n,e.ParameterInfo=class{constructor(){this.name="",this.type="",this.text="",this.multivalue=!1,this.allowNull=!1,this.allowBlank=!1,this.isVisible=!1,this.autoRefresh=!1,this.hasChildParameters=!1,this.childParameters=[],this.availableValues=[],this.value="",this.id="",this.label=""}},e.ParameterValidators=Ce,e.ParameterValue=class{constructor(){this.name="",this.value=null}},e.RenderingExtension=class{constructor(){this.name="",this.localizedName=""}},e.ReportController=class extends A{constructor(e,t){super(),this.configurationInfo=null,this.keepClientAliveSentinel=null,this.registerClientPromise=null,this.registerInstancePromise=null,this.documentFormatsPromise=null,this.clientId="",this.reportInstanceId="",this.documentId="",this.threadId="",this.parameterValues={},this.bookmarkNodes=[],this.renderingExtensions=null,this.pageCount=0,this.currentPageNumber=0,this.clientHasExpired=!1,this.cancelLoad=!1,this.searchInitiated=!1,this.aiPromptInitiated=!1,this.contentTabIndex=0,this.respectAutoRun=!0,this.processedParameterValues={},this.options=t,t.reportSource&&this.setParameters(t.reportSource.parameters),this.printManager=new D,this.serviceClient=e,t.authenticationToken&&this.serviceClient.setAccessToken(t.authenticationToken)}get autoRunEnabled(){var e=!this.parameterValues||!("trv_AutoRun"in this.parameterValues)||this.parameterValues.trv_AutoRun;return!this.respectAutoRun||e}destroy(){this.printManager&&this.printManager.destroy()}setOptions(e){this.clearReportState(),this.clearClientId(),this.options=e,this.options.reportSource&&this.setParameters(this.options.reportSource.parameters)}setAuthenticationToken(e){this.serviceClient.setAccessToken(e)}init(){this.refreshReport(!0,"")}getServiceVersion(){return this.serviceClient.getServiceVersion()}getServiceConfiguration(){return this.serviceClient.getServiceConfiguration()}stopRendering(){this.serviceClient.deleteReportDocument(this.clientId,this.reportInstanceId,this.documentId).catch((e=>{this.handleRequestError(e)})).then((()=>{this.cancelLoad=!0,this.resetPageNumbers(),this.emit("renderingStopped")}))}refreshReport(e,t,i=!1){if(this.emit("loadedReportChange"),this.cancelLoad=!1,this.respectAutoRun=i||this.respectAutoRun,this.clientHasExpired&&(this.clientHasExpired=!1,this.clearClientId()),""==this.getReport())return void this.emit("noReport");let r=this.loadParameters();r.then((i=>{this.emit("parametersLoaded",i),this.processParameters(i,e,t)})),this.emit("reloadParameters",r)}processParameters(e,t,i){let r={},a=[],n=!1;for(let t of e)try{let e=Ce.validate(t,t.value);r[t.id]=e}catch(e){n=!0,a.push(t)}n?this.missingOrInvalidParameters(a):(this.setParameters(r),this.autoRunEnabled?this.refreshReportCore(t,i):this.emitAsync("reportAutoRunOff"))}hasInvalidParameter(e){for(const t of e)try{Ce.validate(t,t.value)}catch(e){return!0}return!1}refreshReportCore(e,t="",i=""){this.loadReport(e,t,i)}navigateToPage(e,t){this.emit("navigateToPage",e,t)}getReportDocumentId(){return this.documentId}setReportDocumentId(e){this.documentId=e}getReportPage(e){this.getPage(e).then(this.onPageReady.bind(this))}getPageData(e){return this.getPage(e)}setParameters(e){this.parameterValues=e}setParameter(e,t){this.parameterValues[e]=t}getReportSource(){var e;return new Ie(null===(e=this.options.reportSource)||void 0===e?void 0:e.report,this.parameterValues)}setReportSource(e){this.options.reportSource=e,this.setParameters(this.options.reportSource.parameters),this.emit("reportSourceChanged",e)}previewReport(){this.emit("loadedReportChange"),this.respectAutoRun=!1,this.refreshReportCore(!1)}getClientId(){return this.clientId}getScale(){return this.options.scale}setScale(e){e!==this.options.scale&&(this.options.scale=e,this.emit("scaleChanged",e))}getScaleMode(){return this.options.scaleMode}setScaleMode(e){e!==this.options.scaleMode&&(this.options.scaleMode=e,this.emit("scaleModeChanged",e))}getViewMode(){return this.options.viewMode}setViewMode(e){this.options.viewMode!==e&&(this.options.viewMode=e,this.options.reportSource&&this.emit("viewModeChanged",e))}getPageMode(){return this.options.pageMode}setPageMode(e){this.options.pageMode!==e&&(this.options.pageMode=e,this.options.reportSource&&this.emit("pageModeChanged",e))}getPrintMode(){return this.options.printMode}setPrintMode(e){this.options.printMode!==e&&(this.options.printMode=e,this.emit("printModeChanged",e))}getCurrentPageNumber(){return this.currentPageNumber}setCurrentPageNumber(e){this.currentPageNumber!==e&&(this.currentPageNumber=e,this.emit("currentPageChanged",e))}getPageCount(){return this.pageCount}scrollPageReady(){this.emit("scrollPageReady")}executeReportAction(e){let t=e.action;window.setTimeout((()=>{if(this.emit("interactiveActionExecuting",e),!e.cancel)if("navigateToReport"===t.Type){this.emit("serverActionStarted");let e=t.Value,i=this.fixDataContractJsonSerializer(e.ParameterValues);this.respectAutoRun=!0,this.emit("navigateToReport",{Report:e.Report,Parameters:i})}else if("navigateToBookmark"===t.Type){let e=this.getPageForBookmark(this.bookmarkNodes,t.Value),i=new n(t.Value,"bookmark");this.navigateToPage(e,i)}else if("sorting"===t.Type)this.execServerAction(t.Id);else if("toggleVisibility"===t.Type)this.execServerAction(t.Id);else if("navigateToUrl"===t.Type){let e=t.Value;window.open(e.Url,e.Target)}else t.Type}),0)}reportActionEnter(e){this.emit("interactiveActionEnter",e)}reportActionLeave(e){this.emit("interactiveActionLeave",e)}reportTooltipOpening(e){this.emit("toolTipOpening",e)}reportTooltipClosing(e){this.emit("toolTipClosing",e)}printReport(){return t(this,void 0,void 0,(function*(){let e=this.createDeviceInfo();e.ImmediatePrint=!0;let t=new pe(e);this.emit("printStarted",t),t.handled||(this.setUIState("PrintInProgress",!0),this.exportAsync("PDF",e).then((e=>{let t=this.serviceClient.getDocumentUrl(this.clientId,this.reportInstanceId,e);t+="?response-content-disposition="+(this.getCanUsePlugin()?"inline":"attachment");let i=new me(t);this.emit("printDocumentReady",i),this.setUIState("PrintInProgress",!1),i.handled||this.printManager.print(t)})))}))}exportReport(e){return t(this,void 0,void 0,(function*(){let i=this.createDeviceInfo(),r=new o(i,e);if(yield this.emitAsync("exportStart",r),!r.isCancelled){let a=new ge(i,e);if(this.emit("exportStarted",a),a.handled)return;this.setUIState("ExportInProgress",!0),this.exportAsync(e,r.deviceInfo).then((i=>t(this,void 0,void 0,(function*(){let t=this.serviceClient.getDocumentUrl(this.clientId,this.reportInstanceId,i);t+="?response-content-disposition=attachment";let r=new s(t,e,"_self");yield this.emitAsync("exportEnd",r),this.emit("exportDocumentReady",r),this.setUIState("ExportInProgress",!1),r.handled||window.open(t,r.windowOpenTarget)}))))}}))}sendReport(e){let t=this.createDeviceInfo(),i=new ve(t,e.format);this.emit("sendEmailStarted",i),i.handled||this.exportAsync(e.format,t).then((i=>{let r=this.serviceClient.getDocumentUrl(this.clientId,this.reportInstanceId,i);r+="?response-content-disposition=attachment";let a=new fe(e,t,r);this.emit("sendEmailDocumentReady",a),a.handled||this.sendDocumentAsync(i,e)}))}getSearchResults(e){return this.serviceClient.getSearchResults(this.clientId,this.reportInstanceId,this.documentId,e).catch(this.handleSearchRequestError.bind(this)).then((e=>e||[]))}createAIThread(){return this.serviceClient.createAIThread(this.clientId,this.reportInstanceId,this.getReport(),this.parameterValues).catch((e=>this.raiseError(e._responseJSON.exceptionMessage,!1))).then((e=>(this.threadId=(null==e?void 0:e.threadId)||"",e)))}getAIResponse(e){return this.serviceClient.getAIResponse(this.clientId,this.reportInstanceId,this.documentId,this.threadId,e).then((e=>e||""))}exportAsync(e,i){return this.initializeClient().then(this.registerInstance.bind(this)).then((()=>this.registerDocumentAsync(e,i,!1,this.documentId))).then((e=>t(this,void 0,void 0,(function*(){return yield this.getDocumentInfo(!1,e).catch((e=>this.raiseError(e))),e}))))}sendDocumentAsync(e,t){return this.serviceClient.sendDocument(this.clientId,this.reportInstanceId,e,t).catch((e=>{this.handleRequestError(e,se(this.options.messages.ReportViewer_ErrorSendingDocument,q(this.getReport())))}))}loadParameters(e=void 0){return this.initializeClient().then(this.getParameters.bind(this,e))}loadReport(e,t,i){this.clearReportState();const r=this.getFormat(),a=this.createPreviewDeviceInfo();this.emitAsync("beforeLoadReport",{deviceInfo:a}).then((()=>this.initializeClient())).then(this.registerInstance.bind(this)).then((()=>this.registerDocumentAsync(r,a,e,t,i))).then((e=>(this.documentId=e,this.getDocumentInfo(!0,this.documentId)))).then(this.onReportLoadComplete.bind(this)).catch((e=>this.raiseError(e)))}initializeAndStartSentinel(){this.options.keepClientAlive&&this.clientId&&this.serviceClient.getClientsSessionTimeoutSeconds().then((e=>{this.keepClientAliveSentinel=new k(this.serviceClient,this.clientId,e),this.keepClientAliveSentinel.start()}))}stopSentinel(){null!=this.keepClientAliveSentinel&&this.keepClientAliveSentinel.stop()}setClientId(e){this.clientId=e||"",this.stopSentinel(),this.emit("clientIdChanged",this.clientId),this.initializeAndStartSentinel()}clearClientId(){this.clientId="",this.registerClientPromise=null,this.stopSentinel(),this.keepClientAliveSentinel=null,this.emit("clientIdChanged",this.clientId)}setReportInstanceId(e){this.reportInstanceId=e}clearReportInstanceId(){this.reportInstanceId="",this.registerInstancePromise=null}clearReportState(){this.cancelLoad=!1,this.documentId="",this.resetPageNumbers(),this.clearReportInstanceId()}resetPageNumbers(){this.pageCount=0,this.currentPageNumber=0}handleSearchRequestError(e){if(!re(e,"System.ArgumentException"))throw this.handleRequestError(e,"",!0),null;this.throwPromiseError(e)}throwPromiseError(e){throw e.responseJSON&&e.responseJSON.exceptionMessage?e.responseJSON.exceptionMessage:this.options.messages.ReportViewer_PromisesChainStopError}handleRequestError(e,t="",i=!1){ae(e)&&this.onClientExpired();let r=oe(e.error)?"":e.error,a=this.formatRequestError(e,r,t);this.raiseError(a),i||this.throwPromiseError(e)}formatRequestError(e,t,i){let r=e.responseJSON,a="";if(r){if(ne(e))return this.options.messages.ReportViewer_MissingOrInvalidParameter;a=q(r.message);let t=q(r.exceptionMessage||r.error_description);t&&(a?a+=" "+t:a=t)}else a=q(e.responseText);return(i||t)&&(a&&(a=" "+a),a=q(i||t)+a),ae(e)&&(a+="<br />"+this.options.messages.ReportViewer_ClientExpired),a}raiseError(e,t=!0){this.emit("error",e,t)}onClientExpired(){this.clientHasExpired=!0,this.emit("clientExpired")}initializeClient(){return this.registerClientPromise||(this.registerClientPromise=this.serviceClient.registerClient().catch((e=>{const t=se(this.options.messages.ReportViewer_ErrorServiceUrl,[this.serviceClient.getServiceUrl()]);this.handleRequestError(e,t)})).then(this.setClientId.bind(this)).catch(this.clearClientId.bind(this))),this.registerClientPromise}registerInstance(){return this.registerInstancePromise||(this.registerInstancePromise=this.serviceClient.createReportInstance(this.clientId,this.getReport(),this.parameterValues).then(this.setReportInstanceId.bind(this)).catch(this.clearReportInstanceId.bind(this))),this.registerInstancePromise}registerDocumentAsync(e,i,r,a="",n=""){return t(this,void 0,void 0,(function*(){return(yield this.serviceClient.createReportDocument(this.clientId,this.reportInstanceId,e,i,!r,a,n).catch((t=>{this.handleRequestError(t,se(this.options.messages.ReportViewer_ErrorCreatingReportDocument,q(this.getReport()),q(e)))})))||""}))}getFormat(){return this.options.viewMode===e.ViewMode.PrintPreview?"HTML5":"HTML5Interactive"}getCanUsePlugin(){switch(this.options.printMode){case e.PrintMode.ForcePDFFile:return!1;case e.PrintMode.ForcePDFPlugin:return!0;default:return this.printManager.getDirectPrintState()}}createPreviewDeviceInfo(){let e=this.createDeviceInfo();return e.ContentOnly=!0,e.UseSVG=!0,e}createDeviceInfo(){let e=new i;this.options.enableAccessibility&&(e.enableAccessibility=!0,e.contentTabIndex=this.getContentTabIndex());let t=this.getSearchInitiated(),r=this.options.searchMetadataOnDemand;return e.enableSearch=!r||t,e}getParameters(e){return this.serviceClient.getParameters(this.clientId,this.getReport(),e||this.parameterValues).catch((e=>{this.handleRequestError(e,this.options.messages.ReportViewer_UnableToGetReportParameters)}))}getReportParameters(){const e={},t=this.getProcessedParameterValues();for(let i in t){const r=t[i],a=this.parameterValues[i];r&&r.availableValues?r.multivalue?e[i]=Ae(r,a,i):e[i]=ye(r,a,i):e[i]=a}return e}setProcessedParameterValues(e){this.processedParameterValues=e}getProcessedParameterValues(){return this.processedParameterValues}getDocumentInfo(e,i){return e&&this.emit("beginLoadReport"),new Promise(((r,a)=>{let n=()=>t(this,void 0,void 0,(function*(){this.cancelLoad?a(this.options.messages.ReportViewer_RenderingCancelled):(yield this.registerInstancePromise,this.serviceClient.getDocumentInfo(this.clientId,this.reportInstanceId,i).then((t=>{t&&t.documentReady?r(t):(e&&(this.pageCount=t.pageCount,this.emit("reportLoadProgress",t)),window.setTimeout(n,500))})).catch((e=>this.handleRequestError(e,"",!0))))}));n()}))}getPage(e){return new Promise((t=>{let i=()=>{this.serviceClient.getPage(this.clientId,this.reportInstanceId,this.documentId,e).then((e=>{e.pageReady?t(e):window.setTimeout(i,500)})).catch((e=>this.handleRequestError(e)))};i()}))}getPageForBookmark(e,t){if(e)for(let i=0,r=e.length;i<r;i++){let r=e[i];if(r.id===t)return r.page;let a=this.getPageForBookmark(r.items,t);if(a)return a}return 0}fixDataContractJsonSerializer(e){let t={};return Array.isArray(e)&&e.forEach((function(e){t[e.Key]=e.Value})),t}execServerAction(e){this.emit("serverActionStarted"),this.refreshReportCore(!1,this.documentId,e)}onReportLoadComplete(e){this.bookmarkNodes=e.bookmarkNodes,this.pageCount=e.pageCount,this.renderingExtensions=e.renderingExtensions,this.emitAsync("reportLoadComplete",e)}onPageReady(e){this.emit("pageReady",e)}getReport(){var e;return(null===(e=this.options.reportSource)||void 0===e?void 0:e.report)||""}getDocumentFormats(){return this.renderingExtensions?Promise.resolve(this.renderingExtensions):(this.documentFormatsPromise||(this.documentFormatsPromise=this.serviceClient.getDocumentFormats().catch((e=>{this.handleRequestError(e)}))),this.documentFormatsPromise)}setUIState(e,t){this.emit("setUIState",{operationName:e,inProgress:t})}missingOrInvalidParameters(e){let t=this.options.messages.ReportViewer_MissingOrInvalidParameter;e.forEach((e=>{t+=`\r\n${e.text} (${e.id})`})),this.raiseError(t),this.emit("missingOrInvalidParameters")}setSearchInitiated(e){this.searchInitiated=e}getSearchInitiated(){return this.searchInitiated}setAiPromptInitiated(e){this.aiPromptInitiated=e}getAiPromptInitiated(){return this.aiPromptInitiated}setContentTabIndex(e){this.contentTabIndex=e}getContentTabIndex(){return this.contentTabIndex}disposeSentinel(){this.stopSentinel(),this.keepClientAliveSentinel=null}getConfigurationInfo(){return this.configurationInfo}setConfigurationInfo(e){this.configurationInfo=e}getAiConfigurationOptions(){return this.configurationInfo.options.find((e=>"ai-insights"===e.name))}shouldShowLicenseBanner(){var e;const t=null===(e=this.configurationInfo)||void 0===e?void 0:e.license;return!(null==t?void 0:t.isValid)&&"true"!==this.loadFromSessionStorage("hideBanner")}shouldShowLicenseOverlay(){var e,t;return!(null===(t=null===(e=this.configurationInfo)||void 0===e?void 0:e.license)||void 0===t?void 0:t.isValid)}saveToSessionStorage(e,t){sessionStorage.setItem(e,t)}loadFromSessionStorage(e){return sessionStorage.getItem(e)}removeFromSessionStorage(e){sessionStorage.removeItem(e)}clearSessionStorage(){sessionStorage.clear()}},e.ReportControllerOptions=class{constructor(e,t,i,r,a,n,o,s,l,c=!1,h=!1){this.keepClientAlive=!1,this.keepClientAlive=e,this.authenticationToken=t,this.reportSource=i,this.printMode=r,this.pageMode=a,this.viewMode=n,this.scaleMode=o,this.scale=s,this.messages=l,this.enableAccessibility=c,this.searchMetadataOnDemand=h}},e.ReportServerSettings=class{constructor(e,t,i){this.url=e,this.username=t,this.password=i}},e.ReportSourceOptions=Ie,e.RequestError=l,e.SearchInfo=class{constructor(){this.searchToken="",this.matchCase=!1,this.matchWholeWord=!1,this.useRegularExpressions=!1}},e.SearchManager=class extends A{constructor(e,t){super(),this.searchResults=[],this.pendingHighlightItem=null,this.highlightedElements=[],this.currentHighlightedElement=null,this.isActive=!1,this.controller=t,this.pageContainer=Z(e,".trv-page-container"),this.controller.on("scrollPageReady",this.onPageReady.bind(this)).on("pageReady",this.onPageReady.bind(this))}createAIThread(){return this.controller.createAIThread()}getAIResponse(e){return this.controller.getAIResponse(e)}search(e){this.isActive=!0,this.clearColoredItems(),this.searchResults=[],e.searchToken&&""!==e.searchToken?this.controller.getSearchResults(e).then(this.onSearchComplete.bind(this)):this.onSearchComplete([])}closeSearch(){this.isActive=!1,this.clearColoredItems(),this.searchResults=[]}highlightSearchItem(t){t&&(this.currentHighlightedElement&&(U(this.currentHighlightedElement,xe),B(this.currentHighlightedElement,Ne)),t.page===this.controller.getCurrentPageNumber()?this.highlightItem(t):this.controller.getPageMode()===e.PageMode.SinglePage?this.clearColoredItems():this.highlightItem(t),this.pendingHighlightItem=t,this.navigateToPage(t))}navigateToPage(e){this.controller.navigateToPage(e.page,new n(e.id,"search"))}colorPageElements(e){e&&0!==e.length&&(e.forEach((e=>{let t=Z(this.pageContainer,"[data-search-id="+e.id+"]");t&&(B(t,Ne),this.highlightedElements.push(t))})),this.highlightItem(this.pendingHighlightItem))}highlightItem(e){if(e){let t=this.highlightedElements.find((function(t){return t.dataset.searchId===e.id}));t&&(this.currentHighlightedElement=t,U(t,Ne),B(t,xe))}}clearColoredItems(){this.highlightedElements&&this.highlightedElements.length>0&&this.highlightedElements.forEach((e=>{U(e,Ne)})),this.currentHighlightedElement&&U(this.currentHighlightedElement,xe),this.highlightedElements=[],this.currentHighlightedElement=null}onPageReady(){this.isActive&&this.colorPageElements(this.searchResults)}onSearchComplete(e){this.searchResults=e,this.emit("searchComplete",e),this.colorPageElements(e)}},e.SearchResult=class{constructor(){this.description="",this.id="",this.page=0}},e.ServiceClient=class{constructor(e){this.options=e}validateClientID(e){if(!e)throw"Invalid ClientId"}authenticatedGet(e){return this.login().then((function(t){return fetch(e,{headers:c(t)}).then(h)}))}authenticatedPost(e,t){return this.login().then((function(i){return d(e,t,i)}))}authenticatedDelete(e){return this.login().then((function(t){return fetch(e,{method:"DELETE",headers:c(t)}).then(h)}))}login(){return this.loginPromise||(this.loginPromise=this.createLoginPromise()),this.loginPromise}createLoginPromise(){let e=this.options.loginInfo;if(e&&e.url&&(e.username||e.password)){let t=`grant_type=password&username=${encodeURIComponent((null==e?void 0:e.username)||"")}&password=${encodeURIComponent((null==e?void 0:e.password)||"")}`;return d(e.url,t,"",!0).then((e=>e.access_token))}return Promise.resolve("")}get(e){return fetch(e).then((e=>e.text()))}setAccessToken(e){this.loginPromise=Promise.resolve(e)}registerClient(){return this.authenticatedPost(`${this.options.serviceUrl}/clients`,{timeStamp:Date.now()}).then((e=>e.clientId))}unregisterClient(e){return this.validateClientID(e),this.authenticatedDelete(`${this.options.serviceUrl}/clients/${e}`)}getParameters(e,t,i){return this.validateClientID(e),this.authenticatedPost(`${this.options.serviceUrl}/clients/${e}/parameters`,{report:t,parameterValues:i||{}}).then((e=>e))}createReportInstance(e,t,i){return this.validateClientID(e),this.authenticatedPost(`${this.options.serviceUrl}/clients/${e}/instances`,{report:t,parameterValues:i}).then((e=>e.instanceId))}deleteReportInstance(e,t){return this.validateClientID(e),this.authenticatedDelete(`${this.options.serviceUrl}/clients/${e}/instances/${t}`)}createReportDocument(e,t,i,r,a,n,o){return this.validateClientID(e),r.BasePath=this.options.serviceUrl,this.authenticatedPost(`${this.options.serviceUrl}/clients/${e}/instances/${t}/documents`,{format:i,deviceInfo:r,useCache:a,baseDocumentID:n,actionID:o}).then((e=>e.documentId))}sendDocument(e,t,i,r){return this.validateClientID(e),this.authenticatedPost(`${this.options.serviceUrl}/clients/${e}/instances/${t}/documents/${i}/send`,r)}deleteReportDocument(e,t,i){return this.validateClientID(e),this.authenticatedDelete(`${this.options.serviceUrl}/clients/${e}/instances/${t}/documents/${i}`)}getDocumentUrl(e,t,i){return`${this.options.serviceUrl}/clients/${e}/instances/${t}/documents/${i}`}getDocumentInfo(e,t,i){return this.validateClientID(e),this.authenticatedGet(`${this.options.serviceUrl}/clients/${e}/instances/${t}/documents/${i}/info`).then((e=>e))}getPage(e,t,i,r){return this.validateClientID(e),this.authenticatedGet(`${this.options.serviceUrl}/clients/${e}/instances/${t}/documents/${i}/pages/${r}`).then((e=>{let t=e;return t.pageActions=JSON.parse(e.pageActions),t}))}getDocumentFormats(){return this.authenticatedGet(`${this.options.serviceUrl}/formats`).then((e=>e||[]))}getServiceVersion(){return this.authenticatedGet(`${this.options.serviceUrl}/version`).then((e=>e.toString()))}getServiceConfiguration(){return this.authenticatedGet(`${this.options.serviceUrl}/configuration`).then((e=>e))}getResource(e,t,i,r){return this.validateClientID(e),this.authenticatedGet(`${this.options.serviceUrl}/clients/${e}/instances/${t}/documents/${i}/resources/${r}`)}getSearchResults(e,t,i,r){return this.validateClientID(e),this.authenticatedPost(`${this.options.serviceUrl}/clients/${e}/instances/${t}/documents/${i}/search`,r).then((function(e){return e||[]}))}createAIThread(e,t,i,r){return this.validateClientID(e),this.authenticatedPost(`${this.options.serviceUrl}/clients/${e}/instances/${t}/ai`,{report:i,parameterValues:r}).then((e=>e))}getAIResponse(e,t,i,r,a){return this.validateClientID(e),this.authenticatedPost(`${this.options.serviceUrl}/clients/${e}/instances/${t}/documents/${i}/ai/${r}/query`,{query:a}).then((function(e){return e||""}))}getServiceUrl(){return this.options.serviceUrl}keepClientAlive(e){return this.authenticatedPost(`${this.options.serviceUrl}/clients/keepAlive/${e}`,{})}getClientsSessionTimeoutSeconds(){return this.authenticatedGet(`${this.options.serviceUrl}/clients/sessionTimeout`).then((function(e){return e.clientSessionTimeout}))}},e.ServiceClientLoginInfo=class{constructor(e,t,i){this.url=e,this.username=t,this.password=i}},e.ServiceClientOptions=class{constructor(e,t=null){this.serviceUrl="",this.serviceUrl=e.replace(/\/+$/,""),this.loginInfo=t}},e.addClass=B,e.appendHtml=X,e.createElement=F,e.debounce=te,e.each=le,e.escapeHtml=q,e.findElement=Z,e.getColorAlphaValue=J,e.getElementAttributeValue=Q,e.getElementScrollParent=ee,e.getOffsetParent=G,e.hasClass=z,e.isArray=ce,e.isExceptionOfType=re,e.isInternalServerError=oe,e.isInvalidClientException=ae,e.isInvalidParameterException=ne,e.isRgbColor=K,e.keepElementInView=function(e){if(!e)return;let t=ee(e);if(!t)return;let i=e.offsetTop,r=i+e.offsetHeight,a=t.scrollTop+t.offsetHeight;i<t.scrollTop?t.scrollTop=i:r>a&&(t.scrollTop+=r-a)},e.parseToLocalDate=ue,e.prependHtml=Y,e.removeClass=U,e.reportSourcesAreEqual=function(e){const t=e.firstReportSource,i=e.secondReportSource;if(t&&i&&t.report===i.report){let e="";t.parameters&&(e=JSON.stringify(t.parameters));let r="";return i.parameters&&(r=JSON.stringify(i.parameters)),e===r}return!1},e.scaleElement=W,e.stringFormat=se,e.throttle=ie,e.toPixel=H,e.toRgbColor=j,e.tryParseFloat=de,e.tryParseInt=he,Object.defineProperty(e,"__esModule",{value:!0})}(t)}(0,t.exports);var i=t.exports,r=/{(\w+?)}/g,a={DELETE:46,BACKSPACE:8,TAB:9,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,END:35,HOME:36};function n(){if(window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1){var e=Object.keys(a),t=e.length;return function(i){for(var r=0;r<t;r++)if(a[e[r]]==i)return!0}}return function(e){return!1}}function o(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))}function s(e,t){return h(c(e,t),t)}function l(e,t,i){return e.replace(new RegExp(t,"g"),i)}function c(e,t){return void 0===t&&(t="s"),e.replace(new RegExp("^["+t+"]+"),"")}function h(e,t){return void 0===t&&(t="s"),e.replace(new RegExp("["+t+"]+$"),"")}function d(e,t){var i=Array.isArray(t);return e.replace(r,(function(e,r){return t[i?parseInt(r):r]}))}function u(e){return $("<div>").text(e).html()}function p(e){return new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()))}function m(e){return new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())}function g(e,t){if(e instanceof Date&&t instanceof Date){if(e.getTime()!==t.getTime())return!1}else if(e!==t)return!1;return!0}function v(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.length!==t.length)return!1;for(var i=e.length-1;i>=0;i--)if(!g(e[i],t[i]))return!1;return!0}function f(e){var t,i,r,a="DrawingFactoryUnavailableException";return i=a,r="Telerik.Drawing.Contract."+a,(t=e)&&t.exceptionType&&b(t.exceptionType,i,r)}function b(e,t,i){return e&&(e===i||e.endsWith(t))}function P(e){try{return JSON.parse(e,(function(e,t){if(e&&t){var i=e.charAt(0);if(i===i.toUpperCase())this[i.toLowerCase()+e.slice(1)]=t}return t}))}catch(e){return null}}function E(e){return!(!e||!e.responseText)&&P(e.responseText)}function S(e){return I(e,{dataType:"script",cache:!0})}function w(e){return e.filter((function(e,t,i){return i.lastIndexOf(e)===t}))}function C(e){var t=window.console;t&&t.error&&t.error(e)}function y(e){if(e&&e.length<6){var t=1,i=e.split("");for("#"!==i[0]&&(t=0);t<i.length;t++)i[t]=i[t]+i[t];e=i.join("")}var r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return r?parseInt(r[1],16)+", "+parseInt(r[2],16)+", "+parseInt(r[3],16):null}function A(e){return!!e&&e.indexOf(",")>-1}function I(e,t){return new Promise((function(i,r){$.ajax(e,t).done((function(e){return i(e)})).fail((function(e,t,i){r(function(e,t,i){return{xhr:e,status:t,error:i}}(e,t,i))}))}))}const T=Object.freeze(Object.defineProperty({__proto__:null,isSpecialKey:n,rectangle:function e(t,i,r,a){return{left:t,top:i,width:r,height:a,right:function(){return t+r},bottom:function(){return i+a},union:function(r){var a=Math.min(t,r.left),n=Math.min(i,r.top);return e(a,n,Math.max(this.right(),r.right())-a,Math.max(this.bottom(),r.bottom())-n)}}},generateGuidString:o,trim:s,replaceAll:l,lTrim:c,rTrim:h,stringFormat:d,escapeHtml:u,adjustTimezone:p,unadjustTimezone:m,areEqual:g,areEqualArrays:v,isApplicationException:function(e){return f(E(e))},isApplicationExceptionInstance:f,exceptionTypeNamesMatch:b,parseJSON:P,getExceptionInstance:E,loadScript:S,filterUniqueLastOccurrence:w,logError:C,toRgbColor:y,isRgbColor:A,getColorAlphaValue:function(e){if("transparent"===e.toLowerCase())return 0;if(!A(e))return 1;-1!==e.indexOf("#")&&(e=y(e));var t=e.split(",").map((function(e){return e.trim()}));return 4===t.length?parseFloat((parseFloat(t[3].replace(/[()]/g,""))/255).toFixed(2)):1},$ajax:I,tryParseInt:i.tryParseInt,tryParseFloat:i.tryParseFloat,parseToLocalDate:i.parseToLocalDate,reportSourcesAreEqual:i.reportSourcesAreEqual},Symbol.toStringTag,{value:"Module"}));function R(e){return parseInt(e,10)||0}const M=Object.freeze(Object.defineProperty({__proto__:null,getMargins:function(e){var t=$(e);return{left:R(t.css("marginLeft")),right:R(t.css("marginRight")),top:R(t.css("marginTop")),bottom:R(t.css("marginBottom"))}},getPadding:function(e){var t=$(e);return{left:R(t.css("paddingLeft")),right:R(t.css("paddingRight")),top:R(t.css("paddingTop")),bottom:R(t.css("paddingBottom"))}},getBorderWidth:function(e){var t=$(e);return{left:R(t.css("borderLeftWidth")),right:R(t.css("borderRightWidth")),top:R(t.css("borderTopWidth")),bottom:R(t.css("borderBottomWidth"))}},scale:function(e,t,i,r,a){r=r||0,a=a||0;var n=d("scale({0}, {1})",[t=t||1,i=i||1]),o=d("{0} {1}",[r,a]);$(e).css("transform",n).css("transform-origin",o)}},Symbol.toStringTag,{value:"Module"}));var _={};function D(e){var t,i,r,a={CONFIRM_KEY:13,CONTENT_AREA_KEY:67,DOCUMENT_MAP_AREA_KEY:68,MENU_AREA_KEY:77,PARAMETERS_AREA_KEY:80};if(e=$.extend({},_,e),!(t=e.controller))throw"No controller (telerikReporting.ReportViewerController) has been specified.";function n(){i||(!function(){(i={})[a.DOCUMENT_MAP_AREA_KEY]=$("div[data-role=telerik_ReportViewer_DocumentMapArea] div[data-role=treeview]"),i[a.MENU_AREA_KEY]=$("div[data-role=telerik_ReportViewer_Toolbar]"),i[a.CONTENT_AREA_KEY]=o();var e=$("div[data-role=telerik_ReportViewer_ParametersArea] .trv-parameters-area-content .trv-parameters-wrapper");e&&(i[a.PARAMETERS_AREA_KEY]=e,function(e){if(0===e.length)return;var t=e.parent("div[data-role=telerik_ReportViewer_ParametersArea]");if(!l(t))return;Array.from(e.children()).forEach((e=>{$(e).on("keydown",(e=>{e.which==a.CONFIRM_KEY&&(t.find("button.trv-parameters-area-preview-button").focus(),e.preventDefault())}))}))}(e))}(),$(document.body).off("keydown",s),$(document.body).on("keydown",s))}function o(){return $("div[data-role=telerik_ReportViewer_PagesArea]")}function s(e){if(i&&e.altKey&&e.ctrlKey){var t=i[e.which];if(t&&l(t.parent())){var a="k-focus";r&&r.removeClass(a),t.addClass(a),t.focus(),r=t,e.preventDefault()}}}function l(e){return e&&!(e.hasClass("k-collapsed")||e.hasClass("k-hidden"))}return t.onAsync("reportLoadComplete",(async()=>{n();var e=o();e.length>0&&e.focus()})).on("pageReady",((e,t)=>{!function(e){e&&(n(),function(e){if(e){var t=e.find("div [data-reporting-action]");!t.length>0||Array.from(t).forEach((e=>{var t=$(e);t.on("keydown",(e=>{e.which==a.CONFIRM_KEY&&t.trigger("click")}))}))}}(i[a.CONTENT_AREA_KEY]))}(t)})).on("error",((e,t)=>{var i;0!==(i=$("div.trv-pages-area div.trv-error-message")).length&&(i.attr("tabIndex",0),i.focus()),window.setTimeout(n,500)})),{getKeyMap:function(){return a},setKeyMap:function(e){a=e,i=void 0}}}const L={viewerInstances:[]};class k{static bind(e,...t){const i=t[0].commands,r=t[1];k.attachCommands(e,i,r);var a=e.find('[data-role^="telerik_ReportViewer_"]');Array.from(a).forEach((e=>{var i=$(e),r=$.fn[i.attr("data-role")];"function"==typeof r&&r.apply(i,t)}))}static attachCommands(e,t,i){var r='[data-command^="telerik_ReportViewer_"]',a="[data-target-report-viewer]"+r;e.on("click",r,(function(e){var i=$(e.currentTarget).attr("data-command");if(i){var r=i.substring(21),a=t[r];a&&a.getEnabled()&&a.exec($(e.currentTarget).attr("data-command-parameter")),e.preventDefault()}})),L.CommandHandlerAttached||($(document.body).on("click",a,(function(e){var t=$(e.currentTarget),i=t.attr("data-command"),r=t.attr("data-target-report-viewer");if(i&&r){var a=i.substring(21),n=$(r).data("telerik_ReportViewer").commands[a];n.getEnabled()&&n.exec($(e.currentTarget).attr("data-command-parameter")),e.preventDefault()}})),L.CommandHandlerAttached=!0),Object.entries(t).forEach((([t,r])=>{!function(e,t,i,r){if(t){var a='[data-command="telerik_ReportViewer_'+e+'"]',n='[data-target-report-viewer="'+i.selector+'"]'+a,o=r.find(a),s=$(n);$(t).on("enabledChanged",(e=>{(t.getEnabled()?$.fn.removeClass:$.fn.addClass).call(o.parent("li"),"k-disabled"),(t.getEnabled()?$.fn.removeClass:$.fn.addClass).call(s,i.disabledButtonClass)})).on("checkedChanged",(e=>{var r=o.parent("li");(t.getChecked()?$.fn.addClass:$.fn.removeClass).call(r,function(e){return e.hasClass("trv-menu-toggleable")?"k-selected !k-bg-primary":"k-selected"}(r)),(t.getChecked()?$.fn.addClass:$.fn.removeClass).call(s,i.checkedButtonClass)}))}}(t,r,i,e)}))}}class V{_enabled;_checked;_fn;getEnabled(){return this._enabled}setEnabled(e){const t=Boolean(e);return this._enabled!==t&&(this._enabled=t),$(this).trigger("enabledChanged",this._enabled),this}getChecked(){return this._checked}setChecked(e){const t=Boolean(e);return this._checked!==t&&(this._checked=t),$(this).trigger("checkedChanged",this._checked),this}constructor(e){this._enabled=!0,this._checked=!1,this._fn=e}exec(...e){"function"==typeof this._fn&&this._fn.apply(this,e)}}var N={};N[i.ScaleMode.FitPage]=i.ScaleMode.FitPageWidth,N[i.ScaleMode.FitPageWidth]=i.ScaleMode.Specific,N[i.ScaleMode.Specific]=i.ScaleMode.FitPage;var x=[.1,.25,.5,.75,1,1.5,2,4,8];function O(e){var t=e.controller;if(!t)throw"No options.controller.";var r=e.notificationService;if(!r)throw"No options.notificationService.";var a=e.history;if(!a)throw"No options.history.";return{historyBack:new V((()=>{a.back()})),historyForward:new V((()=>{a.forward()})),stopRendering:new V((()=>{t.stopRendering()})),goToPrevPage:new V((()=>{t.navigateToPage(t.getCurrentPageNumber()-1)})),goToNextPage:new V((()=>{t.navigateToPage(t.getCurrentPageNumber()+1)})),goToFirstPage:new V((()=>{t.navigateToPage(1)})),goToLastPage:new V((()=>{t.navigateToPage(t.getPageCount())})),goToPage:new V((e=>{if(!isNaN(e)){var i=t.getPageCount();return e>i?e=i:e<1&&(e=1),t.navigateToPage(e),e}})),refresh:new V((()=>{t.refreshReport(!0,"",!1)})),export:new V((e=>{e&&t.exportReport(e)})),print:new V((()=>{t.printReport()})),pageMode:new V((()=>{t.setPageMode(t.getPageMode()===i.PageMode.SinglePage?i.PageMode.ContinuousScroll:i.PageMode.SinglePage),t.refreshReportCore(!1,t.getReportDocumentId())})),togglePrintPreview:new V((()=>{t.setViewMode(t.getViewMode()===i.ViewMode.PrintPreview?i.ViewMode.Interactive:i.ViewMode.PrintPreview),t.refreshReportCore(!1,t.getReportDocumentId())})),toggleDocumentMap:new V((()=>{var e;r.setDocumentMapVisible({visible:(e={},r.getDocumentMapState(e),!Boolean(e.visible))})})),toggleParametersArea:new V((()=>{var e;r.setParametersAreaVisible({visible:(e={},r.getParametersAreaState(e),!Boolean(e.visible))})})),zoom:new V((e=>{t.setScaleMode(i.ScaleMode.Specific),t.setScale(e)})),zoomIn:new V((()=>{n(1)})),zoomOut:new V((()=>{n(-1)})),toggleZoomMode:new V((e=>{var r=t.getScaleMode(),a=N[r];t.setScaleMode(N[a]),a===i.ScaleMode.Specific&&t.setScale(1)})),toggleSearchDialog:new V((()=>{r.setSearchDialogVisible({visible:!Boolean(t.getSearchInitiated())})})),toggleSendEmailDialog:new V((()=>{var e;r.setSendEmailDialogVisible({visible:(e={},r.getSendEmailDialogState(e),!Boolean(e.visible))})})),toggleAiPromptDialog:new V((()=>{r.setAiPromptDialogVisible({visible:!Boolean(t.getAiPromptInitiated())})}))};function n(e){var r=function(e,t){for(var i=-1,r=x.length,a=0;a<r;a++){var n=x[a];if(e<n){i=a-.5;break}if(e===n){i=a;break}}i+=t,i=t>=0?Math.round(i-.49):Math.round(i+.49);i<0?i=0:i>r-1&&(i=r-1);return x[i]}(t.getScale(),e);t.setScale(r),t.setScaleMode(i.ScaleMode.Specific)}}const F={INTERACTIVE:"INTERACTIVE",PRINT_PREVIEW:"PRINT_PREVIEW"},B={AUTO_SELECT:"AUTO_SELECT",FORCE_PDF_PLUGIN:"FORCE_PDF_PLUGIN",FORCE_PDF_FILE:"FORCE_PDF_FILE"},U={SINGLE_PAGE:"SINGLE_PAGE",CONTINUOUS_SCROLL:"CONTINUOUS_SCROLL"},z={FIT_PAGE_WIDTH:"FIT_PAGE_WIDTH",FIT_PAGE:"FIT_PAGE",SPECIFIC:"SPECIFIC"},G={INTEGER:"System.Int64",FLOAT:"System.Double",STRING:"System.String",DATETIME:"System.DateTime",BOOLEAN:"System.Boolean"},H={COMBO_BOX:"COMBO_BOX",LIST_VIEW:"LIST_VIEW"},W={RIGHT:"RIGHT",LEFT:"LEFT",TOP:"TOP",BOTTOM:"BOTTOM"},q={RIGHT:"RIGHT",LEFT:"LEFT"},j={EXPORT_BEGIN:"EXPORT_BEGIN",EXPORT_END:"EXPORT_END",PRINT_BEGIN:"PRINT_BEGIN",PRINT_END:"PRINT_END",RENDERING_BEGIN:"RENDERING_BEGIN",RENDERING_END:"RENDERING_END",PAGE_READY:"PAGE_READY",ERROR:"ERROR",UPDATE_UI:"UPDATE_UI",INTERACTIVE_ACTION_EXECUTING:"INTERACTIVE_ACTION_EXECUTING",INTERACTIVE_ACTION_ENTER:"INTERACTIVE_ACTION_ENTER",INTERACTIVE_ACTION_LEAVE:"INTERACTIVE_ACTION_LEAVE",VIEWER_TOOLTIP_OPENING:"VIEWER_TOOLTIP_OPENING",SEND_EMAIL_BEGIN:"SEND_EMAIL_BEGIN",SEND_EMAIL_END:"SEND_EMAIL_END",PARAMETERS_LOADED:"PARAMETERS_LOADED"};function K(e){var t=e.controller;if(!t)throw"No controller (telerikReporting.reportViewerController) has been specified.";var r=e.settings,a=r.getHistory()||{records:[],position:-1};function n(){var e=a.records;return e.length>0?e[a.position]:null}function o(){r.setHistory(a)}function s(e){!function(){var e=a.records.length-1;for(;e>=0&&!0===a.records[e].temp;)a.records.splice(e,1),a.position>=e&&a.position--,e--}();var r,s,l,c=n(),h=t.getReportSource(),d={firstReportSource:c?.reportSource,secondReportSource:h};c&&i.reportSourcesAreEqual(d)||(r={reportSource:h,pageNumber:1,temp:e},s=a.records,l=a.position,(s=Array.prototype.slice.call(s,0,l+1)).push(r),a.records=s,a.position=s.length-1,o())}function l(e,i){t.setReportDocumentId(e.reportDocumentId),t.setViewMode(e.viewMode),t.setReportSource(e.reportSource),t.refreshReport(!1,e.reportDocumentId,i),t.navigateToPage(e.pageNumber)}function c(e){var t=a.position,i=a.records.length,r=t+e;return 0<=r&&r<i}function h(e){var t=a.position,i=a.records.length,r=t+e;if(r<0?r=0:r>=i&&(r=i-1),r!=t){var s=n(),c=s.reportSource?s.reportSource.report:"";a.position=r,o();var h=n();l(h,c!==(h.reportSource?h.reportSource.report:""))}}return t.on("loadedReportChange",(()=>{s(!0)})).on("currentPageChanged",(()=>{var e;(e=n())&&(e.pageNumber=t.getCurrentPageNumber(),e.viewMode=t.getViewMode(),e.reportDocumentId=t.getReportDocumentId(),o())})).onAsync("reportLoadComplete",(async()=>{s(!1)})).on("clientExpired",(()=>{for(var e=a.records,t=0;t<e.length;t++)e[t].reportDocumentId=null})),{back:()=>{h(-1)},forward:()=>{h(1)},canMoveBack:()=>c(-1),canMoveForward:()=>c(1),loadCurrent:()=>{var e=n();return e&&l(e,!1),Boolean(e)}}}window.telerikReportViewer||={},window.telerikReportViewer.sr||={controllerNotInitialized:"Controller is not initialized.",noReportInstance:"No report instance.",missingTemplate:"!obsolete resource!",noReport:"No report.",noReportDocument:"No report document.",missingOrInvalidParameter:"There are missing or invalid parameter values. Please input valid data for the following parameters:\n",invalidParameter:"Please input a valid value.",invalidDateTimeValue:"Please input a valid date.",parameterIsEmpty:"Parameter value cannot be empty.",cannotValidateType:"Cannot validate parameter of type {type}.",loadingFormats:"Loading...",loadingReport:"Loading report...",loadingParameters:"Loading parameters...",autoRunDisabled:"Please validate the report parameter values and press Preview to generate the report.",preparingDownload:"Preparing document to download. Please wait...",preparingPrint:"Preparing document to print. Please wait...",errorLoadingTemplates:"Error loading the report viewer's templates. (templateUrl = '{0}').",errorServiceUrl:"Cannot access the Reporting REST service. (serviceUrl = '{0}'). Make sure the service address is correct and enable CORS if needed. (https://enable-cors.org)",errorServiceVersion:"The version of the Report Viewer '{1}' does not match the version of the Reporting REST Service '{0}'. Please make sure both are running same version.",loadingReportPagesInProgress:"{0} pages loaded so far...",loadedReportPagesComplete:"Done. Total {0} pages loaded.",noPageToDisplay:"No page to display.",errorDeletingReportInstance:"Error deleting report instance: '{0}'.",errorRegisteringViewer:"Error registering the viewer with the service.",noServiceClient:"No serviceClient has been specified for this controller.",errorRegisteringClientInstance:"Error registering client instance.",errorCreatingReportInstance:"Error creating report instance (Report = '{0}').",errorCreatingReportDocument:"Error creating report document (Report = '{0}'; Format = '{1}').",unableToGetReportParameters:"Unable to get report parameters.",errorObtainingAuthenticationToken:"Error obtaining authentication token.",clientExpired:"Click 'Refresh' to restore client session.",promisesChainStopError:"Error shown. Throwing promises chain stop error.",renderingCancelled:"Report processing was canceled.",tryReportPreview:"The report may now be previewed.",parameterEditorSelectNone:"clear selection",parameterEditorSelectAll:"select all",parametersAreaPreviewButton:"Preview",menuNavigateBackwardText:"Navigate Backward",menuNavigateBackwardTitle:"Navigate Backward",menuNavigateForwardText:"Navigate Forward",menuNavigateForwardTitle:"Navigate Forward",menuStopRenderingText:"Stop Rendering",menuStopRenderingTitle:"Stop Rendering",menuRefreshText:"Refresh",menuRefreshTitle:"Refresh",menuFirstPageText:"First Page",menuFirstPageTitle:"First Page",menuLastPageText:"Last Page",menuLastPageTitle:"Last Page",menuPreviousPageTitle:"Previous Page",menuNextPageTitle:"Next Page",menuPageNumberTitle:"Page Number Selector",menuDocumentMapTitle:"Toggle Document Map",menuParametersAreaTitle:"Toggle Parameters Area",menuZoomInTitle:"Zoom In",menuZoomOutTitle:"Zoom Out",menuPageStateTitle:"Toggle FullPage/PageWidth",menuPrintText:"Print...",menuContinuousScrollText:"Toggle Continuous Scrolling",menuSendMailText:"Send an email",menuPrintTitle:"Print",menuContinuousScrollTitle:"Toggle Continuous Scrolling",menuSendMailTitle:"Send an email",menuExportText:"Export",menuExportTitle:"Export",menuPrintPreviewText:"Toggle Print Preview",menuPrintPreviewTitle:"Toggle Print Preview",menuSearchText:"Search",menuSearchTitle:"Toggle Search",menuAiPromptTitle:"Toggle AI Prompt",menuSideMenuTitle:"Toggle Side Menu",sendEmailFromLabel:"From:",sendEmailToLabel:"To:",sendEmailCCLabel:"CC:",sendEmailSubjectLabel:"Subject:",sendEmailFormatLabel:"Format:",sendEmailSendLabel:"Send",sendEmailCancelLabel:"Cancel",ariaLabelPageNumberSelector:"Page number selector. Showing page {0} of {1}.",ariaLabelPageNumberEditor:"Page number editor",ariaLabelExpandable:"Expandable",ariaLabelSelected:"Selected",ariaLabelParameter:"parameter",ariaLabelErrorMessage:"Error message",ariaLabelParameterInfo:"Contains {0} options",ariaLabelMultiSelect:"Multiselect",ariaLabelMultiValue:"Multivalue",ariaLabelSingleValue:"Single value",ariaLabelParameterDateTime:"DateTime",ariaLabelParameterString:"String",ariaLabelParameterNumerical:"Numerical",ariaLabelParameterBoolean:"Boolean",ariaLabelParametersAreaPreviewButton:"Preview the report",ariaLabelMainMenu:"Main menu",ariaLabelCompactMenu:"Compact menu",ariaLabelSideMenu:"Side menu",ariaLabelDocumentMap:"Document map area",ariaLabelDocumentMapSplitter:"Document map area splitbar.",ariaLabelParametersAreaSplitter:"Parameters area splitbar.",ariaLabelPagesArea:"Report contents area",ariaLabelSearchDialogArea:"Search area",ariaLabelAiPromptDialogArea:"AI prompt area",ariaLabelSendEmailDialogArea:"Send email area",ariaLabelSearchDialogStop:"Stop search",ariaLabelSearchDialogOptions:"Search options",ariaLabelSearchDialogNavigateUp:"Navigate up",ariaLabelSearchDialogNavigateDown:"Navigate down",ariaLabelSearchDialogMatchCase:"Match case",ariaLabelSearchDialogMatchWholeWord:"Match whole word",ariaLabelSearchDialogUseRegex:"Use regex",ariaLabelMenuNavigateBackward:"Navigate backward",ariaLabelMenuNavigateForward:"Navigate forward",ariaLabelMenuStopRendering:"Stop rendering",ariaLabelMenuRefresh:"Refresh",ariaLabelMenuFirstPage:"First page",ariaLabelMenuLastPage:"Last page",ariaLabelMenuPreviousPage:"Previous page",ariaLabelMenuNextPage:"Next page",ariaLabelMenuPageNumber:"Page number selector",ariaLabelMenuDocumentMap:"Toggle document map",ariaLabelMenuParametersArea:"Toggle parameters area",ariaLabelMenuZoomIn:"Zoom in",ariaLabelMenuZoomOut:"Zoom out",ariaLabelMenuPageState:"Toggle FullPage/PageWidth",ariaLabelMenuPrint:"Print",ariaLabelMenuContinuousScroll:"Continuous scrolling",ariaLabelMenuSendMail:"Send an email",ariaLabelMenuExport:"Export",ariaLabelMenuPrintPreview:"Toggle print preview",ariaLabelMenuSearch:"Search in report contents",ariaLabelMenuSideMenu:"Toggle side menu",ariaLabelSendEmailFrom:"From email address",ariaLabelSendEmailTo:"Recipient email address",ariaLabelSendEmailCC:"Carbon Copy email address",ariaLabelSendEmailSubject:"Email subject:",ariaLabelSendEmailFormat:"Report format:",ariaLabelSendEmailSend:"Send email",ariaLabelSendEmailCancel:"Cancel sending email",searchDialogTitle:"Search in report contents",searchDialogSearchInProgress:"searching...",searchDialogNoResultsLabel:"No results",searchDialogResultsFormatLabel:"Result {0} of {1}",searchDialogStopTitle:"Stop Search",searchDialogNavigateUpTitle:"Navigate Up",searchDialogNavigateDownTitle:"Navigate Down",searchDialogMatchCaseTitle:"Match Case",searchDialogMatchWholeWordTitle:"Match Whole Word",searchDialogUseRegexTitle:"Use Regex",searchDialogCaptionText:"Find",searchDialogPageText:"page",sendEmailDialogTitle:"Send Email",sendEmailValidationEmailRequired:"Email field is required",sendEmailValidationEmailFormat:"Email format is not valid",sendEmailValidationSingleEmail:"The field accepts a single email address only",sendEmailValidationFormatRequired:"Format field is required",errorSendingDocument:"Error sending report document (Report = '{0}').",aiPromptConsentDialogTitle:"Before you start with AI",aiPromptConsentAgreeLabel:"Consent",aiPromptConsentRejectLabel:"Cancel"};var J=J||{};const X=(window.telerikReportViewer||{}).sr||{},Y=$.extend({},J,X);var Z,Q={MultiSelect:(e,t)=>Boolean(e.availableValues)&&e.multivalue&&(!t||!t.multiSelect||t.multiSelect!==H.COMBO_BOX),MultiSelectCombo:(e,t)=>Boolean(e.availableValues)&&e.multivalue&&t&&t.multiSelect&&t.multiSelect===H.COMBO_BOX,SingleSelect:(e,t)=>Boolean(e.availableValues)&&!e.multivalue&&(!t||!t.singleSelect||t.singleSelect!==H.COMBO_BOX),SingleSelectCombo:(e,t)=>Boolean(e.availableValues)&&!e.multivalue&&t&&t.singleSelect&&t.singleSelect===H.COMBO_BOX,MultiValue:e=>Boolean(e.multivalue),DateTime:e=>e.type===G.DATETIME,String:e=>e.type===G.STRING,Number:e=>{switch(e.type){case G.INTEGER:case G.FLOAT:return!0;default:return!1}},Boolean:e=>e.type===G.BOOLEAN,Default:e=>!0},ee={formatValue:e=>{var t="";return e&&[].concat(e).forEach((e=>{t.length>0&&(t+="\n"),t+=e})),t},parseValues:e=>(""+e).split("\n")};function te(e){function t(t){return!!n(t.keyCode)||(i=$(e).val()+String.fromCharCode(t.charCode),/^(\-|\+)?([0-9]*)$/.test(i));var i}function i(e){}return $(e).on("keypress",t).on("paste",i),{dispose:()=>{!function(e){$(e).off("keypress",t).off("paste",i)}(e)}}}function ie(e){function t(t){return!!n(t.keyCode)||(i=$(e).val()+String.fromCharCode(t.charCode),/^(\-|\+)?([0-9]*(\.[0-9]*)?)$/.test(i));var i}function i(e){}return $(e).on("keypress",t).on("paste",i),{dispose:()=>{!function(e){$(e).off("keypress",t).off("paste",i)}(e)}}}function re(e,t,i){(e?$.fn.addClass:$.fn.removeClass).call(i,t)}function ae(e,t){re(!t,"k-disabled",e)}function ne(e,t,i,r,a){r||(r="");var n=d("{0}. {1} {2}. {3}",[i,t,Y.ariaLabelParameter,r]);e.attr("aria-label",n),le(e,a)}var oe=0;function se(e){if(!Z){var t=$(".trv-parameters-area-content");if(t.length>0){var r=t.attr("tabIndex");r&&(Z=i.tryParseInt(r))}Z&&!isNaN(Z)||(Z=300)}var a=e.closest(".trv-parameter-value"),n=a.find(".trv-select-all"),o=a.find(".trv-select-none"),s=e.closest(".k-widget").find(".k-input"),l=s&&s.length;n&&n.length&&n.attr("tabindex",Z+ ++oe),o&&o.length&&o.attr("tabindex",Z+ ++oe),l?s.attr("tabindex",Z+ ++oe):e.attr("tabindex",Z+ ++oe)}function le(e,t){var i=d(" {0}:",[Y.ariaLabelErrorMessage]),r=e.attr("aria-label");if(r){var a=r.indexOf(i);a>-1&&(r=r.substring(0,a)),t&&""!==t?(e.attr("aria-required",!0),e.attr("aria-invalid",!0),r+=i+t):e.removeAttr("aria-invalid"),e.attr("aria-label",r)}}function ce(e){return kendo.version>="2017.3.1018"||e}var he=[{match:Q.MultiSelect,createEditor:(e,t)=>{var r=$(e),a=!0;r.html(t.templates["trv-parameter-editor-available-values-multiselect"]);var n,o,s,l,c=r.find(".trv-list"),h=r.find(".trv-select-all"),u=r.find(".trv-select-none"),p=t.parameterChanged;function m(e){l&&(function(e){var t=c.find(".trv-listviewitem");Array.from(t).forEach((t=>{var i=$(t),r=e.filter(i).length>0;i.attr("aria-selected",r)}))}(e),function(e){var t=o.availableValues,i=$.map(e,(e=>t[$(e).index()].value));f();var r=!o.autoRefresh&&!o.childParameters;s=window.setTimeout((()=>{v(o.value,i)||p(o,i),s=null}),r?0:1e3)}(e))}function f(){s&&window.clearTimeout(s)}function b(){return $(n.element).find(".k-selected")}function P(e){if(a){var t=$(e.target),i=n.select();t.hasClass("k-selected")?i.splice($.inArray(t[0],i),1):i.push(t),n.clearSelection(),n.select(i),n.trigger("change")}}function E(e){m(b())}function S(e){if(a&&32===e.which){var t=n.element.find(".k-focus");t.length>0&&(t.toggleClass("k-selected"),m(b()),e.preventDefault())}}function w(e){!function(e){Array.isArray(e)||(e=[e]);var t=c.find(".trv-listviewitem");$.each(o.availableValues,((r,a)=>{var n,o,s=!1;$.each(e,((e,t)=>{var r=a.value;return t instanceof Date&&(r=i.parseToLocalDate(a.value)),!(s=g(t,r))})),n=$(t[r]),re(o=s,"k-selected",n),n.attr("aria-selected",o)}))}(e),m(b())}return h.length>0&&(h.text(Y[h.text()]),h=new kendo.ui.Button(h,{size:"small",click:e=>{e.preventDefault(),a&&w(o.availableValues.map((e=>e.value)))}})),u.length>0&&(u.text(Y[u.text()]),u=new kendo.ui.Button(u,{size:"small",click:e=>{e.preventDefault(),a&&w([])}})),{beginEdit:e=>{l=!1,n&&(n.element.off("touch click",".trv-listviewitem",P),n.element.off("keydown",S)),o=e;try{n=c.kendoListView({template:kendo.template('<div class="trv-listviewitem" style="cursor: pointer">${name}</div>'),dataSource:{data:o.availableValues},selectable:"MULTIPLE",navigatable:ce(t.enableAccessibility),change:E}).data("kendoListView")}catch(e){throw console.error("Instantiation of Kendo ListView as MultiSelect parameter editor threw an exception",e),e}se(c),w(o.value),n.element.off().on("touch click",".trv-listviewitem",P),n.element.on("keydown",S),l=!0},enable:e=>{ae(c,a=e)},clearPendingChange:f,addAccessibility:e=>{var t=d(Y.ariaLabelParameterInfo,[e.availableValues.length]);ne(c,Y.ariaLabelMultiSelect,e.text,t,e.Error),c.attr("aria-multiselectable","true");var i=c.find(".trv-listviewitem");Array.from(i).forEach((e=>{$(e).attr("aria-label",e.innerText)}))},setAccessibilityErrorState:e=>{le(c,e.Error)},destroy:()=>{n.destroy()}}}},{match:Q.MultiSelectCombo,createEditor:(e,t)=>{var i,r,a,n,o,s,l=$(e),c=!0,h=t.parameterChanged,u=!0;function p(e){!function(e){m();var t=!s.autoRefresh&&!s.childParameters;o=window.setTimeout((()=>{v(s.value,e)||h(s,e),o=null}),t?0:1e3)}(e)}function m(){o&&window.clearTimeout(o)}function g(){u&&p(n.value())}return l.html(t.templates["trv-parameter-editor-available-values-multiselect-combo"]),i=l.find(".trv-combo"),(a=l.find(".trv-select-all")).length>0&&(a.text(Y[a.text()]),a=new kendo.ui.Button(a,{size:"small",click:e=>{if(e.preventDefault(),c){var t=$.map(s.availableValues,(e=>e.value));n.value(t),n.trigger("change")}}})),(r=l.find(".trv-select-none")).length>0&&(r.text(Y[r.text()]),r=new kendo.ui.Button(r,{size:"small",click:e=>{e.preventDefault(),n.value([]),n.trigger("change")}})),{beginEdit:e=>{n&&n.unbind("change",g),s=e;try{n=i.kendoMultiSelect({itemTemplate:'<div class="trv-editoritem">${name}</div>',dataSource:s.availableValues,dataTextField:"name",dataValueField:"value",value:s.value,filter:"contains",autoClose:!1,open:()=>{u=!1},close:e=>{u=!0,g()},autoWidth:!0,clearButton:!1}).data("kendoMultiSelect")}catch(e){throw console.error("Instantiation of Kendo MultiSelect as MultiSelectCombo parameter editor threw an exception",e),e}se(i),n.bind("change",g)},enable:e=>{c=e,n.enable(e)},clearPendingChange:m,addAccessibility:e=>{var t=n.input,i=d(Y.ariaLabelParameterInfo,[e.availableValues.length]);ne(t,Y.ariaLabelMultiSelect,e.text,i,e.Error);var r=n.items();Array.from(r).forEach((e=>{$(e).attr("aria-label",e.innerText)}))},setAccessibilityErrorState:e=>{le(i,e.Error)},destroy:()=>{n.destroy()}}}},{match:Q.SingleSelect,createEditor:(e,t)=>{var r=$(e),a=!0;r.html(t.templates["trv-parameter-editor-available-values"]);var n,o,s=r.find(".trv-list"),l=r.find(".trv-select-none"),c=t.parameterChanged;function h(e){!function(e){var t=o.availableValues,i=$.map(e,(e=>t[$(e).index()].value));Array.isArray(i)&&(i=i[0]);c(o,i)}(e)}function u(){h(n.select())}function p(e){var t,r;se(e),t=o.value,r=s.find(".trv-listviewitem"),$.each(o.availableValues,((e,a)=>{var o=a.value;return t instanceof Date&&(o=i.parseToLocalDate(a.value)),!g(t,o)||(n.select(r[e]),!1)})),n.bind("change",u)}return l.length>0&&(l.text(Y[l.text()]),l=new kendo.ui.Button(l,{size:"small",click:e=>{e.preventDefault(),n.clearSelection(),n.trigger("change")}})),{beginEdit:e=>{n&&n.unbind("change",u),o=e;try{n=s.kendoListView({template:'<div class="trv-listviewitem">${name}</div>',dataSource:{data:o.availableValues},selectable:!0,navigatable:ce(t.enableAccessibility)}).data("kendoListView")}catch(e){throw console.error("Instantiation of Kendo ListView as SingleSelect parameter editor threw an exception",e),e}p(s)},enable:e=>{ae(s,a=e),a?(n.bind("change",u),s.addClass("k-selectable")):(n.unbind("change",u),s.removeClass("k-selectable"))},addAccessibility:e=>{var t=d(Y.ariaLabelParameterInfo,[e.availableValues.length]);ne(s,Y.ariaLabelSingleValue,e.text,t,e.Error);var i=s.find(".trv-listviewitem");Array.from(i).forEach((e=>{$(e).attr("aria-label",e.innerText)}))},setAccessibilityErrorState:e=>{le(s,e.Error)},destroy:()=>{n.destroy()}}}},{match:Q.SingleSelectCombo,createEditor:(e,t)=>{var i,r,a,n,o=$(e),s=t.parameterChanged;function l(e,t){!function(e,t){var i=t||"";!t&&e>=0&&(i=n.availableValues[e].value);s(n,i)}(e,t)}function c(e){l(a.select(),e.sender.value())}return o.html(t.templates["trv-parameter-editor-available-values-combo"]),i=o.find(".trv-combo"),(r=o.find(".trv-select-none")).length>0&&(r.text(Y[r.text()]),r=new kendo.ui.Button(r,{size:"small",click:e=>{e.preventDefault(),a.value(""),a.trigger("change")}})),{beginEdit:e=>{a&&a.unbind("change",c),n=e;try{a=i.kendoComboBox({template:'<div class="trv-editoritem">${name}</div>',dataSource:n.availableValues,dataTextField:"name",dataValueField:"value",value:n.value,filter:"contains",suggest:!0,clearButton:!1}).data("kendoComboBox")}catch(e){throw console.error("Instantiation of Kendo ComboBox as SingleSelectCombo parameter editor threw an exception",e),e}se(i),a.bind("change",c)},enable:e=>{a.enable(e)},addAccessibility:e=>{var t=a.input,i=d(Y.ariaLabelParameterInfo,[e.availableValues.length]);ne(t,Y.ariaLabelSingleValue,e.text,i,e.Error);var r=a.items();Array.from(r).forEach((e=>{$(e).attr("aria-label",e.innerText)}))},setAccessibilityErrorState:e=>{le(i,e.Error)},destroy:()=>{a.destroy()}}}},{match:Q.MultiValue,createEditor:(e,t)=>{var i,r=$(e);r.html(t.templates["trv-parameter-editor-multivalue"]);var a=r.find("textarea").on("change",(e=>{t.parameterChanged&&t.parameterChanged(i,ee.parseValues(e.currentTarget.value))}));return{beginEdit:e=>{var t;i=e,t=e.value,i.value=t,a.val(ee.formatValue(t)),se(a)},enable:e=>{ae(a,e),a.prop("disabled",!e)},addAccessibility:e=>{ne(a,Y.ariaLabelMultiValue,e.text,null,e.Error)},setAccessibilityErrorState:e=>{le(a,e.Error)}}}},{match:Q.DateTime,createEditor:(e,t)=>{var i,r=$(e);r.html(t.templates["trv-parameter-editor-datetime"]);try{var a=r.find("input[type=datetime]").kendoDatePicker({change:e=>{var r=t.parameterChanged;if(r){var a=e.sender.value();null!==a&&(a=p(a)),r(i,a)}}}),n=a.data("kendoDatePicker")}catch(e){throw console.error("Instantiation of Kendo DatePicker as DateTime parameter editor threw an exception",e),e}return{beginEdit:e=>{i=e,function(e){i.value=e;var t=null;try{e&&(t=m(e))}catch(e){t=null}n.value(t)}(e.value),se(a)},enable:e=>{n.enable(e),ae(a,e)},addAccessibility:e=>{ne(a,Y.ariaLabelParameterDateTime,e.text,null,e.Error),a.attr("aria-live","assertive")},setAccessibilityErrorState:e=>{le(a,e.Error)},destroy:()=>{n.destroy()}}}},{match:Q.String,createEditor:(e,t)=>{var i,r=$(e);r.html(t.templates["trv-parameter-editor-text"]);var a=r.find('input[type="text"]').change((()=>{t.parameterChanged&&t.parameterChanged(i,a.val())}));return{beginEdit:e=>{var t;i=e,t=e.value,i.value=t,a.val(t),se(a)},enable:e=>{a.prop("disabled",!e),ae(a,e)},addAccessibility:e=>{ne(a,Y.ariaLabelParameterString,e.text,null,e.Error),a.attr("aria-live","assertive")},setAccessibilityErrorState:e=>{le(a,e.Error)}}}},{match:Q.Number,createEditor:(e,t)=>{var i,r,a=$(e);a.html(t.templates["trv-parameter-editor-number"]);var n=a.find("input[type=number]").on("change",(()=>{t.parameterChanged&&t.parameterChanged(i,n.val())}));return{beginEdit:e=>{r&&r.dispose(),i=e,n.val(i.value),r=i.type===G.INTEGER?te(n):ie(n),se(n)},enable:e=>{n.prop("disabled",!e),ae(n,e)},addAccessibility:e=>{ne(n,Y.ariaLabelParameterNumerical,e.text,null,e.Error),n.attr("aria-live","assertive")},setAccessibilityErrorState:e=>{le(n,e.Error)}}}},{match:Q.Boolean,createEditor:(e,t)=>{var i,r=$(e);r.html(t.templates["trv-parameter-editor-boolean"]);var a=r.find("input[type=checkbox]").on("change",(e=>{t.parameterChanged&&t.parameterChanged(i,e.currentTarget.checked)}));return{beginEdit:e=>{var t;i=e,t=e.value,i.value=t,a[0].checked=!0===t,se(a)},enable:e=>{ae(a,e),a.attr("disabled",!e)},addAccessibility:e=>{ne(a,Y.ariaLabelParameterBoolean,e.text,null,e.Error),a.attr("aria-live","assertive")},setAccessibilityErrorState:e=>{le(a,e.Error)}}}},{match:Q.Default,createEditor:(e,t)=>{var i=$(e);return i.html('<div class="trv-parameter-editor-generic"></div>'),{beginEdit:e=>{i.find(".trv-parameter-editor-generic").text(e.Error?"(error)":e.value)},enable:e=>{}}}}],de=function(){var e={};function t(e,t,i,r){var a=[].concat(t).map((t=>function(e,t,i){if(e.availableValues){if(!Array.from(e.availableValues).some((e=>i(t,e.value)))){if(e.allowNull&&!t)return t;throw Y.invalidParameter}}return t}(e,i(t),r)));if(e.multivalue){if(null==t||0==t.length){if(e.allowNull)return t;throw Y.invalidParameter}return a}return a[0]}function r(e,t){return e.allowNull&&-1!=[null,"",void 0].indexOf(t)}return e[G.STRING]={validate:(e,i)=>t(e,i,(t=>{if(!t){if(e.allowNull)return null;if(e.allowBlank)return"";throw Y.parameterIsEmpty}return t}),((e,t)=>e==t))},e[G.FLOAT]={validate:(e,a)=>t(e,a,(t=>{var a=i.tryParseFloat(t);if(isNaN(a)){if(r(e,t))return null;throw Y.parameterIsEmpty}return a}),((e,t)=>i.tryParseFloat(e)==i.tryParseFloat(t)))},e[G.INTEGER]={validate:(e,a)=>t(e,a,(t=>{var a=i.tryParseInt(t);if(isNaN(a)){if(r(e,t))return null;throw Y.parameterIsEmpty}return a}),((e,t)=>i.tryParseInt(e)==i.tryParseFloat(t)))},e[G.DATETIME]={validate:(e,r)=>t(e,r,(t=>{if(e.allowNull&&(null===t||""===t||void 0===t))return null;if(!isNaN(Date.parse(t)))return e.availableValues?t:i.parseToLocalDate(t);throw Y.invalidDateTimeValue}),((e,t)=>(e=i.parseToLocalDate(e),t=i.parseToLocalDate(t),e.getTime()==t.getTime())))},e[G.BOOLEAN]={validate:(e,i)=>t(e,i,(t=>{if(-1!=["true","false"].indexOf(String(t).toLowerCase()))return Boolean(t);if(r(e,t))return null;throw Y.parameterIsEmpty}),((e,t)=>Boolean(e)==Boolean(t)))},{validate:(t,i)=>{var r=e[t.type];if(!r)throw d(Y.cannotValidateType,t);return r.validate(t,i)}}}();function ue(e,t,i){var r,a=!!e.querySelectorAll&&e.querySelectorAll(".trv-menu-small")[0],n={small:{documentMapVisible:!1,parametersAreaVisible:!1,onDocumentMapVisibleChanged:(e,t)=>{t.visible&&i.setParametersAreaVisible({visible:!1})},onParameterAreaVisibleChanged:(e,t)=>{t.visible&&i.setDocumentMapVisible({visible:!1})},onBeforeLoadReport:()=>{i.setParametersAreaVisible({visible:!1}),i.setDocumentMapVisible({visible:!1})},onNavigateToPage:()=>{i.setParametersAreaVisible({visible:!1}),i.setDocumentMapVisible({visible:!1})}},large:{documentMapVisible:!0,parametersAreaVisible:!0}};function o(e){var t,i=p();if(i!==r){var a=n[r],o=n[i];r=i,e&&e.call(void 0,a,o),g((t=o).documentMapVisible),v(t.parametersAreaVisible)}}function s(e,t){u("onDocumentMapVisibleChanged",arguments)}function l(e,t){u("onParameterAreaVisibleChanged",arguments)}function c(){u("onNavigateToPage",arguments)}function h(){o(((e,t)=>{m(e)}))}function d(){o(null)}function u(e,t){var i=n[r],a=i[e];"function"==typeof a&&a.apply(i,t)}function p(){var e=$(window).width()/parseFloat($("body").css("font-size"));return a&&e<=40.5?"small":"large"}function m(e){e.documentMapVisible=g(),e.parametersAreaVisible=v()}function g(){if(0===arguments.length){var e={};return i.getDocumentMapState(e),e.visible}return i.setDocumentMapVisible({visible:Boolean(arguments[0])}),this}function v(){if(0===arguments.length){var e={};return i.getParametersAreaState(e),e.visible}return i.setParametersAreaVisible({visible:Boolean(arguments[0])}),this}return r=p(),m(n.large),{attach:function(){window.addEventListener("resize",h),t.onAsync("beforeLoadReport",(async()=>function(){u("onBeforeLoadReport",arguments)}())).on("navigateToPage",c).onAsync("reportLoadComplete",(async()=>function(){u("onReportLoadComplete",arguments)}())),i.setDocumentMapVisible(s),i.setParametersAreaVisible(l),i.cssLoaded(d)},dispose:function(){window.removeEventListener("resize",h)}}}function pe(e){var t={ExportInProgress:1,PrintInProgress:2,RenderInProgress:4};function r(e){return!!(c&e)}function a(e,t){t?c|=e:c&=~e}var n,o=e.controller,s=e.notificationService,l=e.history,c=0,h=e.commands;if(!o)throw"No controller (telerikReporting.ReportViewerController) has been specified.";if(!s)throw"No notificationService (telerikReporting.NotificationService) has been specified.";function d(){n||(n=!0,window.setTimeout((()=>{try{e=o.getReportSource(),a=o.getPageCount(),c=o.getCurrentPageNumber(),d=e&&e.report,p=(u=d&&a>0)&&c<a,m=u&&c>1,g=u&&c,y={},s.getDocumentMapState(y),v=y,f=function(){var e={};return s.getParametersAreaState(e),e}(),b=function(){var e={};return s.getSendEmailDialogState(e),e}(),P=o.getSearchInitiated(),E=o.getAiPromptInitiated(),S=r(t.RenderInProgress),w=r(t.PrintInProgress),C=r(t.ExportInProgress),h.goToFirstPage.setEnabled(m),h.goToPrevPage.setEnabled(m),h.stopRendering.setEnabled(d&&S),h.goToLastPage.setEnabled(p),h.goToNextPage.setEnabled(p),h.goToPage.setEnabled(u),h.print.setEnabled(u&&!S&&!w),h.export.setEnabled(u&&!S&&!C),h.refresh.setEnabled(d),h.historyBack.setEnabled(l&&l.canMoveBack()),h.historyForward.setEnabled(l&&l.canMoveForward()),h.toggleDocumentMap.setEnabled(d&&v.enabled),h.toggleDocumentMap.setChecked(v.enabled&&v.visible),h.toggleParametersArea.setEnabled(d&&f.enabled),h.toggleParametersArea.setChecked(f.enabled&&f.visible),h.togglePrintPreview.setEnabled(u).setChecked(o.getViewMode()==i.ViewMode.PrintPreview),h.pageMode.setEnabled(u).setChecked(o.getPageMode()==i.PageMode.ContinuousScroll),h.zoom.setEnabled(g),h.zoomIn.setEnabled(g),h.zoomOut.setEnabled(g),h.toggleZoomMode.setEnabled(g).setChecked(o.getScaleMode()==i.ScaleMode.FitPage||o.getScaleMode()==i.ScaleMode.FitPageWidth),h.toggleSearchDialog.setEnabled(u).setChecked(P),h.toggleSendEmailDialog.setEnabled(u).setChecked(b.visible),h.toggleAiPromptDialog.setEnabled(u).setChecked(E),s.updateUI(null),s.pageNumberChange(c),s.pageCountChange(a)}finally{n=!1}var e,a,c,d,u,p,m,g,v,f,b,P,E,S,w,C,y}),10))}s.setParametersAreaVisible(d),s.setDocumentMapVisible(d),s.updateUIInternal(d),s.setSearchDialogVisible(d),s.setSendEmailDialogVisible(d),o.on("scaleModeChanged",(e=>{h.toggleZoomMode.setChecked(e==i.ScaleMode.FitPage||e===i.ScaleMode.FitPageWidth)})).on("currentPageChanged",d).onAsync("beforeLoadReport",(async()=>{a(t.RenderInProgress,!0),d()})).on("reportLoadProgress",d).onAsync("reportLoadComplete",(async()=>{a(t.RenderInProgress,!1),d()})).on("reportSourceChanged",d).on("viewModeChanged",d).on("pageModeChanged",d).on("setUIState",(e=>{a(t[e.operationName],e.inProgress),d()})).on("error",(()=>{a(t.ExportInProgress,!1),a(t.PrintInProgress,!1),a(t.RenderInProgress,!1),d()})).on("renderingStopped",(()=>{a(t.RenderInProgress,!1),d()})),d()}var me={};class ge extends EventTarget{_events;_eventsCount;constructor(){super(),this._events={},this._eventsCount=0}addListener(e,t){if("function"!=typeof t)throw new TypeError("listener must be a function");function i(e){t.call(this,e,...e.detail)}return this._events[e]||(this._events[e]=[]),i.listener=t,this._events[e].push(i),this._eventsCount++,this.addEventListener(e,i.bind(this)),this}on(e,t){return this.addListener(e,t)}trigger(e,...t){if(!this._events[e])return;const i=new CustomEvent(e,{detail:t,cancelable:!0});return this.dispatchEvent(i)}emit(e,...t){return this.trigger(e,...t)}removeListener(e,t){return this._events[e]?(this._events[e]=this._events[e].filter((i=>i.listener!==t||(this.removeEventListener(e,i),!1))),0===this._events[e].length&&(delete this._events[e],this._eventsCount--),this):this}removeAllListeners(e){return void 0===e?(Object.keys(this._events).forEach((e=>{this.removeAllListeners(e)})),this):(this._events[e]&&(this._events[e].forEach((t=>{this.removeEventListener(e,t)})),delete this._events[e],this._eventsCount--),this)}off(e,t){return void 0===e?this.removeAllListeners():void 0===t?this.removeAllListeners(e):this.removeListener(e,t)}}var ve={},fe="pa.parametersReady",be="pa.Error";class Pe{options;viewerOptions;element;$element;eventEmitter;controller;notificationService;parameters;editors;parameterEditors;initialParameterValues;recentParameterValues;processedParameterValues;_parametersContainer;_parametersWrapper;$errorMessage;$previewButton;parameterContainerTemplate;parametersAreaVisible;parametersAreaNecessary;enableAccessibility;loadingCount;initialized;constructor(e,t,i){if(this.options=$.extend({},ve,t,i),this.element=e,this.eventEmitter=new ge,this.editors={},this.controller=this.options.controller,!this.controller)throw"No controller (telerikReporting.reportViewerController) has been specified.";if(this.notificationService=t.notificationService,!this.notificationService)throw"No notificationService (telerikReporting.NotificationService) has been specified.";this.parameterEditors=he,t.parameterEditors&&t.parameterEditors.length>0&&(this.parameterEditors=[].concat(t.parameterEditors,he)),this.recentParameterValues,this.parameters,this.initialParameterValues,this.processedParameterValues=void 0,this.$element=$(this.element),this._parametersContainer=this.element?.querySelector(".trv-parameters-area-content"),this._parametersWrapper=this.element?.querySelector(".trv-parameters-wrapper"),this.$errorMessage=this.$element.find(".trv-error-message"),this.$previewButton=this.$element.find(".trv-parameters-area-preview-button"),this.$previewButton.text(Y[this.$previewButton.text()]),this.$previewButton.attr("aria-label",Y[this.$previewButton.attr("aria-label")]),this.$previewButton.on("click",(e=>{e.preventDefault(),this.allParametersValid()&&this.applyParameters()})),this.parameterContainerTemplate=this.options.templates["trv-parameter"],this.parametersAreaVisible=!1!==this.options.parametersAreaVisible,this.enableAccessibility=this.options.enableAccessibility,this.loadingCount=0,this.parametersAreaNecessary=!1,this.initialized=!1,this.init()}init(){this.initialized||(this._attachEvents(),this.replaceStringResources(this.$element))}replaceStringResources(e){var t=e.find(".trv-parameters-area-preview-button");t&&(t.attr("aria-label",Y[t.attr("aria-label")]),t.text(Y[t.text()]))}toggleElementDisplay(e,t){e.style.display=t?"none":""}createParameterContainer(){return $(this.parameterContainerTemplate)}createParameterUI(e){var t=this.createParameterContainer(),i=t.find(".trv-parameter-value"),r=t.find(".trv-parameter-title"),a=t.find(".trv-parameter-error"),n=t.find(".trv-parameter-error-message"),o=t.find(".trv-parameter-use-default input"),s=this.options.parameters&&this.options.parameters.editors?this.options.parameters.editors:null,l=this.selectParameterEditorFactory(e,s),c=u(e.text),h=!e.isVisible;h&&(c+=" [<b>hidden</b>]"),r.html(c).attr("title",c),n.text(e.Error),(e.Error?$.fn.show:$.fn.hide).call(a);var d=l.createEditor(i,{templates:this.options.templates,parameterChanged:(e,t)=>{var i=document.querySelector(".trv-pages-area .trv-error-message ul li."+e.name);try{t=de.validate(e,t),a.hide(),i&&this.toggleElementDisplay(i,!0),this.onParameterChanged(e,t)}catch(t){i&&this.toggleElementDisplay(i,!1),e.Error=t,e.value=[],n.text(t),a.show(),this.enablePreviewButton(!1)}finally{this.setAccessibilityErrorState(e)}},enableAccessibility:this.enableAccessibility});(this.editors[e.id]=d,d.beginEdit(e),this.enableAccessibility&&!h&&d.addAccessibility(e),o.length>0)&&(o.on("click",(t=>{var i=$(t.currentTarget).is(":checked");i?(delete this.recentParameterValues[e.id],delete this.initialParameterValues[e.id],this.invalidateChildParameters(e),this.updateParameters(this.onLoadParametersSuccess.bind(this))):(this.recentParameterValues[e.id]=e.value,this.initialParameterValues[e.id]=e.value),d.enable(!i),this.trigger(fe,this.recentParameterValues)})),null!==this.initialParameterValues?e.id in this.initialParameterValues||(o.prop("checked",!0),d.enable(!1)):h&&(o.prop("checked",!0),d.enable(!1)));return t}setAccessibilityErrorState(e){var t=this.editors[e.id];t&&this.enableAccessibility&&t.setAccessibilityErrorState(e)}enablePreviewButton(e){e?(this.$previewButton.prop("disabled",!1),this.$previewButton.removeClass("k-disabled")):(this.$previewButton.prop("disabled",!0),this.$previewButton.addClass("k-disabled"))}selectParameterEditorFactory(e,t){return Array.from(this.parameterEditors).find((i=>i.match(e,t)))}showError(e){this.$errorMessage.text(e),(e?$.fn.addClass:$.fn.removeClass).call(this.$element,"trv-error")}showPreviewButton(e){(this.allParametersAutoRefresh(e)&&this.controller.autoRunEnabled?$.fn.removeClass:$.fn.addClass).call(this.$element,"preview")}allParametersAutoRefresh(e){return Array.from(e).every((e=>!e.isVisible||e.autoRefresh))}allParametersValid(){return Array.from(this.parameters).every((e=>!e.Error))}clearEditors(){Object.entries(this.editors).forEach((([e,t])=>{"function"==typeof t.destroy&&t.destroy()})),this.editors={}}fill(e){var t;this.recentParameterValues={},this.processedParameterValues={},this.parameters=e||[],this.clearEditors();var i=$("<div></div>");Array.from(this.parameters).forEach((e=>{try{e.value=de.validate(e,e.value)}catch(t){e.Error=e.Error||t}!Boolean(e.Error)?this.recentParameterValues[e.id]=e.value:e.Error=Y.invalidParameter,e.availableValues?this.processedParameterValues[e.id]={valueMember:e.value,displayMember:e.label,availableValues:e.availableValues,multivalue:e.multivalue}:this.processedParameterValues[e.id]=e.value,(e.isVisible||this.options.showHiddenParameters)&&(t=this.createParameterUI(e))&&i.append(t)})),void 0!==this.initialParameterValues&&(null===this.initialParameterValues?(this.initialParameterValues={},Array.from(this.parameters).forEach((e=>{e.isVisible?this.initialParameterValues[e.id]=e.value:delete this.recentParameterValues[e.id]}))):Array.from(this.parameters).forEach((e=>{e.id in this.initialParameterValues||delete this.recentParameterValues[e.id]}))),this._parametersWrapper&&(kendo.destroy(this._parametersWrapper),this._parametersWrapper.innerHTML="",this.parameters.length>0&&(this._parametersWrapper.append(...i.children().get()),this.enableAccessibility&&this._parametersWrapper.setAttribute("aria-label","Parameters area. Contains "+this.parameters.length+" parameters."))),this.showPreviewButton(this.parameters);var r=this.allParametersValid();this.enablePreviewButton(r),this.applyProcessedParameters()}applyParameters(){this.controller.setParameters($.extend({},this.recentParameterValues)),this.controller.previewReport(!1)}applyProcessedParameters(){this.controller.setProcessedParameterValues($.extend({},this.processedParameterValues))}allParametersValidForAutoRefresh(){for(var e=!0,t=this.parameters.length-1;e&&t>=0;t--){var i=this.parameters[t];e=i.id in this.recentParameterValues&&(Boolean(i.autoRefresh)||!i.isVisible)}return e}tryRefreshReport(){this.trigger(fe,this.recentParameterValues),this.allParametersValidForAutoRefresh()&&this.controller.autoRunEnabled&&this.applyParameters()}invalidateChildParameters(e){e.childParameters&&Array.from(e.childParameters).forEach((e=>{var t=this.getParameterById(e);t&&this.invalidateChildParameters(t),delete this.recentParameterValues[e],this.resetPendingParameterChange(e)}))}resetPendingParameterChange(e){if(this.editors){var t=this.editors[e];t&&"function"==typeof t.clearPendingChange&&t.clearPendingChange()}}onParameterChanged(e,t){if(delete e.Error,e.value=t,this.recentParameterValues[e.id]=t,void 0!==this.initialParameterValues?e.id in this.initialParameterValues&&(this.recentParameterValues[e.id]=t):this.recentParameterValues[e.id]=t,this.invalidateChildParameters(e),e.childParameters)this.updateParameters(this.tryRefreshReport.bind(this));else{var i=this.allParametersValid();if(this.enablePreviewButton(i),i){var r=document.querySelector(".trv-pages-area .trv-error-message");this.$previewButton.is(":visible")&&r&&(r.textContent=Y.tryReportPreview),this.tryRefreshReport()}}}getParameterById(e){if(this.parameters)for(var t=0;t<this.parameters.length;t++){var i=this.parameters[t];if(i.id===e)return i}return null}setParametersAreaVisibility(e){this.controller.setParametersAreaVisible({visible:e})}hasVisibleParameters(e){return(e||[]).some((e=>e.isVisible))}beginLoad(){this.loadingCount++,this.$element.addClass("trv-loading")}endLoad(){this.loadingCount>0&&0==--this.loadingCount&&this.$element.removeClass("trv-loading")}onLoadParametersComplete(e,t){this.showParametersAreaIfNecessary(e),this.fill(e),this.showError(""),this.parametersAreaNecessary&&this.parametersAreaVisible&&(this.showParametersArea(!0),this.enableAccessibility&&this.setSplitbarAccessibilityAttributes()),this.notificationService.updateUIInternal(),"function"==typeof t&&t(),this.endLoad()}showParametersAreaIfNecessary(e){this.parametersAreaNecessary=this.hasVisibleParameters(e)||!this.controller.autoRunEnabled,this.showParametersArea(this.parametersAreaVisible&&this.parametersAreaNecessary)}updateParameters(e){this.acceptParameters(this.controller.loadParameters(this.recentParameterValues),e)}acceptParameters(e,t){this.beginLoad(),e.then((e=>{this.onLoadParametersComplete(e,t)})).catch((e=>{this.endLoad(),this.clear(),this.$element.hasClass("k-hidden")||this.showError(e),this.trigger(be,e)}))}onLoadParametersSuccess(){null===this.initialParameterValues&&(this.initialParameterValues=$.extend({},this.recentParameterValues)),this.trigger(fe,this.recentParameterValues)}showParametersArea(e){var t=$("#"+this.options.viewerSelector+"-parameters-splitter").getKendoSplitter();if(t){var i=this.$element.prev();this.options.parametersAreaPosition!==W.TOP&&this.options.parametersAreaPosition!==W.LEFT||(i=this.$element.next()),(this.parametersAreaNecessary?$.fn.removeClass:$.fn.addClass).call(i,"k-hidden"),t.toggle(".trv-parameters-area",e)}}setSplitbarAccessibilityAttributes(){var e=this.$element.prev(),t=this.$element.find(".trv-parameters-area-content").attr("tabIndex");this.options.parametersAreaPosition!==W.TOP&&this.options.parametersAreaPosition!==W.LEFT||(e=this.$element.next()),e.attr("aria-label",Y.ariaLabelParametersAreaSplitter),e.attr("tabIndex",t)}_attachEvents(){this.controller.on("reloadParameters",(e=>{this.showError(),kendo.destroy(this._parametersWrapper),this._parametersWrapper.innerHTML="",this.acceptParameters(e,this.onLoadParametersSuccess.bind(this))})).onAsync("beforeLoadReport",(async()=>{this.loadingCount=0,this.beginLoad()})).onAsync("reportLoadComplete",(async e=>{this.showParametersAreaIfNecessary(this.parameters),this.showPreviewButton(this.parameters)})).on("error",(()=>this.endLoad())).on("pageReady",(()=>this.endLoad())),this.notificationService.getParametersAreaState(((e,t)=>{var i=!1;this.parameters&&(i=this.hasVisibleParameters(this.parameters)||!this.controller.autoRunEnabled),t.enabled=i,t.visible=this.parametersAreaVisible})).setParametersAreaVisible(((e,t)=>{this.parametersAreaVisible=t.visible,this.showParametersArea(t.visible&&(this.hasVisibleParameters(this.parameters)||!this.controller.autoRunEnabled))}))}clear(){this.fill([])}setParameters(e){this.initialParameterValues=null===e?null:$.extend({},e)}on(e,t){return this.eventEmitter.on(e,t),this}trigger(e,...t){return this.eventEmitter.trigger(e,...t)}}class Ee{element;$element;options;constructor(e,t={}){this.element=e,this.$element=$(e),this.options=t,Object.defineProperty(this.element,"__COMPONENT__",{get:()=>this})}}var Se={};const we={button:class extends Ee{icon;click;component;constructor(e,t){super(e,t),this.options.icon=e.dataset.icon,this.options.fillMode=e.dataset.fillMode,this.component=new kendo.ui.Button(e,this.options),this._initCommand()}_initCommand(){if(!this.options.command)return;const e=this.options.command;this.component.setOptions({click:t=>{t.preventDefault(),e.exec()}}),$(e).on("enabledChanged",((e,t)=>{this.component.enable(t)}))}},"toggle-button":class extends Ee{icon;click;component;constructor(e,t){super(e,t),this.options.icon=e.dataset.icon,this.options.fillMode=e.dataset.fillMode,this.component=new kendo.ui.Button(e,this.options),this._initCommand()}_initCommand(){if(!this.options.command)return;const e=this.options.command;this.component.setOptions({click:t=>{t.preventDefault(),e.setChecked(!e.getChecked())}}),$(e).on("enabledChanged",((e,t)=>{this.component.enable(t)})),$(e).on("checkedChanged",((e,t)=>{t?this.component.element.addClass("k-selected"):this.component.element.removeClass("k-selected")}))}}};function Ce(e){ye(e,"title"),ye(e,"aria-label")}function ye(e,t){e&&e.attr(t,Y[e.attr(t)])}var Ae={};function Ie(e){if(e){var t=e.find(".trv-replace-string"),i=e.find("[aria-label]").add(e),r=e.find("[title]"),a=e.find("[data-required-msg]"),n=e.find("[data-email-msg]");t.length&&Array.from(t).forEach((e=>{var t;(t=$(e))&&t.text(Y[t.text()])})),i.length&&Array.from(i).forEach((e=>{Te($(e),"aria-label")})),r.length&&Array.from(r).forEach((e=>{Te($(e),"title")})),a.length&&Array.from(a).forEach((e=>{Te($(e),"data-required-msg")})),n.length&&Array.from(n).forEach((e=>{Te($(e),"data-email-msg")}))}}function Te(e,t){e&&e.attr(t,Y[e.attr(t)])}class Re{_events;constructor(){this._events={}}resolveEvent(e){var t=this._events[e];return t||(this._events[e]=t=new Me(e)),t}on(e,t){this.resolveEvent(e).on(t)}trigger(e,t){this.resolveEvent(e).trigger(t)}}class Me{_callbacks;_eventName;constructor(e){this._callbacks=[],this._eventName=e}on(e){this._callbacks.push(e)}trigger(e){const t=this._eventName;this._callbacks.forEach((function(i){i.apply(null,[t,...e])}))}}class _e{_eventEmitter;constructor(){this._eventEmitter=new Re}eventFactory(e,t){var i=function(e){var t;return e&&e.length&&(t=e[0]),"function"==typeof t?t:null}(t);return i?this._eventEmitter.on(e,i):this._eventEmitter.trigger(e,t),this}Events={GET_DOCUMENT_MAP_STATE:"trv.GET_DOCUMENT_MAP_STATE",SET_DOCUMENT_MAP_VISIBLE:"trv.SET_DOCUMENT_MAP_VISIBLE",GET_PARAMETER_AREA_STATE:"trv.GET_PARAMETER_AREA_STATE",SET_PARAMETER_AREA_VISIBLE:"trv.SET_PARAMETER_AREA_VISIBLE",SET_TOGGLE_SIDE_MENU:"trv.SET_TOGGLE_SIDE_MENU",GET_TOGGLE_SIDE_MENU:"trv.GET_TOGGLE_SIDE_MENU",UPDATE_UI:"trv.UPDATE_UI",CSS_LOADED:"trv.CSS_LOADED",UPDATE_UI_INTERNAL:"trv.UPDATE_UI_INTERNAL",PAGE_NUMBER:"trv.PAGE_NUMBER",PAGE_COUNT:"trv.PAGE_COUNT",GET_SEARCH_DIALOG_STATE:"trv.GET_SEARCH_DIALOG_STATE",GET_SEND_EMAIL_DIALOG_STATE:"trv.GET_SEND_EMAIL_DIALOG_STATE",SET_SEARCH_DIALOG_VISIBLE:"trv.SET_SEARCH_DIALOG_VISIBLE",SET_SEND_EMAIL_DIALOG_VISIBLE:"trv.SET_SEND_EMAIL_DIALOG_VISIBLE",SET_AI_PROMPT_DIALOG_VISIBLE:"trv.SET_AI_PROMPT_DIALOG_VISIBLE"};on(){const e=this._eventEmitter;e.on.apply(e,arguments)}getDocumentMapState(){return this.eventFactory(this.Events.GET_DOCUMENT_MAP_STATE,arguments)}setDocumentMapVisible(){return this.eventFactory(this.Events.SET_DOCUMENT_MAP_VISIBLE,arguments)}getParametersAreaState(){return this.eventFactory(this.Events.GET_PARAMETER_AREA_STATE,arguments)}setParametersAreaVisible(){return this.eventFactory(this.Events.SET_PARAMETER_AREA_VISIBLE,arguments)}cssLoaded(){return this.eventFactory(this.Events.CSS_LOADED,arguments)}updateUI(){return this.eventFactory(this.Events.UPDATE_UI,arguments)}updateUIInternal(){return this.eventFactory(this.Events.UPDATE_UI_INTERNAL,arguments)}pageNumberChange(){return this.eventFactory(this.Events.PAGE_NUMBER,arguments)}pageCountChange(){return this.eventFactory(this.Events.PAGE_COUNT,arguments)}getSendEmailDialogState(){return this.eventFactory(this.Events.GET_SEND_EMAIL_DIALOG_STATE,arguments)}setSearchDialogVisible(){return this.eventFactory(this.Events.SET_SEARCH_DIALOG_VISIBLE,arguments)}setSendEmailDialogVisible(){return this.eventFactory(this.Events.SET_SEND_EMAIL_DIALOG_VISIBLE,arguments)}setAiPromptDialogVisible(){return this.eventFactory(this.Events.SET_AI_PROMPT_DIALOG_VISIBLE,arguments)}}class De{_data={};get length(){return Object.keys(this._data).length}constructor(){this._data={}}getItem(e){return this._data[e]||null}setItem(e,t){this._data[e]=t}removeItem(e){delete this._data[e]}key(e){return Object.keys(this._data)[e]||null}clear(){this._data={}}}const Le=(ke={},{load:(e,t,i)=>{var r=ke[e];return r||(ke[e]=r=i.get(e).then((e=>{var i={},r=[],a=h(t,"\\/")+"/";e=l(e,"{service}/",a),e=l(e,"{service}",a);var n=$("<div></div>").html(e);return Array.from(n.find("template")).forEach((e=>{var t=$(e);i[t.attr("id")]=s(t.html(),"\n \t")})),Array.from(n.find("link")).forEach((e=>{r.push(s(e.outerHTML,"\n \t"))})),r=w(r),{templates:i,styleSheets:r}}))),r}});var ke;class Ve{_id;_storage;_defaults;constructor(e,t,i){this._id=e,this._storage=t,this._defaults=i||{}}formatKey(e){return this._id+"_"+e}getItem(e){var t=this._storage.getItem(this.formatKey(e));if("string"==typeof t)try{t=JSON.parse(t)}catch(e){t=null}return null!=t?t:this._defaults[e]}setItem(e,t){var i=this.formatKey(e);this._storage.setItem(i,JSON.stringify(t))}getViewMode(){return this.getItem("viewMode")}setViewMode(e){this.setItem("viewMode",e)}getPageMode(){return this.getItem("pageMode")}setPageMode(e){this.setItem("pageMode",e)}getPrintMode(){return this.getItem("printMode")}setPrintMode(e){this.setItem("printMode",e)}getScale(){return this.getItem("scale")}setScale(e){this.setItem("scale",e)}getScaleMode(){return this.getItem("scaleMode")}setScaleMode(e){this.setItem("scaleMode",e)}getDocumentMapVisible(){return this.getItem("documentMapVisible")}setDocumentMapVisible(e){this.setItem("documentMapVisible",e)}getParametersAreaVisible(){return this.getItem("parametersAreaVisible")}setParametersAreaVisible(e){this.setItem("parametersAreaVisible",e)}getHistory(){return this.getItem("history")}setHistory(e){this.setItem("history",e)}getClientId(){return this.getItem("clientId")}setClientId(e){this.setItem("clientId",e)}getReportSource(){return this.getItem("reportSource")}setReportSource(e){this.setItem("reportSource",e)}getPageNumber(){return this.getItem("pageNumber")}setPageNumber(e){this.setItem("pageNumber",e)}getEnableAccessibility(){return this.getItem("enableAccessibility")}setEnableAccessibility(e){this.setItem("enableAccessibility",e)}getAccessibilityKeyMap(){return this.getItem("accessibilityKeyMap")}setAccessibilityKeyMap(e){this.setItem("accessibilityKeyMap",e)}getSearchMetadataOnDemand(){return this.getItem("searchMetadataOnDemand")}setSearchMetadataOnDemand(e){this.setItem("searchMetadataOnDemand",e)}getKeepClientAlive(){return this.getItem("keepClientAlive")}setKeepClientAlive(e){this.setItem("keepClientAlive",e)}}class Ne extends Ee{cmd;_numeric;constructor(e,t){super(e,t),this.cmd=this.options.commands.goToPage,this._numeric=new kendo.ui.NumericTextBox(this.element,{format:"0",decimals:0,min:0,spinners:!1,change:this._onChange.bind(this),spin:this._onChange.bind(this)}),this._numeric._text[0].dataset.role="telerik_ReportViewer_PageNumberInput",this._numeric.element[0].dataset.role="",this._numeric.wrapper[0].classList.add("trv-toolbar-numeric"),this._numeric._text[0].setAttribute("aria-label",Y.ariaLabelPageNumberEditor),this.options.controller.onAsync("reportLoadComplete",(async e=>{this._numeric.max(e.pageCount),this._numeric.min(Math.min(1,e.pageCount)),this._numeric.value(Math.min(1,e.pageCount))})).on("loadedReportChange",(()=>{this._numeric.min(0),this._numeric.max(0),this._numeric.value(0)})).on("renderingStopped",(()=>{this._numeric.min(0),this._numeric.max(0),this._numeric.value(0)})),this.options.notificationService.pageNumberChange(((e,t)=>{var i=t,r=this.options.controller.getPageCount();this.element.parentElement.setAttribute("aria-label",d(Y.ariaLabelPageNumberSelector,[i,r])),this._numeric.value(t)}))}_onChange(e,t){var r=this._numeric.value(),a=i.tryParseInt(r);isNaN(a)||this.cmd.exec(a)}_onSpin(e,t){return this._onChange(e,t)}}class xe extends Ee{constructor(e,t){super(e,t),t.notificationService.pageCountChange(((e,t)=>{this.$element.text(t)}))}}function Oe(e,t){var i,r;function a(e,i){var r=t[e];"function"==typeof r&&r(i)}!function(e){if("function"==typeof $.fn.kendoTouch)try{$(e).on("mousedown",(()=>{r=!0})).on("mouseup",(()=>{r=!1})).kendoTouch({multiTouch:!0,enableSwipe:!0,swipe:e=>{r||function(e){a("swipe",e)}(e)},gesturestart:e=>{r||function(e){i=kendo.touchDelta(e.touches[0],e.touches[1]).distance}(e)},gestureend:e=>{},gesturechange:e=>{r||function(e){var t=kendo.touchDelta(e.touches[0],e.touches[1]).distance;(function(e){a("pinch",e)})({distance:t,lastDistance:i}),i=t}(e)},doubletap:e=>{r||function(e){a("doubletap",e)}(e)},touchstart:e=>{r||a("touchstart")}})}catch(e){throw console.error("Instantiation of Kendo Touch threw an exception",e),e}}(e)}const $e="title",Fe="aria-label",Be="data-command",Ue="data-command-parameter",ze="export-dropdown",Ge='[data-role="telerik_ReportViewer_PageNumberInput"]',He='[data-role="telerik_ReportViewer_PageCountLabel"]',We="button",qe="buttonGroup",je="toggle-button",Ke="dropDownButton",Je="menu-button",Xe="separator",Ye="custom-element";var Ze={};function Qe(e){if(e){var t=e.find(".trv-replace-string"),i=e.find("[aria-label]").add(e),r=e.find("[title]");t.length&&Array.from(t).forEach((e=>{var t;(t=$(e))&&t.text(Y[t.text()])})),i.length&&Array.from(i).forEach((e=>{et($(e),"aria-label")})),r.length&&Array.from(r).forEach((e=>{et($(e),"title")}))}}function et(e,t){e&&e.attr(t,Y[e.attr(t)])}var tt,it={[i.ViewMode.Interactive]:F.INTERACTIVE,[i.ViewMode.PrintPreview]:F.PRINT_PREVIEW},rt={[F.INTERACTIVE]:i.ViewMode.Interactive,[F.PRINT_PREVIEW]:i.ViewMode.PrintPreview},at={[i.PageMode.SinglePage]:U.SINGLE_PAGE,[i.PageMode.ContinuousScroll]:U.CONTINUOUS_SCROLL},nt={[U.SINGLE_PAGE]:i.PageMode.SinglePage,[U.CONTINUOUS_SCROLL]:i.PageMode.ContinuousScroll},ot={[i.ScaleMode.FitPageWidth]:z.FIT_PAGE_WIDTH,[i.ScaleMode.FitPage]:z.FIT_PAGE,[i.ScaleMode.Specific]:z.SPECIFIC},st={[z.FIT_PAGE_WIDTH]:i.ScaleMode.FitPageWidth,[z.FIT_PAGE]:i.ScaleMode.FitPage,[z.SPECIFIC]:i.ScaleMode.Specific},lt={[i.PrintMode.AutoSelect]:B.AUTO_SELECT,[i.PrintMode.ForcePDFPlugin]:B.FORCE_PDF_PLUGIN,[i.PrintMode.ForcePDFFile]:B.FORCE_PDF_FILE},ct={[B.AUTO_SELECT]:i.PrintMode.AutoSelect,[B.FORCE_PDF_PLUGIN]:i.PrintMode.ForcePDFPlugin,[B.FORCE_PDF_FILE]:i.PrintMode.ForcePDFFile},ht=(tt={},Object.keys(Y).forEach((e=>{let t=e.charAt(0).toUpperCase();tt[`ReportViewer_${t}${e.slice(1)}`]=Y[e]})),tt);function dt(e,t){var r=t.serviceUrl,a="";t.reportServer&&(a=h(t.reportServer.url,"\\/"),r=a+"/api/reports");var n,s,l,c,p=$(e),m={},g=t.id||"#"+p.attr("id"),v={},b={},P={},E={},w={},y={},A="";if(t.viewerSelector="reportViewer-"+o(),p.attr("data-selector",t.viewerSelector),function(e){if(!e)return p.text("The report viewer configuration options are not initialized."),!1;if(e.reportServer){if(!e.reportServer.url)return p.text("The report server URL is not specified."),!1}else if(!e.serviceUrl)return p.text("The serviceUrl is not specified."),!1;return!0}(t)){var I,T="19.1.25.521";if(t=$.extend({},function(e,t){return{id:null,serviceUrl:null,templateUrl:h(e,"\\/")+"/resources/templates/telerikReportViewerTemplate-"+t+".html/",reportSource:null,reportServer:null,authenticationToken:null,sendEmail:null,scale:1,scaleMode:z.SPECIFIC,viewMode:F.INTERACTIVE,pageMode:U.CONTINUOUS_SCROLL,parametersAreaPosition:W.RIGHT,documentMapAreaPosition:q.LEFT,parameters:{editors:{multiSelect:H.LIST_VIEW,singleSelect:H.LIST_VIEW}},persistSession:!1,parameterEditors:[],disabledButtonClass:null,checkedButtonClass:null,parametersAreaVisible:!0,documentMapVisible:!0,enableAccessibility:!1,searchMetadataOnDemand:!1,initialPageAreaImageUrl:null,keepClientAlive:!0,webDesignerPreview:!1}}(r,T),t),v=new Ve(g,t.persistSession?window.sessionStorage:new De,{scale:t.scale,scaleMode:t.scaleMode,printMode:t.printMode?t.printMode:t.directPrint,enableAccessibility:t.enableAccessibility,searchMetadataOnDemand:t.searchMetadataOnDemand,sendEmail:t.sendEmail,parametersAreaPosition:t.parametersAreaPosition,documentMapAreaPosition:t.documentMapAreaPosition,keepClientAlive:t.keepClientAlive,webDesignerPreview:t.webDesignerPreview}),b=new _e,t.reportServer){var R=(A=h(t.reportServer.url,"\\/"))+"/api/reports",M=A+"/Token",_=new i.ServiceClientLoginInfo(M,t.reportServer.username,t.reportServer.password);y=new i.ServiceClientOptions(R,_)}else y=new i.ServiceClientOptions(t.serviceUrl);if(s=new i.ServiceClient(y),c=new K({controller:P=new i.ReportController(s,new i.ReportControllerOptions(t.keepClientAlive,t.authenticationToken,t.reportSource,ct[t.printMode],nt[t.pageMode],rt[t.viewMode],st[t.scaleMode],t.scale,ht,t.enableAccessibility,t.searchMetadataOnDemand)),settings:v}),E=new O({controller:P,notificationService:b,history:c}),new pe({controller:P,notificationService:b,history:c,commands:E}),w={stringResources:Y,refreshReport:e=>(0===arguments.length&&(e=!0),P.refreshReport(e,"",!0),w),reportSource:e=>e||null===e?(P.setReportSource(e),P.refreshReport(!1,"",!0),w):P.getReportSource(),clearReportSource:()=>(P.setReportSource(new i.ReportSourceOptions),w),viewMode:e=>e?(P.setViewMode(rt[e]),w):it[P.getViewMode()],pageMode:e=>e?(P.setPageMode(nt[e]),w):at[P.getPageMode()],printMode:e=>e?(P.setPrintMode(ct[e]),w):lt[P.getPrintMode()],scale:e=>e?(P.setScale(e.scale),P.setScaleMode(st[e.scaleMode]),w):{scale:P.getScale(),scaleMode:ot[P.getScaleMode()]},currentPage:()=>P.getCurrentPageNumber(),pageCount:()=>P.getPageCount(),parametersAreaVisible:e=>{b.setParametersAreaVisible({visible:e})},getReportParameters:()=>P.getReportParameters(),isReportAutoRun:()=>P.autoRunEnabled,authenticationToken:e=>(e&&P.setAuthenticationToken(e),w),bind:(e,t)=>{L(e,t,!0)},unbind:(e,t)=>{L(e,t,!1)},accessibilityKeyMap:e=>{if(n)return e?(n.setKeyMap(e),w):n.getKeyMap()},commands:E,dispose:()=>{B(),P.disposeSentinel(),P.destroy(),l&&l.dispose()}},!window.Promise)throw"The current browser does not support the Promise feature which is required for using the Report Viewer.";return function(e){return window.kendo?Promise.resolve():S(h(r,"\\/")+"/resources/js/telerikReportViewer.kendo-"+e+".min.js/").catch((e=>{C("Kendo could not be loaded automatically. Make sure 'options.serviceUrl' / 'options.reportServer.url' is correct and accessible. The error is: "+e.error)}))}(I=T).then((()=>{})).then((()=>{w.authenticationToken(t.authenticationToken),P.getServiceConfiguration().catch((e=>{var t=f(e)?e.exceptionMessage:d(Y.errorServiceUrl,[u(r)]);return p.text(t),Promise.reject(t)})).then((e=>{if(P.setConfigurationInfo(e),e.version!==I){var i=d(Y.errorServiceVersion,[e.version,I]);return p.text(i),Promise.reject(i)}Le.load(t.templateUrl,r,s).catch((()=>{var e=d(Y.errorLoadingTemplates,[u(t.templateUrl)]);return p.text(e),Promise.reject(e)})).then((e=>(m=e.templates,function(e){if(!e)return Promise.resolve();var t=$("head"),i=t.find("link").map(((e,t)=>t.outerHTML)).toArray(),r=[];return Array.from(e).forEach((e=>{-1===i.indexOf(e)&&r.push(new Promise(((i,r)=>{var a=$(e);a.on("load",i),a.on("onerror",(()=>{C("error loading stylesheet "+e),i()})),t.append(a)})))})),Promise.all(r).then(b.cssLoaded.bind(b))}(e.styleSheets)))).then(x)})).catch((e=>{$(w).trigger({type:j.ERROR,data:{sender:w}},e)}))})),w}function L(e,t,i){"function"==typeof t?i?$(w).on(e,{sender:w},t):$(w).off(e,t):t||i||$(w).off(e)}function V(){var r,a,o,s,c,h,d,u,g,f;p.html(m["trv-report-viewer"]),k.bind(p,{controller:P,notificationService:b,commands:E,templates:m},t),new i.ContentArea(p[0],P,ht,{enableAccessibility:t.enableAccessibility,initialPageAreaImageUrl:t.initialPageAreaImageUrl}),(l=new ue(e,P,b)).attach(),Oe(r=p.find(".trv-page-container"),{swipe:function(e){var t=P.getCurrentPageNumber();a&&"left"===e.direction?t<P.getPageCount()&&P.navigateToPage(t+1):o&&"right"===e.direction&&t>1&&P.navigateToPage(t-1)},pinch:function(e){var t=P.getScale(),r=e.distance/e.lastDistance;P.setScaleMode(i.ScaleMode.Specific),P.setScale(t*r)},doubletap:function(){E.toggleZoomMode.exec()},touchstart:function(){var e=r.find(".trv-page-wrapper")[0];o=0===e.scrollLeft,a=e.scrollWidth-e.offsetWidth===e.scrollLeft}}),function(){var e={max:"500px",min:"50px",size:"300",collapsible:!0,scrollable:!1},i=p.find(".trv-parameters-area"),r=[{}],a={max:"500px",min:"50px",size:"300",collapsible:!0,collapsed:!0,scrollable:!1},n=p.find(".trv-document-map"),o=[{}],s="horizontal";t.documentMapAreaPosition===q.RIGHT?(n.insertAfter(p.find(".trv-pages-area")),o.push(a)):o.unshift(a);t.parametersAreaPosition!==W.TOP&&t.parametersAreaPosition!==W.BOTTOM||(s="vertical",i.addClass("-vertical"),e.size="130px");t.parametersAreaPosition===W.LEFT||t.parametersAreaPosition===W.TOP?(i.insertBefore(p.find(".trv-document-map-splitter")),r.unshift(e)):r.push(e);try{p.find(".trv-document-map-splitter").attr("id",t.viewerSelector+"-document-map-splitter").kendoSplitter({panes:o,expand:e=>{N(e.pane,!0)},collapse:e=>{N(e.pane,!1)},resize:e=>{}}).data("kendoSplitter")}catch(e){throw console.error("Instantiation of Kendo Splitter as Document Map splitter threw an exception",e),e}try{p.find(".trv-parameters-splitter").attr("id",t.viewerSelector+"-parameters-splitter").kendoSplitter({panes:r,orientation:s,expand:e=>{N(e.pane,!0)},collapse:e=>{N(e.pane,!1)},resize:e=>{}}).data("kendoSplitter")}catch(e){throw console.error("Instantiation of Kendo Splitter as Parameters area splitter threw an exception",e),e}}(),function(){const e={[j.EXPORT_BEGIN]:"exportStarted",[j.EXPORT_END]:"exportDocumentReady",[j.PRINT_BEGIN]:"printStarted",[j.PRINT_END]:"printDocumentReady",[j.SEND_EMAIL_BEGIN]:"sendEmailStarted",[j.SEND_EMAIL_END]:"sendEmailDocumentReady",[j.PAGE_READY]:"pageReady",[j.ERROR]:"error",[j.INTERACTIVE_ACTION_EXECUTING]:"interactiveActionExecuting",[j.INTERACTIVE_ACTION_ENTER]:"interactiveActionEnter",[j.INTERACTIVE_ACTION_LEAVE]:"interactiveActionLeave",[j.PARAMETERS_LOADED]:"parametersLoaded"};var t={[j.RENDERING_BEGIN]:"beforeLoadReport",[j.RENDERING_END]:"reportLoadComplete"},i=$(w);const r=e=>async t=>{i.trigger({type:e,data:{sender:w}},t)};for(let t in e){let i=e[t];P.on(i,(e=>{t===j.PAGE_READY&&(e.pageActions=JSON.stringify(e.pageActions)),r(t)(e)}))}for(let e in t){let i=t[e];P.onAsync(i,r(e))}var a;b.on(b.Events.UPDATE_UI,(a=i,function(e,t){a.trigger({type:j.UPDATE_UI,data:e.data},t)}))}(),L(j.EXPORT_BEGIN,t.exportBegin,!0),L(j.EXPORT_END,t.exportEnd,!0),L(j.PRINT_BEGIN,t.printBegin,!0),L(j.PRINT_END,t.printEnd,!0),L(j.SEND_EMAIL_BEGIN,t.sendEmailBegin,!0),L(j.SEND_EMAIL_END,t.sendEmailEnd,!0),L(j.RENDERING_BEGIN,t.renderingBegin,!0),L(j.RENDERING_END,t.renderingEnd,!0),L(j.PAGE_READY,t.pageReady,!0),L(j.ERROR,t.error,!0),L(j.UPDATE_UI,t.updateUi,!0),L(j.INTERACTIVE_ACTION_EXECUTING,t.interactiveActionExecuting,!0),L(j.INTERACTIVE_ACTION_ENTER,t.interactiveActionEnter,!0),L(j.INTERACTIVE_ACTION_LEAVE,t.interactiveActionLeave,!0),L(j.VIEWER_TOOLTIP_OPENING,t.viewerToolTipOpening,!0),L(j.PARAMETERS_LOADED,t.parametersLoaded,!0),s=v.getViewMode(),c=v.getPageMode(),h=v.getPrintMode(),d=v.getScale(),u=v.getScaleMode(),g=v.getDocumentMapVisible(),f=v.getParametersAreaVisible(),v.getAccessibilityKeyMap(),P.setViewMode(rt[s||t.viewMode]),P.setPageMode(nt[c||t.pageMode]),P.setPrintMode(ct[h||t.printMode]),P.setScaleMode(st[u||t.scaleMode]),P.setScale(d||t.scale),b.setDocumentMapVisible({visible:g||t.documentMapVisible}),b.setParametersAreaVisible({visible:f||t.parametersAreaVisible}),P.on("viewModeChanged",(()=>{v.setViewMode(it[P.getViewMode()])})).on("pageModeChanged",(()=>{v.setPageMode(at[P.getPageMode()])})).on("printModeChanged",(()=>{v.setPrintMode(lt[P.getPrintMode()])})).on("scaleModeChanged",(e=>{v.setScaleMode(ot[e])})).on("scaleChanged",(e=>{v.setScale(e)})).on("clientIdChanged",(e=>{v.setClientId(e)})).on("currentPageChanged",(e=>{v.setPageNumber(e)})).on("reportSourceChanged",(e=>{v.setReportSource(e)})),b.setDocumentMapVisible((()=>{var e={};b.getDocumentMapState(e),v.setDocumentMapVisible(e.visible)})),b.setParametersAreaVisible((()=>{var e={};b.getParametersAreaState(e),v.setParametersAreaVisible(e.visible)})),function(e){if(e.enableAccessibility){n=new D({controller:P,notificationService:b,templates:m});var t=e.accessibilityKeyMap;t&&n.setKeyMap(t),P.setContentTabIndex(function(){var e="div.trv-pages-area";try{var t=p.find(e);if(0===t.length)throw"Selector "+e+" did not return a result.";return parseInt(t.attr("tabindex"))}catch(e){return console&&console.log(e),0}}())}}(t)}function N(e,t){switch($(e).attr("data-id")){case"trv-document-map":b.setDocumentMapVisible({visible:t});break;case"trv-parameters-area":b.setParametersAreaVisible({visible:t})}}function x(){var e=!1;if(V(),!t.webDesignerPreview){if(P.shouldShowLicenseBanner()){$(".trv-content-wrapper")?.prepend('<span class="trv-license-banner"></span>');const e=$(".trv-license-banner").kendoNotification({appendTo:".trv-license-banner",hideOnClick:!1,autoHideAfter:0,button:!0,hide:()=>{P.saveToSessionStorage("hideBanner","true")}}).data("kendoNotification"),t=P.getConfigurationInfo()?.license;e.show(`<span class='trv-license-message'>${t?.title||t?.message} ${t?.actionMessage}</span>\n                                    <a class='trv-license-link' target='_blank' href='${t?.actionLink}'>\n                                        <span class='k-icon k-i-question-circle'></span>\n                                    </a>`,"warning")}P.shouldShowLicenseOverlay()&&$(".trv-content-wrapper")?.prepend('<div class="trv-license-overlay"></div>')}P.onAsync("reportLoadComplete",(async()=>{!1===t.documentMapVisible&&b.setDocumentMapVisible({visible:!1})})).on("navigateToReport",(e=>{P.setReportSource({report:e.Report,parameters:e.Parameters}),P.refreshReport(!1)})).on("toolTipOpening",(e=>{!function(e){var t=$(e.element),i={element:e.element,toolTip:{title:e.title,text:e.text},cancel:!1};if(B(),$(w).trigger({type:j.VIEWER_TOOLTIP_OPENING},i),i.cancel)return;var r=function(e){var t=m["trv-pages-area-kendo-tooltip"],i=$(t),r=i.find(".trv-pages-area-kendo-tooltip-title"),a=i.find(".trv-pages-area-kendo-tooltip-text");return r.text(e.toolTip.title),a.text(e.toolTip.text),i.clone().wrap("<p>").parent().html()}(i),a=e.element.viewportElement,n=function(e,t){var i=e.data("kendoTooltip");if(!i)try{i=e.kendoTooltip({content:t,autohide:!0,callout:!0,position:"top"}).data("kendoTooltip")}catch(e){throw console.error("Instantiation of Kendo Tooltip threw an exception",e),e}return i}(t,r);w._tooltipShowTimeout=setTimeout((()=>{var i,r,o,s;n.show(t),a&&"svg"===a.nodeName&&(i=n,o=(r=e).pageX,s=r.pageY,i.popup.element.parent().css({left:o+10,top:s+5}))}),100)}(e)})).on("toolTipClosing",(e=>{!function(e){var t=$(e.element),i=t.data("kendoTooltip");B(),i&&i.hide()}(e)}));var i=v.getReportSource();if(void 0!==i){P.setReportSource(i);var r=v.getPageNumber();void 0!==r&&P.navigateToPage(r),e=!0}else t.viewMode&&P.setViewMode(rt[t.viewMode]),t.pageMode&&P.setPageMode(nt[t.pageMode]),t.reportSource&&(P.setReportSource(t.reportSource),e=!0);"function"==typeof t.ready&&t.ready.call(w),e&&P.refreshReport(!1,"",!0)}function B(){w._tooltipShowTimeout&&(clearTimeout(w._tooltipShowTimeout),w._tooltipShowTimeout=null)}}var ut="telerik_ReportViewer";$.fn[ut]=function(e){return this.selector&&!e.selector&&(e.selector=this.selector),this.each((function(){$.data(this,ut)||$.data(this,ut,new dt(this,e))}))};return[{name:"telerik_ReportViewer_DocumentMapArea",constructor:class{options;viewerOptions;controller;notificationService;$element;$documentMap;documentMapVisible;enableAccessibility;currentReport;documentMapNecessary;constructor(e,t,i){if(this.element=e,this.options=$.extend({},me,t,i),this.controller=this.options.controller,!this.controller)throw"No controller (telerikReporting.reportViewerController) has been specified.";if(this.notificationService=this.options.notificationService,!this.notificationService)throw"No notificationService (telerikReporting.NotificationService) has been specified.";this.$element=$(this.element),this.$documentMap,this.documentMapVisible=!1!==this.options.documentMapVisible,this.enableAccessibility=this.options.enableAccessibility,this.currentReport=null,this.documentMapNecessary=!1,this.init()}init(){this.$documentMap=$('<div id="'+this.options.viewerSelector+'-documentMap" data-role="treeview"></div>'),this.$documentMap.appendTo(this.element),this._attachEvents(),this.replaceStringResources(this.$element)}onTreeViewSelectionChanged(e){var t=e.sender.dataItem(e.node),i=t.page,r=t.id;this.controller.navigateToPage(i,{type:"bookmark",id:r})}onTreeViewNodeExpand(e){this.enableAccessibility&&window.setTimeout((()=>{this.setNodeAccessibilityAttributes(e.node)}),100)}setNodeAccessibilityAttributes(e){var t=$(e).find("li");Array.from(t).forEach((e=>{var t=$(e);t.attr("aria-label",t[0].innerText)}))}resetReportAndClearItems(){this.documentMapNecessary=!1,this.showDocumentMap(!1);const e=this.controller.getReportSource().report,t=this.currentReport!==e||!this.isVisible();this.currentReport=e,t&&this.clearDocumentMap()}clearDocumentMap(){this.displayDocumentMap([])}displayDocumentMap(e){var t=e&&!$.isEmptyObject(e),i=this.$documentMap.data("kendoTreeView");if(!i)try{this.$documentMap.kendoTreeView({dataTextField:"text",select:this.onTreeViewSelectionChanged.bind(this)}),i=this.$documentMap.data("kendoTreeView")}catch(e){throw console.error("Instantiation of Kendo TreeView as Document Map threw an exception",e),e}i.setDataSource(e),this.enableAccessibility&&this.setAccessibilityAttributes(i),this.showDocumentMap(t)}setAccessibilityAttributes(e){e.bind("expand",this.onTreeViewNodeExpand.bind(this)),e.element.attr("aria-label",Y.ariaLabelDocumentMap);var t=e.element.find("ul");Array.from(t).forEach((e=>{this.setNodeAccessibilityAttributes(e)})),this.documentMapNecessary&&this.setSplitbarAccessibilityAttributes()}setSplitbarAccessibilityAttributes(){var e=this.$element.next();this.options.documentMapAreaPosition===q.RIGHT&&(e=this.$element.prev()),e.attr("aria-label",Y.ariaLabelDocumentMapSplitter)}isVisible(){var e={};return this.notificationService.getDocumentMapState(e),e.visible}beginLoad(){this.$element.addClass("trv-loading")}endLoad(){this.$element.removeClass("trv-loading")}showDocumentMap(e){var t=$("#"+this.options.viewerSelector+"-document-map-splitter").getKendoSplitter(),i=this.$element.next();this.options.documentMapAreaPosition===q.RIGHT&&(i=this.$element.prev()),t&&((this.documentMapNecessary?$.fn.removeClass:$.fn.addClass).call(i,"k-hidden"),t.toggle(".trv-document-map",e))}_attachEvents(){this.controller.on("beforeLoadParameters",(()=>{this.resetReportAndClearItems()})).on("beginLoadReport",(()=>{this.beginLoad()})).onAsync("reportLoadComplete",(async e=>{e.documentMapAvailable?(this.documentMapNecessary=!0,this.displayDocumentMap(e.documentMapNodes),this.notificationService.setDocumentMapVisible({enabled:!0,visible:this.documentMapVisible})):(this.documentMapNecessary=!1,this.showDocumentMap(this.documentMapNecessary)),this.endLoad()})).on("error",(()=>{this.endLoad(),this.clearDocumentMap()})).on("renderingStopped",(()=>{this.documentMapNecessary=!1,this.showDocumentMap(!1)})),this.notificationService.setDocumentMapVisible(((e,t)=>{this.documentMapVisible=t.visible,this.showDocumentMap(this.documentMapVisible&&this.documentMapNecessary)})).getDocumentMapState(((e,t)=>{t.enabled=this.documentMapNecessary,t.visible=this.documentMapVisible}))}replaceStringResources(e){var t=e.find(".trv-document-map-overlay");t&&t.attr("aria-label",Y[t.attr("aria-label")])}}},{name:"telerik_ReportViewer_ParametersArea",constructor:Pe},{name:"telerik_ReportViewer_SearchDialog",constructor:class{constructor(e,t,r){if(this.options=$.extend({},Se,t),this.viewerOptions=r,this.element=e,this.$element=$(e),this.reportViewerWrapper=$(`[data-selector='${this.viewerOptions.viewerSelector}']`),this.viewer=this.reportViewerWrapper.data("telerik_ReportViewer"),this.controller=this.options.controller,this.notificationService=this.options.notificationService,this.initialized=!1,this.kendoSearchDialog,this.kendoComboBox,this.resultsLabel,this.kendoListView,this.commands,this.searchManager,this.mruList=[],this.inputComboRebinding,this.searchMetadataRequested,this.searchMetadataLoaded,this.windowLocation,this.lastSearch="",!this.controller)throw"No controller (telerikReporting.ReportViewerController) has been specified.";if(!this.notificationService)throw"No notificationService (telerikReporting.NotificationService) has been specified.";this.pagesAreaContainer=$('[data-id="trv-pages-area"]'),this.searchManager=new i.SearchManager(this.pagesAreaContainer[0],this.controller),this.searchManager.on("searchComplete",this.updateResultsUI.bind(this)),this.init()}init(){this.initialized||(!function(e){if(e){var t=e.find(".trv-search-dialog-search-options"),i=e.find("button[data-command='telerik_ReportViewer_searchDialog_StopSearch']"),r=e.find("button[data-command='telerik_ReportViewer_searchDialog_MatchCase']"),a=e.find("button[data-command='telerik_ReportViewer_searchDialog_MatchWholeWord']"),n=e.find("button[data-command='telerik_ReportViewer_searchDialog_UseRegex']"),o=e.find("button[data-command='telerik_ReportViewer_searchDialog_NavigateUp']"),s=e.find("button[data-command='telerik_ReportViewer_searchDialog_NavigateDown']");ye(e,"aria-label"),ye(t,"aria-label"),Ce(i),Ce(r),Ce(a),Ce(n),Ce(o),Ce(s)}}(this.$element),this._initDialog(),this._initSearchbox(),this._initResultsArea(),this._attachCommands(),this._attachEvents(),this.updateResultsUI(null),this.initialized=!0)}_attachEvents(){this.controller.on("beginLoadReport",this.closeAndClear.bind(this)).on("viewModeChanged",this.closeAndClear.bind(this)),this.notificationService.setSearchDialogVisible(((e,t)=>{this.toggleSearchDialog(t.visible)})).setSendEmailDialogVisible(((e,t)=>{t.visible&&this.controller.getSearchInitiated()&&this.close()})),$(window).on("resize",(()=>{this.kendoSearchDialog&&this.kendoSearchDialog.options.visible&&(this.storeDialogPosition(),this.adjustDialogPosition())}))}closeAndClear(){this.searchMetadataRequested||(this.close(),this.searchMetadataLoaded=!1)}toggleSearchDialog(e){if((this.controller.setSearchInitiated(e),e)&&(this.viewerOptions.searchMetadataOnDemand&&!this.searchMetadataLoaded))return this.searchMetadataRequested=!0,this.controller.onAsync("reportLoadComplete",(async()=>{this.searchMetadataRequested&&(this.open(),this.searchMetadataRequested=!1)})),void this.controller.refreshReport(!0);this.toggle(e)}open(){this.toggle(!0)}close(){this.toggle(!1)}toggle(e){this.controller.setSearchInitiated(e),e?(this.searchMetadataLoaded=!0,this.kendoSearchDialog.open()):(this.searchManager.closeSearch(),this.kendoSearchDialog&&this.kendoSearchDialog.options.visible&&this.kendoSearchDialog.close())}_initSearchbox(){this.kendoComboBox=new kendo.ui.ComboBox(this.element.querySelector(".trv-search-dialog-input-box"),{placeholder:Y.searchDialogCaptionText,dataTextField:"value",dataValueField:"value",dataSource:this.mruList,contentElement:"",change:this.kendoComboBoxSelect.bind(this),ignoreCase:!1,filtering:this.onInputFiltering.bind(this),filter:"startswith",delay:1e3,open:e=>{this.inputComboRebinding&&e.preventDefault()},select:this.processComboBoxEvent.bind(this)})}_initDialog(){this.kendoSearchDialog=new kendo.ui.Window(this.element,{title:Y.searchDialogTitle,visible:!1,height:390,width:310,minWidth:310,minHeight:390,maxHeight:700,scrollable:!1,close:e=>{this.storeDialogPosition(),this.kendoComboBox.value(""),this.updateResultsUI(null),this.toggleErrorLabel(!1,null),this.lastSearch=""},open:e=>{this.adjustDialogPosition()},deactivate:e=>{this.notificationService.setSearchDialogVisible({visible:!1})},activate:e=>{this.kendoComboBox.input.focus()}}),this.kendoSearchDialog.element.removeClass("trv-search-dialog k-hidden"),this.kendoSearchDialog.wrapper.addClass("trv-search-dialog")}storeDialogPosition(){this.windowLocation=this.kendoSearchDialog.wrapper.offset()}adjustDialogPosition(){var e=$(window).innerWidth(),t=$(window).innerHeight(),i=this.kendoSearchDialog.wrapper.outerWidth(!0),r=this.kendoSearchDialog.wrapper.outerHeight(!0),a=10;if(this.windowLocation){var n=this.windowLocation.left,o=this.windowLocation.top,s=o+r;n+i>e-a&&(n=Math.max(a,e-i-a),this.kendoSearchDialog.setOptions({position:{left:n}})),s>t-a&&(o=Math.max(a,t-r-a),this.kendoSearchDialog.setOptions({position:{top:o}}))}else{var l=this.pagesAreaContainer[0].getBoundingClientRect();this.kendoSearchDialog.setOptions({position:{top:l.top+a,left:l.right-i-a}})}}processComboBoxEvent(e){if(window.event||window.event.type){var t=window.event;"keydown"===t.type&&(e.preventDefault(),40===t.keyCode&&this.moveListSelection(1),38===t.keyCode&&this.moveListSelection(-1))}}_attachCommands(){this.commands={searchDialog_MatchCase:new V,searchDialog_MatchWholeWord:new V,searchDialog_UseRegex:new V,searchDialog_StopSearch:new V((()=>{this.stopSearch()})),searchDialog_NavigateUp:new V((()=>{this.moveListSelection(-1)})),searchDialog_NavigateDown:new V((()=>{this.moveListSelection(1)}))},Object.keys(this.commands).forEach((e=>{const t=this.element.querySelector(`button[data-command='telerik_ReportViewer_${e}']`),i=we[t?.dataset?.role],r=this.commands[e];if(i)return new i(t,{command:r})})),$(this.commands.searchDialog_MatchCase).on("checkedChanged",((e,t)=>{this.searchForCurrentToken()})),$(this.commands.searchDialog_MatchWholeWord).on("checkedChanged",((e,t)=>{this.searchForCurrentToken()})),$(this.commands.searchDialog_UseRegex).on("checkedChanged",((e,t)=>{this.searchForCurrentToken()}))}_initResultsArea(){this.resultsLabel=this.element.querySelector(".trv-search-dialog-results-label"),this.resultsLabel.innerText=Y.searchDialogNoResultsLabel,this.kendoListView=new kendo.ui.ListView(this.element.querySelector(".trv-search-dialog-results-area"),{selectable:!0,navigatable:!0,dataSource:[],contentElement:"",template:`\n                <div class="k-list-item !k-align-items-start">\n                    <span class="k-list-item-text">#: description #</span>\n                    <span class="k-flex"></span>\n                    <span class="k-flex-none">${Y.searchDialogPageText} #:page#</span>\n                </div>\n            `.trim(),change:e=>{var t=e.sender,i=t.select().index(),r=t.dataSource.view(),a=r[i];this.onSelectedItem(a),this.updateUI(i,r.length)}}),this.kendoListView.element.addClass("k-list k-list-md")}stopSearch(){this.setStopButtonEnabledState(!1)}setStopButtonEnabledState(e){this.commands.searchDialog_StopSearch.setEnabled(e)}onInputFiltering(e){e.preventDefault(),e.filter&&e.filter.value!==this.lastSearch&&(this.lastSearch=e.filter.value,this.searchForToken(this.lastSearch))}kendoComboBoxSelect(e){var t=e.sender.value();t&&this.lastSearch!==t&&(this.lastSearch=t,this.searchForToken(this.lastSearch))}searchForCurrentToken(){this.kendoComboBox&&this.searchForToken(this.kendoComboBox.value())}searchForToken(e){this.onSearchStarted(),this.addToMRU(e),this.searchManager.search({searchToken:e,matchCase:this.commands.searchDialog_MatchCase.getChecked(),matchWholeWord:this.commands.searchDialog_MatchWholeWord.getChecked(),useRegularExpressions:this.commands.searchDialog_UseRegex.getChecked()})}onSearchStarted(){this.resultsLabel.innerText=Y.searchDialogSearchInProgress,this.setStopButtonEnabledState(!0),this.toggleErrorLabel(!1,null)}updateResultsUI(e,t){this.setStopButtonEnabledState(!1),t&&this.toggleErrorLabel(!0,t),this.kendoListView.dataSource.data(e||[]),e&&e.length>0?(this.kendoListView.select(this.kendoListView.content.children().first()),this.kendoListView.trigger("change")):this.updateUI(-1,0)}addToMRU(e){if(e&&""!==e){var t=this.mruList.filter((t=>t.value===e));t&&t.length>0||(this.mruList.unshift({value:e}),this.mruList.length>10&&this.mruList.pop(),this.inputComboRebinding=!0,this.kendoComboBox.dataSource.data(this.mruList),this.kendoComboBox.select((t=>t.value===e)),this.inputComboRebinding=!1)}}onSelectedItem(e){this.searchManager.highlightSearchItem(e)}updateUI(e,t){var i=0===t?Y.searchDialogNoResultsLabel:d(Y.searchDialogResultsFormatLabel,[e+1,t]);this.resultsLabel.innerText=i;var r=e>0,a=e<t-1;this.commands.searchDialog_NavigateUp.setEnabled(r),this.commands.searchDialog_NavigateDown.setEnabled(a)}moveListSelection(e){var t=this.kendoListView.select();if(t){var i=this.kendoListView.select().trigger("change").index(),r=this.kendoListView.dataSource.view(),a=Math.min(r.length-1,Math.max(0,i+e));if(a!==i){var n=r[a],o=this.kendoListView.element.find('[data-uid="'+n.uid+'"]');o&&(this.kendoListView.select(o),this.kendoListView.trigger("change"),this.scrollIfNeeded(o[0],this.kendoListView.element[0]))}}else t=this.kendoListView.element.children().first(),this.kendoListView.select(t),this.kendoListView.trigger("change")}scrollIfNeeded(e,t){if(e.offsetTop-e.clientHeight<t.scrollTop)e.scrollIntoView();else{var i=e.offsetTop+e.offsetHeight;i>t.scrollTop+t.offsetHeight&&(t.scrollTop=i-t.offsetHeight)}}toggleErrorLabel(e,t){var i=this.$element.find("i[data-role='telerik_ReportViewer_SearchDialog_Error']");i&&0!==i.length?e?(i[0].title=t,i.show()):i.hide():console.log(t)}}},{name:"telerik_ReportViewer_SendEmail",constructor:class{constructor(e,t,i){if(this.options=$.extend({},Ae,t),this.viewerOptions=i,this.element=e,this.$element=$(e),this.viewerElement=$(`[data-selector='${this.viewerOptions.viewerSelector}']`),this.viewer=this.viewerElement.data("telerik_ReportViewer"),this.controller=this.options.controller,this.notificationService=t.notificationService,this.initialized=!1,this.dialogVisible=!1,this.kendoSendEmailDialog,this.inputFrom,this.inputTo,this.inputCC,this.inputSubject,this.docFormat,this.docFormatEl,this.bodyEditorEl,this.bodyEditor,this.docFormatList,this.optionsCommandSet,this.windowLocation,!this.controller)throw"No controller (telerikReporting.ReportViewerController) has been specified.";if(!this.notificationService)throw"No notificationService (telerikReporting.NotificationService) has been specified.";this.viewerOptions.sendEmail&&this.viewerOptions.sendEmail.enabled?this.init():this.viewerElement.find("[data-command='toggleSendEmailDialog']").addClass("send-email-hidden")}init(){this.initialized||(Ie(this.$element),this.controller.getDocumentFormats().then((e=>{this.docFormatList=e,this.docFormat?.setDataSource(this.docFormatList)})),this._initDialog(),this._initInputFields(),this._attachCommands(),this._attachEvents(),this.initialized=!0)}_attachEvents(){this.controller.on("beginLoadReport",this.close.bind(this)).on("viewModeChanged",this.close.bind(this)),this.notificationService.getSendEmailDialogState(((e,t)=>{t.visible=this.dialogVisible})).setSendEmailDialogVisible(((e,t)=>{!0===t.visible?this.open():this.close()})).setSearchDialogVisible(((e,t)=>{t.visible&&this.dialogVisible&&this.close()})),$(window).on("resize",(()=>{this.kendoSendEmailDialog&&this.kendoSendEmailDialog.options.visible&&(this.storeDialogPosition(),this.adjustDialogPosition())}))}open(){this.dialogVisible=!0,this.kendoSendEmailDialog.open()}close(){this.dialogVisible=!1,this.kendoSendEmailDialog&&this.kendoSendEmailDialog.options.visible&&this.kendoSendEmailDialog.close()}getBody(){return this.bodyEditor?this.bodyEditor.value():""}_initDialog(){this.kendoSendEmailDialog=new kendo.ui.Window(this.element,{title:Y.sendEmailDialogTitle,visible:!1,width:800,minWidth:350,minHeight:350,modal:!0,close:()=>{this.storeDialogPosition(),this.kendoValidator.reset()},open:()=>{this.adjustDialogPosition()},deactivate:()=>{this.notificationService.setSendEmailDialogVisible({visible:!1})},activate:()=>{this.inputFrom.focus(),setTimeout((()=>{this.setValidation()}),250)}}),this.kendoSendEmailDialog.element.removeClass("trv-send-email-dialog k-hidden"),this.kendoSendEmailDialog.wrapper.addClass("trv-send-email-dialog")}_initInputFields(){const e=this.viewerOptions.viewerSelector;this.setAttrs(),this.inputFrom=new kendo.ui.TextBox(this.element.querySelector(`[name="${e}-from"]`),{}),this.inputTo=new kendo.ui.TextBox(this.element.querySelector(`[name="${e}-to"]`),{}),this.inputCC=new kendo.ui.TextBox(this.element.querySelector(`[name="${e}-cc"]`),{}),this.inputSubject=new kendo.ui.TextBox(this.element.querySelector(`[name="${e}-subject"]`),{}),this.docFormat=new kendo.ui.ComboBox(this.element.querySelector(`[name="${e}-format"]`),{dataTextField:"localizedName",dataValueField:"name",dataSource:this.docFormatList||[],filter:"startswith",dataBound:e=>{e.sender.select(0),e.sender.trigger("change")}}),this.bodyEditor=new kendo.ui.Editor(this.element.querySelector(`[name="${e}-emailBody"]`),{tools:["bold","italic","underline","strikethrough","justifyLeft","justifyCenter","justifyRight","justifyFull","insertUnorderedList","insertOrderedList","indent","outdent","createLink","unlink","cleanFormatting","formatting","fontName","fontSize","foreColor","backColor","subscript","superscript"]}),this.kendoValidator=new kendo.ui.Validator(this.element.querySelector(".trv-send-email-fields"),{})}setAttrs(){const e=this.viewerOptions.viewerSelector;Array.from(this.element.querySelectorAll(".trv-send-email-field input, .trv-send-email-field textarea")).forEach((t=>{var i=t.getAttribute("name");null!==i&&(t.setAttribute("id",`${e}-${i}`),t.setAttribute("name",`${e}-${i}`))})),Array.from(this.element.querySelectorAll(".trv-send-email-label label")).forEach((t=>{var i=t.getAttribute("for");null!==i&&t.setAttribute("for",`${e}-${i}`)}))}storeDialogPosition(){var e=this.kendoSendEmailDialog.element.parent(".k-window");this.windowLocation=e.offset()}adjustDialogPosition(){var e=$(window).innerWidth(),t=$(window).innerHeight(),i=this.kendoSendEmailDialog.wrapper.outerWidth(!0),r=this.kendoSendEmailDialog.wrapper.outerHeight(!0),a=10;if(this.windowLocation){var n=this.windowLocation.left,o=this.windowLocation.top,s=o+r;n+i>e-a&&(n=Math.max(a,e-i-a),this.kendoSendEmailDialog.setOptions({position:{left:n}})),s>t-a&&(o=Math.max(a,t-r-a),this.kendoSendEmailDialog.setOptions({position:{top:o}}))}else this.kendoSendEmailDialog.center()}_attachCommands(){this.optionsCommandSet={sendEmail_Cancel:new V((()=>{this.close()})),sendEmail_Send:new V((()=>{this.sendingEmail()}))},k.attachCommands(this.$element.find(".trv-send-email-actions"),this.optionsCommandSet,this.viewerOptions)}sendingEmail(e,t){var i={from:this.inputFrom.value(),to:this.inputTo.value(),cc:this.inputCC.value(),subject:this.inputSubject.value(),format:this.docFormat.value(),body:this.getBody(),deviceInfo:{}};this.validateFields()&&(this.controller.sendReport(i),this.close())}setValidation(){this.inputFrom.element.off("blur").on("blur",(()=>{this.isEmpty(this.inputFrom)||this.isValidEmail(this.inputFrom,!1)})),this.inputTo.element.off("blur").on("blur",(()=>{this.isEmpty(this.inputTo)||this.isValidEmail(this.inputTo,!0)})),this.inputCC.element.off("blur").on("blur",(()=>{this.inputCC.value().toString().length?this.isValidEmail(this.inputCC,!0):this.hideError(this.inputCC.element)}))}validateFields(){var e=!this.isEmpty(this.inputFrom)&&this.isValidEmail(this.inputFrom,!1),t=!this.isEmpty(this.inputTo)&&this.isValidEmail(this.inputTo,!0),i=this.isEmpty(this.inputCC)||this.isValidEmail(this.inputCC,!0),r=this.docFormat.value().length>0;return r||this.showError(this.docFormat.element,"data-required-msg"),e&&t&&i&&r}setDefaultValues(e){this.inputFrom.value(e&&e.from||""),this.inputTo.value(e&&e.to||""),this.inputCC.value(e&&e.cc||""),this.inputSubject.value(e&&e.subject||""),e&&e.format?this.docFormat.value(e.format):this.docFormat.select(0),this.docFormat.trigger("change"),this.bodyEditor.value(e&&e.body||"")}isEmpty(e){var t=e.element;return e.value().length?(this.hideError(t),!1):(this.showError(t,"data-required-msg"),!0)}showError(e,t){var i=Y[e.attr(t)];$('[data-for="'+e.attr("name")+'"]').addClass("-visible").text(i)}hideError(e){$('[data-for="'+e.attr("name")+'"]').removeClass("-visible")}isValidEmail(e,t){var i=e.value(),r=e.element;if(t){for(var a=i.split(/[\s,;]+/),n=0;n<a.length;n++)if(!this._validateEmail(a[n].trim(),r))return!1;return!0}return this._validateEmail(i,r)}_validateEmail(e,t){return e.indexOf(",")>-1||e.indexOf(";")>-1?(this.showError(t,"data-single-email-msg"),!1):!!/\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/.test(e)||(this.showError(t,"data-email-msg"),!1)}}},{name:"telerik_ReportViewer_LinkButton",constructor:class extends Ee{cmd;constructor(e,t){super(e,t);var i=this.$element.attr("data-command");i&&(this.cmd=this.options.commands[i]),this.cmd&&(this.$element.on("click",(e=>{this.cmd.getEnabled()?this.cmd.exec($(e.currentTarget).attr("data-command-parameter")):e.preventDefault()})),$(this.cmd).on("enabledChanged",(e=>{(this.cmd.getEnabled()?$.fn.removeClass:$.fn.addClass).call(this.$element,"disabled")})).on("checkedChanged",(e=>{(this.cmd.getChecked()?$.fn.addClass:$.fn.removeClass).call(this.$element,"checked")})))}}},{name:"telerik_ReportViewer_PageNumberInput",constructor:Ne},{name:"telerik_ReportViewer_PageCountLabel",constructor:xe},{name:"telerik_ReportViewer_Toolbar",constructor:class{_options;_element;_kendoToolbar;_neverOverflowToolBarButtons=["goToPrevPage","goToNextPage"];constructor(e,t,i){this._element=e,this._options=t,void 0===this._kendoToolbar&&this.initKendoToolbar(),this._options.controller.on("beginLoadReport",(()=>{const e=$(`#${ze}`).data("kendoDropDownButton");e?.enable(!1)})).onAsync("reportLoadComplete",(async()=>{void 0===i.renderingExtensions?this._options.controller.getDocumentFormats().then((e=>{this.updateExportDropdownItems(e)})).catch((e=>{this._options.controller.trigger("error",{message:e})})):this.updateExportDropdownItems(i.renderingExtensions)}))}initKendoToolbar(){const e=Array.from(this._element.children),t=[];e.forEach((e=>t.push(this.createToolbarItem(e))));const i=$(this._element);i.empty(),this._kendoToolbar=i.kendoToolBar({items:t,click:e=>{this.executeCommand(e)},toggle:e=>{this.executeCommand(e)}}).data("kendoToolBar");const r=$(Ge).get(0);r&&new Ne(r,this._options);const a=$(He).get(0);a&&new xe(a,this._options)}createToolbarItem(e){const t=(e.dataset?.command||"").replace("telerik_ReportViewer_","");if("toggleAiPromptDialog"===t&&!this._options.controller.getAiConfigurationOptions()?.isAvailable)return;const i=e.id,r=e.dataset?.role,a=e.dataset?.icon,n=e.dataset?.overflow,o=Y[e.title]||e.title||"",s=Y[e.ariaLabel]||e.ariaLabel||"",l=e.dataset?.commandParameter,c=this._options.commands[t];switch(r){case Xe:return{type:Xe,overflow:n||"auto"};case Ye:return e.title=o,e.ariaLabel=s,{template:e.outerHTML};case Je:return{id:i,type:Ke,icon:a,enable:!1,showArrowButton:!0,overflow:"never",fillMode:"flat",menuButtons:[{text:"Loading...",enabled:!1}]};case qe:const h=Array.from(e.children),d=[];return h.forEach((e=>{e.dataset?.role===We||e.dataset?.role===je?d.push(this.createToolbarItem(e)):console.warn("The data-role attribute of element nested inside a buttonGroup is missing or not supported. Only 'button' or 'toggle-button' data-role is allowed.")})),{type:qe,buttons:d,fillMode:"flat",overflow:n||"auto"};case We:case je:return $(c).on("enabledChanged",((e,i)=>{this._kendoToolbar.enable($(`button[${Be}="${t}"]`),i)})).on("checkedChanged",((e,i)=>{this._kendoToolbar.toggle($(`button[${Be}="${t}"]`),i)})),{id:i,type:We,text:o,icon:a,attributes:{[Be]:t,[Ue]:l,[Fe]:s,[$e]:o},fillMode:"flat",togglable:r===je,overflow:n||"auto",showText:"overflow"};default:return console.error(`The data-role attribute is missing or not supported: ${r}`),{}}}executeCommand(e){const t=e.target.get(0)?.dataset.command||"",i=e.target.get(0)?.dataset.commandParameter||"";if(!t)return;const r=this._options.commands[t];r?r.exec(i):console.error(`The provided data-command attribute is not present within the commands collection: ${t}`)}updateExportDropdownItems(e){const t=$(`#${ze}`).data("kendoDropDownButton");if(!t)return;if(!(e&&e.length>0))return void console.warn("No extensions found - the export dropdown button will remain disabled.");const i=[];e.forEach((e=>i.push({id:e.name,text:e.localizedName,attributes:{[Be]:"export",[Ue]:e.name}})));const r=t.options;r.items=i,t.setOptions(r),t.enable(!0)}}},{name:"telerik_ReportViewer_AiPromptDialog",constructor:class{constructor(e,t,i){if(this.options=$.extend({},Ze,t),this.viewerOptions=i,this.controller=this.options.controller,!this.controller)throw"No controller (telerikReporting.ReportViewerController) has been specified.";if(this.notificationService=this.options.notificationService,!this.notificationService)throw"No notificationService (telerikReporting.NotificationService) has been specified.";this.element=e,this.$element=$(e),this.kendoAiConsentDialog,this.kendoAiPromptDialog,this.kendoAiPrompt,this.kendoAiPromtDialogLocation,this.pagesAreaContainer=$('[data-id="trv-pages-area"]'),this.aiPromptDialogInitialized=!1,this.aiPromptInitialized=!1;const r=this.controller.getAiConfigurationOptions();this.requireConsent=r.requireConsent,this.allowCustomPrompts=r.allowCustomPrompts,this.init()}init(){this.aiPromptDialogInitialized||(Qe(this.$element),this.requireConsent&&(this._initAiConsentDialog(),this._attachAiConsentDialogCommands()),this._initAiPromptDialog(),this._attachEvents(),this.aiPromptDialogInitialized=!0)}_attachEvents(){this.controller.on("beginLoadReport",this.close.bind(this)).on("viewModeChanged",this.close.bind(this)),this.notificationService.setAiPromptDialogVisible(((e,t)=>{this.toggleAiPromptDialog(t.visible)})).setSendEmailDialogVisible(((e,t)=>{t.visible&&this.controller.getAiPromptInitiated()&&this.close()})),$(window).on("resize",(()=>{this.kendoAiPromptDialog&&this.kendoAiPromptDialog.options.visible&&(this.storeDialogPosition(),this.adjustDialogPosition(this.kendoAiPromptDialog))}))}_attachAiConsentDialogCommands(){const e={aiConsent_Cancel:new V((()=>{this.kendoAiConsentDialog.close(),this.notificationService.setAiPromptDialogVisible({visible:!1})})),aiConsent_Accept:new V((()=>{this.kendoAiConsentDialog.close(),this.controller.saveToSessionStorage("trvAiConsent","true"),this.controller.setAiPromptInitiated(!0),this.open()}))};k.attachCommands(this.kendoAiConsentDialog.element.find(".trv-ai-consent-actions"),e,this.viewerOptions)}_initAiConsentDialog(){const e=this.element.querySelector(".trv-ai-consent-dialog");e?(this.kendoAiConsentDialog=new kendo.ui.Window(e,{title:"Before you start with AI",width:500,minWidth:400,minHeight:106,maxHeight:800,resizable:!1,scrollable:!0,open:e=>{this.adjustDialogPosition(this.kendoAiConsentDialog)}}),this.kendoAiConsentDialog.element.removeClass("trv-ai-consent-dialog k-hidden"),this.kendoAiConsentDialog.wrapper.addClass("trv-ai-consent-dialog")):console.warn('Failed to initialize AI consent dialog due to missing element with class "trv-ai-consent-dialog".')}_initAiPromptDialog(){const e=this.element.querySelector(".trv-ai-prompt-dialog");e?(this.kendoAiPromptDialog=new kendo.ui.Window(e,{title:!1,visible:!1,draggable:{dragHandle:".k-prompt-header"},height:"fit-content",width:500,minWidth:400,maxHeight:800,scrollable:!0,close:e=>{this.storeDialogPosition()},open:e=>{this.adjustDialogPosition(this.kendoAiPromptDialog)},deactivate:e=>{this.notificationService.setAiPromptDialogVisible({visible:!1})}}),this.kendoAiPromptDialog.element.removeClass("trv-ai-prompt-dialog k-hidden"),this.kendoAiPromptDialog.wrapper.addClass("trv-ai-prompt-dialog")):console.warn('Failed to initialize AI prompt dialog due to missing element with class "trv-ai-prompt-dialog".')}_initAiPrompt(e){if(this.aiPromptInitialized)return;const t=this.kendoAiPromptDialog?.element?.find("#trv-ai-prompt");if(!t)return void console.warn('Failed to initialize AI prompt dialog due to missing element with id "trv-ai-prompt".');const i=this;this.kendoAiPrompt=new kendo.ui.AIPrompt(t,{activeView:0,promptRequest:function(e){e.prompt&&i.controller.getAIResponse(e.prompt).then((t=>{this.addPromptOutput(i.createPromptOutputFromResponse(t,e)),this.activeView(1)})).catch((t=>{this.addPromptOutput(i.createPromptOutputFromResponse(t?._responseJSON,e)),this.activeView(1)}))},toolbarItems:[{type:"spacer"},{type:"button",icon:"x",fillMode:"flat",themeColor:"primary",click:e=>{this.close()}}],views:[{type:"prompt",promptSuggestions:e,messages:{promptPlaceholder:"Enter your prompt"}},{type:"output"}]}),this.disableAiPromptTextArea(e&&e.length>0);const r=this.kendoAiPrompt.element.find(".k-prompt-header .k-toolbar").data("kendoToolBar");r&&r.bind("toggle",(t=>{"Ask AI"===t.target.text()&&this.disableAiPromptTextArea(e&&e.length>0)})),this.aiPromptInitialized=!0}disableAiPromptTextArea(e){if(this.allowCustomPrompts)return;let t="Enter your prompt";const i=this.kendoAiPrompt.element.find(".k-prompt-content .k-prompt-view textarea");if(e)t="Custom prompts are disabled, please select one of the predefined suggestions below";else{const e=this.kendoAiPrompt.element.find(".k-prompt-footer");e&&e.addClass("k-disabled"),t="Custom prompts are disabled and there are no predefined prompts configured. Please allow custom prompts or add predefined prompts to use the AI feature."}i&&i.attr("placeholder",t)&&i.addClass("k-disabled")}storeDialogPosition(){this.kendoAiPromtDialogLocation=this.kendoAiPromptDialog.wrapper.offset()}adjustDialogPosition(e){var t=$(window).innerWidth(),i=$(window).innerHeight(),r=e.wrapper.outerWidth(!0),a=e.wrapper.outerHeight(!0),n=10;if(this.kendoAiPromtDialogLocation){var o=this.kendoAiPromtDialogLocation.left,s=this.kendoAiPromtDialogLocation.top,l=s+a;o+r>t-n&&(o=Math.max(n,t-r-n),e.setOptions({position:{left:o}})),l>i-n&&(s=Math.max(n,i-a-n),this.kendoAiPromptDialog.setOptions({position:{top:s}}))}else{var c=this.pagesAreaContainer[0].getBoundingClientRect();e.setOptions({position:{top:c.top+n,left:c.right-r-n}})}}toggleAiPromptDialog(e){e?this.open():this.close()}open(){this.kendoAiConsentDialog&&this.requireConsent&&"true"!==this.controller.loadFromSessionStorage("trvAiConsent")?this.kendoAiConsentDialog.open():this.kendoAiPromptDialog&&this.controller.createAIThread().then((e=>{this.controller.setAiPromptInitiated(!0),this._initAiPrompt(e?.predefinedPrompts),this.kendoAiPromptDialog.open()}))}close(){this.controller.setAiPromptInitiated(!1),this.kendoAiPromptDialog&&this.kendoAiPromptDialog.options.visible&&this.kendoAiPromptDialog.close()}createPromptOutputFromResponse(e,t){return{id:kendo.guid(),output:e,prompt:t.prompt,isRetry:t.isRetry}}}}].forEach((e=>{$.fn[e.name]=function(t,i){return this.each((function(){$.data(this,e.name)||$.data(this,e.name,new e.constructor(this,t,i))}))}})),e.Accessibility=D,e.Binder=k,e.CommandSet=O,e.DocumentMapAreaPositions=q,e.Events=j,e.GlobalSettings=L,e.HistoryManager=K,e.MemStorage=De,e.PageModes=U,e.ParameterEditorTypes=H,e.ParameterEditors=he,e.ParameterTypes=G,e.ParameterValidators=de,e.ParametersArea=Pe,e.ParametersAreaPositions=W,e.PerspectiveManager=ue,e.PrintModes=B,e.ReportViewer=dt,e.ReportViewerSettings=Ve,e.ScaleModes=z,e.TouchBehavior=Oe,e.UIController=pe,e.ViewModes=F,e.domUtils=M,e.parameterEditorsMatch=Q,e.utils=T,Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}}),e}({});
